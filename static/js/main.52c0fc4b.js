/*! For license information please see main.52c0fc4b.js.LICENSE.txt */
(()=>{"use strict";var e={122:e=>{e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(s=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;0!==i--;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),S=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),x=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function B(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case S:return"Portal";case T:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case x:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(Sl){return e.body}}function J(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){$(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function se(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ee=null,Ie=null;function Te(e){if(e=wi(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Se(e.stateNode,e.type,t))}}function ke(e){Ee?Ie?Ie.push(e):Ie=[e]:Ee=e}function xe(){if(Ee){var e=Ee,t=Ie;if(Ie=Ee=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==Ee||null!==Ie)&&(Ne(),xe())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Pe=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){Pe=!1}function Le(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Fe=null,je=!1,Ue=null,Ve={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,s,o,a,l){Me=!1,Fe=null,Le.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(ze(e)!==e)throw Error(s(188))}function Ke(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ge(i),e;if(o===r)return Ge(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Je=i.unstable_shouldYield,Ye=i.unstable_requestPaint,$e=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,St,Et,It,Tt,kt=!1,xt=[],Ct=null,Nt=null,At=null,Rt=new Map,Dt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Tt(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){kt=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==Nt&&jt(Nt)&&(Nt=null),null!==At&&jt(At)&&(At=null),Rt.forEach(Ut),Dt.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<xt.length){Bt(xt[0],e);for(var n=1;n<xt.length;n++){var r=xt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Nt&&Bt(Nt,e),null!==At&&Bt(At,e),Rt.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var qt=b.ReactCurrentBatchConfig,Gt=!0;function Kt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Wt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Ht(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Wt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Wt(e,t,n,r){if(Gt){var i=Jt(e,t,n,r);if(null===i)Gr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dt.set(s,Mt(Dt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=Jt(e,t,n,r))&&Gr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Qt=null;function Jt(e,t,n,r){if(Qt=null,null!==(e=yi(e=_e(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in $t?$t.value:$t.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),vn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(yn),bn=sn(F({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Tn(){return In}var kn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),xn=sn(kn),Cn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),An=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(Rn),Pn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!On||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){ke(r),0<(t=Hr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){jr(e,0)}function Jn(e){if(W(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var $n=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;$n=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&Jn(Wn)){var t=[];Kn(t,Wn,e,_e(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Wn)}function sr(e,t){if("click"===e)return Jn(t)}function or(e,t){if("input"===e||"change"===e)return Jn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Hr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Er={},Ir={};function Tr(e){if(Er[e])return Er[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return Er[e]=n[t];return e}u&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var kr=Tr("animationend"),xr=Tr("animationiteration"),Cr=Tr("animationstart"),Nr=Tr("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ar.set(e,t),l(t,[e])}for(var Pr=0;Pr<Rr.length;Pr++){var Or=Rr[Pr];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(kr,"onAnimationEnd"),Dr(xr,"onAnimationIteration"),Dr(Cr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Fe;Me=!1,Fe=null,je||(je=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Re((function(){var r=s,i=_e(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=xn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case kr:case xr:case Cr:l=vn;break;case Nr:l=An;break;case"scroll":l=dn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=De(p,d))&&u.push(Kr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(h=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:bi(l),f=null==c?a:bi(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,yi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Wr(f))p++;for(f=0,m=d;m;m=Wr(m))f++;for(;0<p-f;)u=Wr(u),p--;for(;0<f-p;)d=Wr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Wr(u),d=Wr(d)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==h&&Qr(o,h,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yn;else if(Gn(a))if($n)g=or;else{g=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Kn(o,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?bi(r):window,e){case"focusin":(Gn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else zn?Vn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==w?"onCompositionEnd"===w&&zn&&(y=en()):(Xt="value"in($t=i)?$t.value:$t.textContent,zn=!0)),0<(v=Hr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:v}),y?w.data=y:null!==(y=Bn(n))&&(w.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Xt=$t=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}jr(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=De(e,n))&&r.unshift(Kr(e,s,i)),null!=(s=De(e,t))&&r.push(Kr(e,s,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=De(n,s))&&o.unshift(Kr(n,l,a)):i||null!=(l=De(n,s))&&o.push(Kr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Jr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Si=[],Ei=-1;function Ii(e){return{current:e}}function Ti(e){0>Ei||(e.current=Si[Ei],Si[Ei]=null,Ei--)}function ki(e,t){Ei++,Si[Ei]=e.current,e.current=t}var xi={},Ci=Ii(xi),Ni=Ii(!1),Ai=xi;function Ri(e,t){var n=e.type.contextTypes;if(!n)return xi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ti(Ni),Ti(Ci)}function Oi(e,t,n){if(Ci.current!==xi)throw Error(s(168));ki(Ci,t),ki(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xi,Ai=Ci.current,ki(Ci,e),ki(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ni),Ti(Ci),ki(Ci,e)):Ti(Ni),ki(Ni,n)}var ji=null,Ui=!1,Vi=!1;function Bi(e){null===ji?ji=[e]:ji.push(e)}function zi(){if(!Vi&&null!==ji){Vi=!0;var e=0,t=wt;try{var n=ji;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),We(Ze,zi),i}finally{wt=t,Vi=!1}}return null}var qi=[],Gi=0,Ki=null,Hi=0,Wi=[],Qi=0,Ji=null,Yi=1,$i="";function Xi(e,t){qi[Gi++]=Hi,qi[Gi++]=Ki,Ki=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=Yi,Wi[Qi++]=$i,Wi[Qi++]=Ji,Ji=e;var r=Yi;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,$i=s+e}else Yi=1<<s|n<<i|r,$i=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Ki;)Ki=qi[--Gi],qi[Gi]=null,Hi=qi[--Gi],qi[Gi]=null;for(;e===Ji;)Ji=Wi[--Qi],Wi[Qi]=null,$i=Wi[--Qi],Wi[Qi]=null,Yi=Wi[--Qi],Wi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ji?{id:Yi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function ws(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&ys(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Fc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case S:return(t=Vc(t,e.mode,n)).return=e,t;case D:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Fc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case D:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);vs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,a[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),s=o(v,s,m),null===u?c=v:u.sibling=v,u=v,h=g}if(m===a.length)return n(i,h),is&&Xi(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===u?c=h:u.sibling=h,u=h);return is&&Xi(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Xi(i,m),c}function g(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var w=f(i,m,y.value,c);if(null===w){null===m&&(m=v);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?u=w:h.sibling=w,h=w,m=v}if(y.done)return n(i,m),is&&Xi(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(i,y.value,c))&&(a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return is&&Xi(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),is&&Xi(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===E){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&ys(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=gs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===E?((s=Fc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Mc(o.type,o.key,o.props,null,r.mode,l)).ref=gs(r,s,o),l.return=r,r=l)}return a(r);case S:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Vc(o,r.mode,l)).return=r,r=s}return a(r);case D:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(L(o))return g(r,s,o,l);vs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Uc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var bs=ws(!0),_s=ws(!1),Ss=Ii(null),Es=null,Is=null,Ts=null;function ks(){Ts=Is=Es=null}function xs(e){var t=Ss.current;Ti(Ss),e._currentValue=t}function Cs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ns(e,t){Es=e,Ts=Is=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function As(e){var t=e._currentValue;if(Ts!==e)if(e={context:e,memoizedValue:t,next:null},null===Is){if(null===Es)throw Error(s(308));Is=e,Es.dependencies={lanes:0,firstContext:e}}else Is=Is.next=e;return t}var Rs=null;function Ds(e){null===Rs?Rs=[e]:Rs.push(e)}function Ps(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ds(t)):(n.next=i.next,i.next=n),t.interleaved=n,Os(e,r)}function Os(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ls=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function js(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Os(e,n)}return null===(i=r.interleaved)?(t.next=t,Ds(r)):(t.next=i.next,i.next=t),r.interleaved=t,Os(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Bs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zs(e,t,n,r){var i=e.updateQueue;Ls=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Ls=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fl|=o,e.lanes=o,e.memoizedState=h}}function qs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Gs={},Ks=Ii(Gs),Hs=Ii(Gs),Ws=Ii(Gs);function Qs(e){if(e===Gs)throw Error(s(174));return e}function Js(e,t){switch(ki(Ws,t),ki(Hs,e),ki(Ks,Gs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Ks),ki(Ks,t)}function Ys(){Ti(Ks),Ti(Hs),Ti(Ws)}function $s(e){Qs(Ws.current);var t=Qs(Ks.current),n=le(t,e.type);t!==n&&(ki(Hs,e),ki(Ks,n))}function Xs(e){Hs.current===e&&(Ti(Ks),Ti(Hs))}var Zs=Ii(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=b.ReactCurrentDispatcher,io=b.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,co=!1,uo=!1,ho=0,fo=0;function po(){throw Error(s(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:ea,e=n(r,i),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,i)}while(uo)}if(ro.current=Xo,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,co=!1,t)throw Error(s(300));return e}function vo(){var e=0!==ho;return ho=0,e}function yo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function wo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function bo(e,t){return"function"===typeof t?t(e):t}function _o(e){var t=wo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ao,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((so&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,oo.lanes|=h,Fl|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(wa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Fl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function So(e){var t=wo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(wa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Eo(){}function Io(e,t){var n=oo,r=wo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,wa=!0),r=r.queue,Mo(xo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Ro(9,ko.bind(null,n,r,i,t),void 0,null),null===Al)throw Error(s(349));0!==(30&so)||To(n,t,i)}return i}function To(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ko(e,t,n,r){t.value=n,t.getSnapshot=r,Co(t)&&No(e)}function xo(e,t,n){return n((function(){Co(t)&&No(e)}))}function Co(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function No(e){var t=Os(e,1);null!==t&&rc(t,e,1,-1)}function Ao(e){var t=yo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Qo.bind(null,oo,e),[t.memoizedState,e]}function Ro(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Do(){return wo().memoizedState}function Po(e,t,n,r){var i=yo();oo.flags|=e,i.memoizedState=Ro(1|t,n,void 0,void 0===r?null:r)}function Oo(e,t,n,r){var i=wo();r=void 0===r?null:r;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Ro(t,n,s,r))}oo.flags|=e,i.memoizedState=Ro(1|t,n,s,r)}function Lo(e,t){return Po(8390656,8,e,t)}function Mo(e,t){return Oo(2048,8,e,t)}function Fo(e,t){return Oo(4,2,e,t)}function jo(e,t){return Oo(4,4,e,t)}function Uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4,4,Uo.bind(null,t,e),n)}function Bo(){}function zo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Go(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),oo.lanes|=n,Fl|=n,e.baseState=!0),t)}function Ko(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{wt=n,io.transition=r}}function Ho(){return wo().memoizedState}function Wo(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Jo(e))Yo(t,n);else if(null!==(n=Ps(e,t,n,r))){rc(n,e,r,tc()),$o(n,t,r)}}function Qo(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jo(e))Yo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Ds(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ps(e,t,i,r))&&(rc(n,e,r,i=tc()),$o(n,t,r))}}function Jo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Yo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $o(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Xo={readContext:As,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:As,useCallback:function(e,t){return yo().memoizedState=[e,void 0===t?null:t],e},useContext:As,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Po(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Po(4194308,4,e,t)},useInsertionEffect:function(e,t){return Po(4,2,e,t)},useMemo:function(e,t){var n=yo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Wo.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yo().memoizedState=e},useState:Ao,useDebugValue:Bo,useDeferredValue:function(e){return yo().memoizedState=e},useTransition:function(){var e=Ao(!1),t=e[0];return e=Ko.bind(null,e[1]),yo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=yo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Al)throw Error(s(349));0!==(30&so)||To(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(xo.bind(null,r,o,e),[e]),r.flags|=2048,Ro(9,ko.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=yo(),t=Al.identifierPrefix;if(is){var n=$i;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:As,useCallback:zo,useContext:As,useEffect:Mo,useImperativeHandle:Vo,useInsertionEffect:Fo,useLayoutEffect:jo,useMemo:qo,useReducer:_o,useRef:Do,useState:function(){return _o(bo)},useDebugValue:Bo,useDeferredValue:function(e){return Go(wo(),ao.memoizedState,e)},useTransition:function(){return[_o(bo)[0],wo().memoizedState]},useMutableSource:Eo,useSyncExternalStore:Io,useId:Ho,unstable_isNewReconciler:!1},ta={readContext:As,useCallback:zo,useContext:As,useEffect:Mo,useImperativeHandle:Vo,useInsertionEffect:Fo,useLayoutEffect:jo,useMemo:qo,useReducer:So,useRef:Do,useState:function(){return So(bo)},useDebugValue:Bo,useDeferredValue:function(e){var t=wo();return null===ao?t.memoizedState=e:Go(t,ao.memoizedState,e)},useTransition:function(){return[So(bo)[0],wo().memoizedState]},useMutableSource:Eo,useSyncExternalStore:Io,useId:Ho,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=js(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(rc(t,e,i,r),Vs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=js(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(rc(t,e,i,r),Vs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=js(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Us(e,i,r))&&(rc(t,e,r,n),Vs(t,e,r))}};function sa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function oa(e,t,n){var r=!1,i=xi,s=t.contextType;return"object"===typeof s&&null!==s?s=As(s):(i=Di(t)?Ai:Ci.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):xi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ms(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=As(s):(s=Di(t)?Ai:Ci.current,i.context=Ri(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ra(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),zs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=js(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kl||(Kl=!0,Hl=r),ha(0,t)},n}function pa(e,t,n){(n=js(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new da;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=xc.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=js(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ya=b.ReactCurrentOwner,wa=!1;function ba(e,t,n,r){t.child=null===e?_s(t,null,n,r):bs(t,e.child,n,r)}function _a(e,t,n,r,i){n=n.render;var s=t.ref;return Ns(t,i),r=go(e,t,n,r,s,i),n=vo(),null===e||wa?(is&&n&&es(t),t.flags|=1,ba(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ga(e,t,i))}function Sa(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Oc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ea(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ga(e,t,i)}return t.flags|=1,(e=Lc(s,r)).ref=t.ref,e.return=t,t.child=e}function Ea(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(wa=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ga(e,t,i);0!==(131072&e.flags)&&(wa=!0)}}return ka(e,t,n,r,i)}function Ia(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Ol,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Ol,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ki(Ol,Pl),Pl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ki(Ol,Pl),Pl|=r;return ba(e,t,i,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ka(e,t,n,r,i){var s=Di(n)?Ai:Ci.current;return s=Ri(t,s),Ns(t,i),n=go(e,t,n,r,s,i),r=vo(),null===e||wa?(is&&r&&es(t),t.flags|=1,ba(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ga(e,t,i))}function xa(e,t,n,r,i){if(Di(n)){var s=!0;Mi(t)}else s=!1;if(Ns(t,i),null===t.stateNode)qa(e,t),oa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=As(c):c=Ri(t,c=Di(n)?Ai:Ci.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,o,r,c),Ls=!1;var d=t.memoizedState;o.state=d,zs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ni.current||Ls?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Ls||sa(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Fs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=As(l):l=Ri(t,l=Di(n)?Ai:Ci.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&aa(t,o,r,l),Ls=!1,d=t.memoizedState,o.state=d,zs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ni.current||Ls?("function"===typeof f&&(ra(t,n,f,r),p=t.memoizedState),(c=Ls||sa(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ca(e,t,n,r,s,i)}function Ca(e,t,n,r,i,s){Ta(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ga(e,t,s);r=t.stateNode,ya.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,a,s)):ba(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Js(e,t.containerInfo)}function Aa(e,t,n,r,i){return fs(),ps(i),t.flags|=256,ba(e,t,n,r),t.child}var Ra,Da,Pa,Oa,La={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var r,i=t.pendingProps,o=Zs.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(Zs,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=jc(l,i,0,null),e=Fc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=La,e):ja(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ua(e,t,a,r=ua(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=jc({mode:"visible",children:r.children},i,0,null),(o=Fc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&bs(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=La,o);if(0===(1&t.mode))return Ua(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ua(e,t,a,r=ua(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),wa||l){if(null!==(r=Al)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Os(e,i),rc(r,e,i,-1))}return vc(),Ua(e,t,a,r=ua(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Nc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Wi[Qi++]=Yi,Wi[Qi++]=$i,Wi[Qi++]=Ji,Yi=e.id,$i=e.overflow,Ji=t),t=ja(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Lc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Lc(r,a):(a=Fc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ma(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=Lc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ja(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ua(e,t,n,r){return null!==r&&ps(r),bs(t,e.child,null,n),(e=ja(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Cs(e.return,t,n)}function Ba(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function za(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ba(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ba(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ba(t,!0,n,null,s);break;case"together":Ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ga(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Lc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ka(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ha(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ha(t),null;case 1:case 17:return Di(t.type)&&Pi(),Ha(t),null;case 3:return r=t.stateNode,Ys(),Ti(Ni),Ti(Ci),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Da(e,t),Ha(t),null;case 5:Xs(t);var i=Qs(Ws.current);if(n=t.type,null!==e&&null!=t.stateNode)Pa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ha(t),null}if(e=Qs(Ks.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Ra(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=J(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ur("scroll",e):null!=u&&w(e,o,u,l))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ha(t),null;case 6:if(e&&null!=t.stateNode)Oa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Ws.current),Qs(Ks.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ha(t),null;case 13:if(Ti(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ha(t),o=!1}else null!==ss&&(ac(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Ll&&(Ll=3):vc())),null!==t.updateQueue&&(t.flags|=4),Ha(t),null);case 4:return Ys(),Da(e,t),null===e&&zr(t.stateNode.containerInfo),Ha(t),null;case 10:return xs(t.type._context),Ha(t),null;case 19:if(Ti(Zs),null===(o=t.memoizedState))return Ha(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ka(o,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Ka(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>ql&&(t.flags|=128,r=!0,Ka(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ka(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ha(t),null}else 2*$e()-o.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ka(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=Zs.current,ki(Zs,r?1&n|2:1&n),t):(Ha(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Ha(t),6&t.subtreeFlags&&(t.flags|=8192)):Ha(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qa(e,t){switch(ts(t),t.tag){case 1:return Di(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ys(),Ti(Ni),Ti(Ci),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xs(t),null;case 13:if(Ti(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(Zs),null;case 4:return Ys(),null;case 10:return xs(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Ra=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Da=function(){},Pa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Ks.current);var s,o=null;switch(n){case"input":i=J(e,i),r=J(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Oa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ja=!1,Ya=!1,$a="function"===typeof WeakSet?WeakSet:Set,Xa=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){kc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ya||Za(n,t);case 6:var r=ul,i=hl;ul=null,dl(e,t,n),hl=i,null!==(ul=r)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Ya&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,t,o),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Ya&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){kc(n,t,a)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Ya=(r=Ya)||null!==n.memoizedState,dl(e,t,n),Ya=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $a),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(o,a,i),ul=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){kc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){kc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){kc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&$(i,o),we(l,a);var u=we(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(l){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){kc(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){kc(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=$e())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ya=(u=Ya)||h,ml(t,e),Ya=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Xa=e,h=e.child;null!==h;){for(d=Xa=h;null!==Xa;){switch(p=(f=Xa).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Za(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){kc(r,n,g)}}break;case 5:Za(f,f.return);break;case 22:if(null!==f.memoizedState){_l(d);continue}}null!==p?(p.return=f,Xa=p):_l(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){kc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),vl(e),4&r&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(Bc){kc(e,e.return,Bc)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Xa=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==Xa;){var i=Xa,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ja;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ya;a=Ja;var c=Ya;if(Ja=o,(Ya=l)&&!c)for(Xa=i;null!==Xa;)l=(o=Xa).child,22===o.tag&&null!==o.memoizedState?El(i):null!==l?(l.return=o,Xa=l):El(i);for(;null!==s;)Xa=s,wl(s,t,n),s=s.sibling;Xa=i,Ja=a,Ya=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Xa=s):bl(e)}}function bl(e){for(;null!==Xa;){var t=Xa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ya||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ya)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&qs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(s(163))}Ya||512&t.flags&&il(t)}catch(f){kc(t,t.return,f)}}if(t===e){Xa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xa=n;break}Xa=t.return}}function _l(e){for(;null!==Xa;){var t=Xa;if(t===e){Xa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xa=n;break}Xa=t.return}}function El(e){for(;null!==Xa;){var t=Xa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(Bc){kc(t,n,Bc)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(Bc){kc(t,i,Bc)}}var s=t.return;try{il(t)}catch(Bc){kc(t,s,Bc)}break;case 5:var o=t.return;try{il(t)}catch(Bc){kc(t,o,Bc)}}}catch(Bc){kc(t,t.return,Bc)}if(t===e){Xa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xa=a;break}Xa=t.return}}var Il,Tl=Math.ceil,kl=b.ReactCurrentDispatcher,xl=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,Nl=0,Al=null,Rl=null,Dl=0,Pl=0,Ol=Ii(0),Ll=0,Ml=null,Fl=0,jl=0,Ul=0,Vl=null,Bl=null,zl=0,ql=1/0,Gl=null,Kl=!1,Hl=null,Wl=null,Ql=!1,Jl=null,Yl=0,$l=0,Xl=null,Zl=-1,ec=0;function tc(){return 0!==(6&Nl)?$e():-1!==Zl?Zl:Zl=$e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Nl)&&0!==Dl?Dl&-Dl:null!==ms.transition?(0===ec&&(ec=mt()),ec):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<$l)throw $l=0,Xl=null,Error(s(185));vt(e,n,r),0!==(2&Nl)&&e===Al||(e===Al&&(0===(2&Nl)&&(jl|=n),4===Ll&&lc(e,Dl)),ic(e,r),1===n&&0===Nl&&0===(1&t.mode)&&(ql=$e()+500,Ui&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Al?Dl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,Bi(e)}(cc.bind(null,e)):Bi(cc.bind(null,e)),oi((function(){0===(6&Nl)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,ec=0,0!==(6&Nl))throw Error(s(327));var n=e.callbackNode;if(Ic()&&e.callbackNode!==n)return null;var r=dt(e,e===Al?Dl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Nl;Nl|=2;var o=gc();for(Al===e&&Dl===t||(Gl=null,ql=$e()+500,pc(e,t));;)try{bc();break}catch(l){mc(e,l)}ks(),kl.current=o,Nl=i,null!==Rl?t=0:(Al=null,Dl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ml,pc(e,0),lc(e,r),ic(e,$e()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ml,pc(e,0),lc(e,r),ic(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Ec(e,Bl,Gl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=zl+500-$e())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Ec.bind(null,e,Bl,Gl),t);break}Ec(e,Bl,Gl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){e.timeoutHandle=ri(Ec.bind(null,e,Bl,Gl),r);break}Ec(e,Bl,Gl);break;default:throw Error(s(329))}}}return ic(e,$e()),e.callbackNode===n?sc.bind(null,e):null}function oc(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Bl,Bl=n,null!==t&&ac(t)),e}function ac(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function lc(e,t){for(t&=~Ul,t&=~jl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Nl))throw Error(s(327));Ic();var t=dt(e,0);if(0===(1&t))return ic(e,$e()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ml,pc(e,0),lc(e,t),ic(e,$e()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ec(e,Bl,Gl),ic(e,$e()),null}function hc(e,t){var n=Nl;Nl|=1;try{return e(t)}finally{0===(Nl=n)&&(ql=$e()+500,Ui&&zi())}}function dc(e){null!==Jl&&0===Jl.tag&&0===(6&Nl)&&Ic();var t=Nl;Nl|=1;var n=Cl.transition,r=wt;try{if(Cl.transition=null,wt=1,e)return e()}finally{wt=r,Cl.transition=n,0===(6&(Nl=t))&&zi()}}function fc(){Pl=Ol.current,Ti(Ol)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:Ys(),Ti(Ni),Ti(Ci),no();break;case 5:Xs(r);break;case 4:Ys();break;case 13:case 19:Ti(Zs);break;case 10:xs(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Al=e,Rl=e=Lc(e.current,null),Dl=Pl=t,Ll=0,Ml=null,Ul=jl=Fl=0,Bl=Vl=null,null!==Rs){for(t=0;t<Rs.length;t++)if(null!==(r=(n=Rs[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Rs=null}return e}function mc(e,t){for(;;){var n=Rl;try{if(ks(),ro.current=Xo,co){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(so=0,lo=ao=oo=null,uo=!1,ho=0,xl.current=null,null===n||null===n.return){Ll=1,Ml=t,Rl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Dl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ga(a);if(null!==p){p.flags&=-257,va(p,a,l,0,t),1&p.mode&&ma(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ma(o,u,t),vc();break e}c=Error(s(426))}else if(is&&1&l.mode){var v=ga(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),va(v,a,l,0,t),ps(ca(c,l));break e}}o=c=ca(c,l),4!==Ll&&(Ll=2),null===Vl?Vl=[o]:Vl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Bs(o,fa(0,c,t));break e;case 1:l=c;var y=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Wl||!Wl.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Bs(o,pa(o,l,t));break e}}o=o.return}while(null!==o)}Sc(n)}catch(b){t=b,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function gc(){var e=kl.current;return kl.current=Xo,null===e?Xo:e}function vc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Al||0===(268435455&Fl)&&0===(268435455&jl)||lc(Al,Dl)}function yc(e,t){var n=Nl;Nl|=2;var r=gc();for(Al===e&&Dl===t||(Gl=null,pc(e,t));;)try{wc();break}catch(i){mc(e,i)}if(ks(),Nl=n,kl.current=r,null!==Rl)throw Error(s(261));return Al=null,Dl=0,Ll}function wc(){for(;null!==Rl;)_c(Rl)}function bc(){for(;null!==Rl&&!Je();)_c(Rl)}function _c(e){var t=Il(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?Sc(e):Rl=t,xl.current=null}function Sc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wa(n,t,Pl)))return void(Rl=n)}else{if(null!==(n=Qa(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Ll=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Ll&&(Ll=5)}function Ec(e,t,n){var r=wt,i=Cl.transition;try{Cl.transition=null,wt=1,function(e,t,n,r){do{Ic()}while(null!==Jl);if(0!==(6&Nl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Al&&(Rl=Al=null,Dl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Rc(tt,(function(){return Ic(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var a=wt;wt=1;var l=Nl;Nl|=4,xl.current=null,function(e,t){if(ei=Gt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(uc){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Xa=t;null!==Xa;)if(e=(t=Xa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xa=e;else for(;null!==Xa;){t=Xa;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(uc){kc(t,t.return,uc)}if(null!==(e=t.sibling)){e.return=t.return,Xa=e;break}Xa=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Ye(),Nl=l,wt=a,Cl.transition=o}else e.current=n;if(Ql&&(Ql=!1,Jl=e,Yl=i),o=e.pendingLanes,0===o&&(Wl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kl)throw Kl=!1,e=Hl,Hl=null,e;0!==(1&Yl)&&0!==e.tag&&Ic(),o=e.pendingLanes,0!==(1&o)?e===Xl?$l++:($l=0,Xl=e):$l=0,zi()}(e,t,n,r)}finally{Cl.transition=i,wt=r}return null}function Ic(){if(null!==Jl){var e=bt(Yl),t=Cl.transition,n=wt;try{if(Cl.transition=null,wt=16>e?16:e,null===Jl)var r=!1;else{if(e=Jl,Jl=null,Yl=0,0!==(6&Nl))throw Error(s(331));var i=Nl;for(Nl|=4,Xa=e.current;null!==Xa;){var o=Xa,a=o.child;if(0!==(16&Xa.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xa=u;null!==Xa;){var h=Xa;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Xa=d;else for(;null!==Xa;){var f=(h=Xa).sibling,p=h.return;if(sl(h),h===u){Xa=null;break}if(null!==f){f.return=p,Xa=f;break}Xa=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Xa=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Xa=a;else e:for(;null!==Xa;){if(0!==(2048&(o=Xa).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Xa=y;break e}Xa=o.return}}var w=e.current;for(Xa=w;null!==Xa;){var b=(a=Xa).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Xa=b;else e:for(a=w;null!==Xa;){if(0!==(2048&(l=Xa).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(S){kc(l,l.return,S)}if(l===a){Xa=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Xa=_;break e}Xa=l.return}}if(Nl=i,zi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{wt=n,Cl.transition=t}}return!1}function Tc(e,t,n){e=Us(e,t=fa(0,t=ca(n,t),1),1),t=tc(),null!==e&&(vt(e,1,t),ic(e,t))}function kc(e,t,n){if(3===e.tag)Tc(e,e,n);else for(;null!==t;){if(3===t.tag){Tc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Us(t,e=pa(t,e=ca(n,e),1),1),e=tc(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function xc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Dl&n)===n&&(4===Ll||3===Ll&&(130023424&Dl)===Dl&&500>$e()-zl?pc(e,0):Ul|=n),ic(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Os(e,t))&&(vt(e,t,n),ic(e,n))}function Nc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Cc(e,n)}function Rc(e,t){return We(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Dc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Oc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Fc(n.children,i,o,t);case I:a=8,i|=8;break;case T:return(e=Pc(12,n,t,2|i)).elementType=T,e.lanes=o,e;case N:return(e=Pc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Pc(19,n,t,i)).elementType=A,e.lanes=o,e;case P:return jc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case x:a=9;break e;case C:a=11;break e;case R:a=14;break e;case D:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Fc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function jc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function qc(e,t,n,r,i,s,o,a,l){return e=new zc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),e}function Gc(e){if(!e)return xi;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function Kc(e,t,n,r,i,s,o,a,l){return(e=qc(n,r,!0,e,0,s,0,a,l)).context=Gc(null),n=e.current,(s=js(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,i),e.current.lanes=i,vt(e,i,r),ic(e,r),e}function Hc(e,t,n,r){var i=t.current,s=tc(),o=nc(i);return n=Gc(n),null===t.context?t.context=n:t.pendingContext=n,(t=js(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Us(i,t,o))&&(rc(e,i,o,s),Vs(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Jc(e,t){Qc(e,t),(e=e.alternate)&&Qc(e,t)}Il=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Na(t),fs();break;case 5:$s(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:Js(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(Ss,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(ki(Zs,1&Zs.current),null!==(e=Ga(e,t,n))?e.sibling:null);ki(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return za(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,Ia(e,t,n)}return Ga(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,is&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qa(e,t),e=t.pendingProps;var i=Ri(t,Ci.current);Ns(t,n),i=go(null,t,r,e,i,n);var o=vo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ms(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=Ca(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),ba(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=na(r,e),i){case 0:t=ka(null,t,r,e,n);break e;case 1:t=xa(null,t,r,e,n);break e;case 11:t=_a(null,t,r,e,n);break e;case 14:t=Sa(null,t,r,na(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Fs(e,t),zs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Aa(e,t,r,n,i=ca(Error(s(423)),t));break e}if(r!==i){t=Aa(e,t,r,n,i=ca(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=_s(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ga(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return $s(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ta(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Fa(e,t,n);case 4:return Js(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bs(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_a(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,ki(Ss,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ni.current){t=Ga(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=js(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Cs(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Cs(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ba(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ns(t,n),r=r(i=As(i)),t.flags|=1,ba(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),Sa(e,t,r,i=na(r.type,i),n);case 15:return Ea(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),qa(e,t),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,Ns(t,n),oa(t,r,i),la(t,r,i,n),Ca(null,t,r,!0,e,n);case 19:return za(e,t,n);case 22:return Ia(e,t,n)}throw Error(s(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function eu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function tu(){}function nu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Wc(o);a.call(e)}}Hc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Wc(o);s.call(e)}}var o=Kc(t,r,e,0,null,!1,0,"",tu);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),dc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Wc(l);a.call(e)}}var l=qc(e,0,!1,null,0,!1,0,"",tu);return e._reactRootContainer=l,e[pi]=l.current,zr(8===e.nodeType?e.parentNode:e),dc((function(){Hc(t,l,n,r)})),l}(n,t,e,i,r);return Wc(o)}Xc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Hc(e,t,null,null)},Xc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Hc(null,e,null,null)})),t[pi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,$e()),0===(6&Nl)&&(ql=$e()+500,zi()))}break;case 13:dc((function(){var t=Os(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Jc(e,1)}},St=function(e){if(13===e.tag){var t=Os(e,134217728);if(null!==t)rc(t,e,134217728,tc());Jc(e,134217728)}},Et=function(e){if(13===e.tag){var t=nc(e),n=Os(e,t);if(null!==n)rc(n,e,t,tc());Jc(e,t)}},It=function(){return wt},Tt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Se=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));W(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=hc,Ne=dc;var ru={usingClientEntryPoint:!1,Events:[wi,bi,_i,ke,xe,hc]},iu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},su={bundleType:iu.bundleType,version:iu.version,rendererPackageName:iu.rendererPackageName,rendererConfig:iu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:iu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ou.isDisabled&&ou.supportsFiber)try{it=ou.inject(su),st=ou}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ru,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zc(e))throw Error(s(299));var n=!1,r="",i=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=qc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!eu(t))throw Error(s(200));return nu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Kc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!eu(t))throw Error(s(200));return nu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!eu(e))throw Error(s(40));return!!e._reactRootContainer&&(dc((function(){nu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=hc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!eu(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return nu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=w.prototype=new y;b.constructor=w,m(b,v.prototype),b.isPureReactComponent=!0;var _=Array.isArray,S=Object.prototype.hasOwnProperty,E={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,i)&&!I.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:E.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var x=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+C(l,0):s,_(o)?(i="",null!=e&&(i=e.replace(x,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(x,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",_(e))for(var c=0;c<e.length;c++){var u=s+C(a=e[c],c);l+=N(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=N(a=a.value,t,i,u=s+C(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},P={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:P,ReactCurrentOwner:E};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{e.exports=n(202)},579:(e,t,n)=>{e.exports=n(153)},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,P(S);else{var t=r(u);null!==t&&O(_,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,y(k),k=-1),p=!0;var s=f;try{for(b(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),b(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&O(_,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,I=!1,T=null,k=-1,x=5,C=-1;function N(){return!(t.unstable_now()-C<x)}function A(){if(null!==T){var e=t.unstable_now();C=e;var n=!0;try{n=T(!0,e)}finally{n?E():(I=!1,T=null)}}else I=!1}if("function"===typeof w)E=function(){w(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=A,E=function(){D.postMessage(null)}}else E=function(){v(A,0)};function P(e){T=e,I||(I=!0,E())}function O(e,n){k=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(y(k),k=-1):g=!0,O(_,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,P(S))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{e.exports=n(234)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/jejubus-guide/";var r={};n.r(r),n.d(r,{FirebaseError:()=>Ye,SDK_VERSION:()=>Ln,_DEFAULT_ENTRY_NAME:()=>wn,_addComponent:()=>In,_addOrOverwriteComponent:()=>Tn,_apps:()=>_n,_clearComponents:()=>Rn,_components:()=>En,_getProvider:()=>xn,_isFirebaseApp:()=>Nn,_isFirebaseServerApp:()=>An,_registerComponent:()=>kn,_removeServiceInstance:()=>Cn,_serverApps:()=>Sn,deleteApp:()=>Vn,getApp:()=>jn,getApps:()=>Un,initializeApp:()=>Mn,initializeServerApp:()=>Fn,onLog:()=>zn,registerVersion:()=>Bn,setLogLevel:()=>qn});var i,s=n(43),o=n.t(s,2),a=n(391),l=n(950),c=n.t(l,2);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(i||(i={}));const h="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function f(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function p(e,t){return{usr:e.state,key:e.key,idx:t}}function m(e,t,n,r){return void 0===n&&(n=null),u({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?v(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function g(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function v(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function y(e,t,n,r){void 0===r&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,l=i.Pop,c=null,f=v();function v(){return(a.state||{idx:null}).idx}function y(){l=i.Pop;let e=v(),t=null==e?null:e-f;f=e,c&&c({action:l,location:b.location,delta:t})}function w(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:g(e);return n=n.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==f&&(f=0,a.replaceState(u({},a.state,{idx:f}),""));let b={get action(){return l},get location(){return e(s,a)},listen(e){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(h,y),c=e,()=>{s.removeEventListener(h,y),c=null}},createHref:e=>t(s,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=i.Push;let r=m(b.location,e,t);n&&n(r,e),f=v()+1;let u=p(r,f),h=b.createHref(r);try{a.pushState(u,"",h)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;s.location.assign(h)}o&&c&&c({action:l,location:b.location,delta:1})},replace:function(e,t){l=i.Replace;let r=m(b.location,e,t);n&&n(r,e),f=v();let s=p(r,f),u=b.createHref(r);a.replaceState(s,"",u),o&&c&&c({action:l,location:b.location,delta:0})},go:e=>a.go(e)};return b}var w;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(w||(w={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,n){return void 0===n&&(n="/"),_(e,t,n,!1)}function _(e,t,n,r){let i=L(("string"===typeof t?v(t):t).pathname||"/",n);if(null==i)return null;let s=S(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=O(i);o=D(s[a],e,r)}return o}function S(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(d(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=V([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),S(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:R(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of E(e.path))i(e,t,r);else i(e,t)})),t}function E(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=E(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const I=/^:[\w-]+$/,T=3,k=2,x=1,C=10,N=-2,A=e=>"*"===e;function R(e,t){let n=e.split("/"),r=n.length;return n.some(A)&&(r+=N),t&&(r+=k),n.filter((e=>!A(e))).reduce(((e,t)=>e+(I.test(t)?T:""===t?x:C)),r)}function D(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:V([s,u.pathname]),pathnameBase:B(V([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=V([s,u.pathnameBase]))}return o}function P(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);f("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function O(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return f(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function L(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function M(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function F(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function j(e,t){let n=F(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function U(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=v(e):(i=u({},e),d(!i.pathname||!i.pathname.includes("?"),M("?","pathname","search",i)),d(!i.pathname||!i.pathname.includes("#"),M("#","pathname","hash",i)),d(!i.search||!i.search.includes("#"),M("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?v(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:z(r),hash:q(i)}}(i,s),c=a&&"/"!==a&&a.endsWith("/"),h=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!h||(l.pathname+="/"),l}const V=e=>e.join("/").replace(/\/\/+/g,"/"),B=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),z=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",q=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function G(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const K=["post","put","patch","delete"],H=(new Set(K),["get",...K]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}const Q=s.createContext(null);const J=s.createContext(null);const Y=s.createContext(null);const $=s.createContext(null);const X=s.createContext({outlet:null,matches:[],isDataRoute:!1});const Z=s.createContext(null);function ee(){return null!=s.useContext($)}function te(){return ee()||d(!1),s.useContext($).location}function ne(e){s.useContext(Y).static||s.useLayoutEffect(e)}function re(){let{isDataRoute:e}=s.useContext(X);return e?function(){let{router:e}=fe(he.UseNavigateStable),t=me(de.UseNavigateStable),n=s.useRef(!1);return ne((()=>{n.current=!0})),s.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,W({fromRouteId:t},i)))}),[e,t])}():function(){ee()||d(!1);let e=s.useContext(Q),{basename:t,future:n,navigator:r}=s.useContext(Y),{matches:i}=s.useContext(X),{pathname:o}=te(),a=JSON.stringify(j(i,n.v7_relativeSplatPath)),l=s.useRef(!1);return ne((()=>{l.current=!0})),s.useCallback((function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let s=U(n,JSON.parse(a),o,"path"===i.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:V([t,s.pathname])),(i.replace?r.replace:r.push)(s,i.state,i)}),[t,r,a,o,e])}()}function ie(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=s.useContext(Y),{matches:i}=s.useContext(X),{pathname:o}=te(),a=JSON.stringify(j(i,r.v7_relativeSplatPath));return s.useMemo((()=>U(e,JSON.parse(a),o,"path"===n)),[e,a,o,n])}function se(e,t,n,r){ee()||d(!1);let{navigator:o}=s.useContext(Y),{matches:a}=s.useContext(X),l=a[a.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=te();if(t){var p;let e="string"===typeof t?v(t):t;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||d(!1),h=e}else h=f;let m=h.pathname||"/",g=m;if("/"!==u){let e=u.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=b(e,{pathname:g});let w=ue(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:V([u,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:V([u,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,n,r);return t&&w?s.createElement($.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:i.Pop}},w):w}function oe(){let e=function(){var e;let t=s.useContext(Z),n=pe(de.UseRouteError),r=me(de.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=G(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),n?s.createElement("pre",{style:i},n):null,null)}const ae=s.createElement(oe,null);class le extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement(X.Provider,{value:this.props.routeContext},s.createElement(Z.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ce(e){let{routeContext:t,match:n,children:r}=e,i=s.useContext(Q);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement(X.Provider,{value:t},r)}function ue(e,t,n,r){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}let a=e,l=null==(i=n)?void 0:i.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||d(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let s=0;s<a.length;s++){let e=a[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=s),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight(((e,r,i)=>{let o,h=!1,d=null,f=null;var p;n&&(o=l&&r.route.id?l[r.route.id]:void 0,d=r.route.errorElement||ae,c&&(u<0&&0===i?(p="route-fallback",!1||ge[p]||(ge[p]=!0),h=!0,f=null):u===i&&(h=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,i+1)),g=()=>{let t;return t=o?d:h?f:r.route.Component?s.createElement(r.route.Component,null):r.route.element?r.route.element:e,s.createElement(ce,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?s.createElement(le,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var he=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(he||{}),de=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(de||{});function fe(e){let t=s.useContext(Q);return t||d(!1),t}function pe(e){let t=s.useContext(J);return t||d(!1),t}function me(e){let t=function(e){let t=s.useContext(X);return t||d(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||d(!1),n.route.id}const ge={};o.startTransition;function ve(e){d(!1)}function ye(e){let{basename:t="/",children:n=null,location:r,navigationType:o=i.Pop,navigator:a,static:l=!1,future:c}=e;ee()&&d(!1);let u=t.replace(/^\/*/,"/"),h=s.useMemo((()=>({basename:u,navigator:a,static:l,future:W({v7_relativeSplatPath:!1},c)})),[u,c,a,l]);"string"===typeof r&&(r=v(r));let{pathname:f="/",search:p="",hash:m="",state:g=null,key:y="default"}=r,w=s.useMemo((()=>{let e=L(f,u);return null==e?null:{location:{pathname:e,search:p,hash:m,state:g,key:y},navigationType:o}}),[u,f,p,m,g,y,o]);return null==w?null:s.createElement(Y.Provider,{value:h},s.createElement($.Provider,{children:n,value:w}))}function we(e){let{children:t,location:n}=e;return se(be(t),n)}new Promise((()=>{}));s.Component;function be(e,t){void 0===t&&(t=[]);let n=[];return s.Children.forEach(e,((e,r)=>{if(!s.isValidElement(e))return;let i=[...t,r];if(e.type===s.Fragment)return void n.push.apply(n,be(e.props.children,i));e.type!==ve&&d(!1),e.props.index&&e.props.children&&d(!1);let o={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=be(e.props.children,i)),n.push(o)})),n}function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_e.apply(this,arguments)}function Se(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ee=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(jA){}new Map;const Ie=o.startTransition;c.flushSync,o.useId;function Te(e){let{basename:t,children:n,future:r,window:i}=e,o=s.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:i,v5Compat:!0})&&(a={}),y((function(e,t){let{pathname:n="/",search:r="",hash:i=""}=v(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),m("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:g(t))}),(function(e,t){f("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),a)));let l=o.current,[c,u]=s.useState({action:l.action,location:l.location}),{v7_startTransition:h}=r||{},d=s.useCallback((e=>{h&&Ie?Ie((()=>u(e))):u(e)}),[u,h]);return s.useLayoutEffect((()=>l.listen(d)),[l,d]),s.createElement(ye,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}const ke="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,xe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ce=s.forwardRef((function(e,t){let n,{onClick:r,relative:i,reloadDocument:o,replace:a,state:l,target:c,to:u,preventScrollReset:h,unstable_viewTransition:f}=e,p=Se(e,Ee),{basename:m}=s.useContext(Y),v=!1;if("string"===typeof u&&xe.test(u)&&(n=u,ke))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=L(t.pathname,m);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:v=!0}catch(jA){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;ee()||d(!1);let{basename:r,navigator:i}=s.useContext(Y),{hash:o,pathname:a,search:l}=ie(e,{relative:n}),c=a;return"/"!==r&&(c="/"===a?r:V([r,a])),i.createHref({pathname:c,search:l,hash:o})}(u,{relative:i}),w=function(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:a,unstable_viewTransition:l}=void 0===t?{}:t,c=re(),u=te(),h=ie(e,{relative:a});return s.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:g(u)===g(h);c(e,{replace:n,state:i,preventScrollReset:o,relative:a,unstable_viewTransition:l})}}),[u,c,h,r,i,n,e,o,a,l])}(u,{replace:a,state:l,target:c,preventScrollReset:h,relative:i,unstable_viewTransition:f});return s.createElement("a",_e({},p,{href:n||y,onClick:v||o?r:function(e){r&&r(e),e.defaultPrevented||w(e)},ref:t,target:c}))}));var Ne,Ae;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ne||(Ne={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ae||(Ae={}));const Re=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},De={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Re(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Pe;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Pe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Oe=function(e){return function(e){const t=Re(e);return De.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Le=function(e){try{return De.decodeString(e,!0)}catch(jA){console.error("base64Decode failed: ",jA)}return null};function Me(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Me(e[n],t[n]));return e}const Fe=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,je=()=>{try{return Fe()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/jejubus-guide",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAJ8GrRz659ejvVbqQ4npHTAVgPNzpVqV8",REACT_APP_FIREBASE_AUTH_DOMAIN:"jejubus-927cf.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"jejubus-927cf",REACT_APP_FIREBASE_STORAGE_BUCKET:"jejubus-927cf.appspot.com",REACT_APP_FIREBASE_MESSAGING_SENDERID:"721392735009",REACT_APP_FIREBASE_APP_ID:"1:721392735009:web:826cd21f60e57a3f226460",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-DZY2F0PY19",REACT_APP_GOOGLE_API_KEY:"AIzaSyD2O5f3i3-FGjddQaPrS_vNQiUdrpzUnbc"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(jA){return}const t=e&&Le(e[1]);return t&&JSON.parse(t)})()}catch(jA){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(jA))}},Ue=e=>{var t,n;return null===(n=null===(t=je())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Ve=()=>{var e;return null===(e=je())||void 0===e?void 0:e.config},Be=e=>{var t;return null===(t=je())||void 0===t?void 0:t["_".concat(e)]};class ze{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function qe(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ge(){return"undefined"!==typeof window||Ke()}function Ke(){return"undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope}function He(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function We(){return!function(){var e;const t=null===(e=je())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(jA){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qe(){try{return"object"===typeof indexedDB}catch(jA){return!1}}function Je(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}class Ye extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$e.prototype.create)}}class $e{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Xe,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Ye(n,s,t)}}const Xe=/\{\$([^}]+)}/g;function Ze(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function et(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(tt(n)&&tt(s)){if(!et(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function tt(e){return null!==e&&"object"===typeof e}function nt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function rt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function it(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function st(e,t){const n=new ot(e,t);return n.subscribe.bind(n)}class ot{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=at),void 0===r.error&&(r.error=at),void 0===r.complete&&(r.complete=at);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(jA){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(jA){"undefined"!==typeof console&&console.error&&console.error(jA)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function at(){}const lt=1e3,ct=2,ut=144e5,ht=.5;function dt(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ct;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:lt)*Math.pow(t,e),r=Math.round(ht*n*(Math.random()-.5)*2);return Math.min(ut,n+r)}function ft(e){return e&&e._delegate?e._delegate:e}class pt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const mt="[DEFAULT]";class gt{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new ze;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(jA){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(jA){if(r)return null;throw jA}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:mt})}catch(jA){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(jA){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===mt?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt;return this.component?this.component.multipleInstances?e:mt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class vt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new gt(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const yt=[];var wt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(wt||(wt={}));const bt={debug:wt.DEBUG,verbose:wt.VERBOSE,info:wt.INFO,warn:wt.WARN,error:wt.ERROR,silent:wt.SILENT},_t=wt.INFO,St={[wt.DEBUG]:"log",[wt.VERBOSE]:"log",[wt.INFO]:"info",[wt.WARN]:"warn",[wt.ERROR]:"error"},Et=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=St[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class It{constructor(e){this.name=e,this._logLevel=_t,this._logHandler=Et,this._userLogHandler=null,yt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in wt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?bt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,wt.DEBUG,...t),this._logHandler(this,wt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,wt.VERBOSE,...t),this._logHandler(this,wt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,wt.INFO,...t),this._logHandler(this,wt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,wt.WARN,...t),this._logHandler(this,wt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,wt.ERROR,...t),this._logHandler(this,wt.ERROR,...t)}}const Tt=(e,t)=>t.some((t=>e instanceof t));let kt,xt;const Ct=new WeakMap,Nt=new WeakMap,At=new WeakMap,Rt=new WeakMap,Dt=new WeakMap;let Pt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Nt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||At.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ot(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(xt||(xt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ft(this),n),Mt(Ct.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Mt(e.apply(Ft(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Ft(this),t,...r);return At.set(s,t.sort?t.sort():[t]),Mt(s)}}function Lt(e){return"function"===typeof e?Ot(e):(e instanceof IDBTransaction&&function(e){if(Nt.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Nt.set(e,t)}(e),Tt(e,kt||(kt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Pt):e)}function Mt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Mt(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Ct.set(t,e)})).catch((()=>{})),Dt.set(t,e),t}(e);if(Rt.has(e))return Rt.get(e);const t=Lt(e);return t!==e&&(Rt.set(e,t),Dt.set(t,e)),t}const Ft=e=>Dt.get(e);function jt(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Mt(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Mt(o.result),e.oldVersion,e.newVersion,Mt(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}const Ut=["get","getKey","getAll","getAllKeys","count"],Vt=["put","add","delete","clear"],Bt=new Map;function zt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Bt.get(t))return Bt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Vt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Ut.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Bt.set(t,s),s}Pt=(e=>({...e,get:(t,n,r)=>zt(t,n)||e.get(t,n,r),has:(t,n)=>!!zt(t,n)||e.has(t,n)}))(Pt);class qt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Gt="@firebase/app",Kt="0.10.6",Ht=new It("@firebase/app"),Wt="@firebase/app-compat",Qt="@firebase/analytics-compat",Jt="@firebase/analytics",Yt="@firebase/app-check-compat",$t="@firebase/app-check",Xt="@firebase/auth",Zt="@firebase/auth-compat",en="@firebase/database",tn="@firebase/database-compat",nn="@firebase/functions",rn="@firebase/functions-compat",sn="@firebase/installations",on="@firebase/installations-compat",an="@firebase/messaging",ln="@firebase/messaging-compat",cn="@firebase/performance",un="@firebase/performance-compat",hn="@firebase/remote-config",dn="@firebase/remote-config-compat",fn="@firebase/storage",pn="@firebase/storage-compat",mn="@firebase/firestore",gn="@firebase/vertexai-preview",vn="@firebase/firestore-compat",yn="firebase",wn="[DEFAULT]",bn={[Gt]:"fire-core",[Wt]:"fire-core-compat",[Jt]:"fire-analytics",[Qt]:"fire-analytics-compat",[$t]:"fire-app-check",[Yt]:"fire-app-check-compat",[Xt]:"fire-auth",[Zt]:"fire-auth-compat",[en]:"fire-rtdb",[tn]:"fire-rtdb-compat",[nn]:"fire-fn",[rn]:"fire-fn-compat",[sn]:"fire-iid",[on]:"fire-iid-compat",[an]:"fire-fcm",[ln]:"fire-fcm-compat",[cn]:"fire-perf",[un]:"fire-perf-compat",[hn]:"fire-rc",[dn]:"fire-rc-compat",[fn]:"fire-gcs",[pn]:"fire-gcs-compat",[mn]:"fire-fst",[vn]:"fire-fst-compat",[gn]:"fire-vertex","fire-js":"fire-js",[yn]:"fire-js-all"},_n=new Map,Sn=new Map,En=new Map;function In(e,t){try{e.container.addComponent(t)}catch(jA){Ht.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),jA)}}function Tn(e,t){e.container.addOrOverwriteComponent(t)}function kn(e){const t=e.name;if(En.has(t))return Ht.debug("There were multiple attempts to register component ".concat(t,".")),!1;En.set(t,e);for(const n of _n.values())In(n,e);for(const n of Sn.values())In(n,e);return!0}function xn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Cn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wn;xn(e,t).clearInstance(n)}function Nn(e){return void 0!==e.options}function An(e){return void 0!==e.settings}function Rn(){En.clear()}const Dn=new $e("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Pn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new pt("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dn.create("app-deleted",{appName:this._name})}}class On extends Pn{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,s,r);else{super(e.options,s,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=null,"undefined"!==typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()}))),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Bn(Gt,Kt,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Vn(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Dn.create("server-app-deleted")}}const Ln="10.12.3";function Mn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:wn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Dn.create("bad-app-name",{appName:String(i)});if(n||(n=Ve()),!n)throw Dn.create("no-options");const s=_n.get(i);if(s){if(et(n,s.options)&&et(r,s.config))return s;throw Dn.create("duplicate-app",{appName:i})}const o=new vt(i);for(const l of En.values())o.addComponent(l);const a=new Pn(n,r,o);return _n.set(i,a),a}function Fn(e,t){if(Ge()&&!Ke())throw Dn.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=Nn(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw Dn.create("finalization-registry-not-supported",{});const i=""+(s=JSON.stringify(r),[...s].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0));var s;const o=Sn.get(i);if(o)return o.incRefCount(t.releaseOnDeref),o;const a=new vt(i);for(const c of En.values())a.addComponent(c);const l=new On(n,t,i,a);return Sn.set(i,l),l}function jn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wn;const t=_n.get(e);if(!t&&e===wn&&Ve())return Mn();if(!t)throw Dn.create("no-app",{appName:e});return t}function Un(){return Array.from(_n.values())}async function Vn(e){let t=!1;const n=e.name;if(_n.has(n))t=!0,_n.delete(n);else if(Sn.has(n)){e.decRefCount()<=0&&(Sn.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Bn(e,t,n){var r;let i=null!==(r=bn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ht.warn(e.join(" "))}kn(new pt("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function zn(e,t){if(null!==e&&"function"!==typeof e)throw Dn.create("invalid-log-argument");!function(e,t){for(const n of yt){let r=null;t&&t.level&&(r=bt[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:wt[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function qn(e){var t;t=e,yt.forEach((e=>{e.setLogLevel(t)}))}const Gn="firebase-heartbeat-database",Kn=1,Hn="firebase-heartbeat-store";let Wn=null;function Qn(){return Wn||(Wn=jt(Gn,Kn,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Hn)}catch(jA){console.warn(jA)}}}).catch((e=>{throw Dn.create("idb-open",{originalErrorMessage:e.message})}))),Wn}async function Jn(e,t){try{const n=(await Qn()).transaction(Hn,"readwrite"),r=n.objectStore(Hn);await r.put(t,Yn(e)),await n.done}catch(jA){if(jA instanceof Ye)Ht.warn(jA.message);else{const t=Dn.create("idb-set",{originalErrorMessage:null===jA||void 0===jA?void 0:jA.message});Ht.warn(t.message)}}}function Yn(e){return"".concat(e.name,"!").concat(e.options.appId)}class $n{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Zn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Xn();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Xn(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),er(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),er(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Oe(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Xn(){return(new Date).toISOString().substring(0,10)}class Zn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Qe()&&Je().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Qn()).transaction(Hn),n=await t.objectStore(Hn).get(Yn(e));return await t.done,n}catch(jA){if(jA instanceof Ye)Ht.warn(jA.message);else{const t=Dn.create("idb-get",{originalErrorMessage:null===jA||void 0===jA?void 0:jA.message});Ht.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Jn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Jn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function er(e){return Oe(JSON.stringify({version:2,heartbeats:e})).length}var tr;tr="",kn(new pt("platform-logger",(e=>new qt(e)),"PRIVATE")),kn(new pt("heartbeat",(e=>new $n(e)),"PRIVATE")),Bn(Gt,Kt,tr),Bn(Gt,Kt,"esm2017"),Bn("fire-js","");Bn("firebase","10.12.3","app");const nr="@firebase/installations",rr="0.6.8",ir=1e4,sr="w:".concat(rr),or="FIS_v2",ar="https://firebaseinstallations.googleapis.com/v1",lr=36e5,cr=new $e("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ur(e){return e instanceof Ye&&e.code.includes("request-failed")}function hr(e){let{projectId:t}=e;return"".concat(ar,"/projects/").concat(t,"/installations")}function dr(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function fr(e,t){const n=(await t.json()).error;return cr.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function pr(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function mr(e,t){let{refreshToken:n}=t;const r=pr(e);return r.append("Authorization",function(e){return"".concat(or," ").concat(e)}(n)),r}async function gr(e){const t=await e();return t.status>=500&&t.status<600?e():t}function vr(e){return new Promise((t=>{setTimeout(t,e)}))}const yr=/^[cdef][\w-]{21}$/,wr="";function br(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return yr.test(t)?t:wr}catch(e){return wr}}function _r(e){return"".concat(e.appName,"!").concat(e.appId)}const Sr=new Map;function Er(e,t){const n=_r(e);Ir(n,t),function(e,t){const n=kr();n&&n.postMessage({key:e,fid:t});xr()}(n,t)}function Ir(e,t){const n=Sr.get(e);if(n)for(const r of n)r(t)}let Tr=null;function kr(){return!Tr&&"BroadcastChannel"in self&&(Tr=new BroadcastChannel("[Firebase] FID Change"),Tr.onmessage=e=>{Ir(e.data.key,e.data.fid)}),Tr}function xr(){0===Sr.size&&Tr&&(Tr.close(),Tr=null)}const Cr="firebase-installations-database",Nr=1,Ar="firebase-installations-store";let Rr=null;function Dr(){return Rr||(Rr=jt(Cr,Nr,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Ar)}})),Rr}async function Pr(e,t){const n=_r(e),r=(await Dr()).transaction(Ar,"readwrite"),i=r.objectStore(Ar),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||Er(e,t.fid),t}async function Or(e){const t=_r(e),n=(await Dr()).transaction(Ar,"readwrite");await n.objectStore(Ar).delete(t),await n.done}async function Lr(e,t){const n=_r(e),r=(await Dr()).transaction(Ar,"readwrite"),i=r.objectStore(Ar),s=await i.get(n),o=t(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.done,!o||s&&s.fid===o.fid||Er(e,o.fid),o}async function Mr(e){let t;const n=await Lr(e.appConfig,(n=>{const r=function(e){const t=e||{fid:br(),registrationStatus:0};return Ur(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(cr.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const s=hr(n),o=pr(n),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const l={fid:i,authVersion:or,appId:n.appId,sdkVersion:sr},c={method:"POST",headers:o,body:JSON.stringify(l)},u=await gr((()=>fetch(s,c)));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:dr(e.authToken)}}throw await fr("Create Installation",u)}(e,t);return Pr(e.appConfig,n)}catch(jA){throw ur(jA)&&409===jA.customData.serverCode?await Or(e.appConfig):await Pr(e.appConfig,{fid:t.fid,registrationStatus:0}),jA}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Fr(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return n.fid===wr?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Fr(e){let t=await jr(e.appConfig);for(;1===t.registrationStatus;)await vr(100),t=await jr(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Mr(e);return n||t}return t}function jr(e){return Lr(e,(e=>{if(!e)throw cr.create("installation-not-found");return Ur(e)}))}function Ur(e){return 1===(t=e).registrationStatus&&t.registrationTime+ir<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Vr(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return"".concat(hr(e),"/").concat(n,"/authTokens:generate")}(n,t),s=mr(n,t),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const a={installation:{sdkVersion:sr,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await gr((()=>fetch(i,l)));if(c.ok){return dr(await c.json())}throw await fr("Generate Auth Token",c)}async function Br(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await Lr(e.appConfig,(r=>{if(!qr(r))throw cr.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+lr}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await zr(e.appConfig);for(;1===n.authToken.requestStatus;)await vr(100),n=await zr(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Br(e,t):r}(e,n),r;{if(!navigator.onLine)throw cr.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await Vr(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await Pr(e.appConfig,r),n}catch(jA){if(!ur(jA)||401!==jA.customData.serverCode&&404!==jA.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Pr(e.appConfig,n)}else await Or(e.appConfig);throw jA}}(e,n),n}}));return t?await t:r.authToken}function zr(e){return Lr(e,(e=>{if(!qr(e))throw cr.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+ir<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function qr(e){return void 0!==e&&2===e.registrationStatus}async function Gr(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await Mr(e);t&&await t}(n);return(await Br(n,t)).token}function Kr(e){return cr.create("missing-app-config-values",{valueName:e})}const Hr="installations",Wr=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Kr("App Configuration");if(!e.name)throw Kr("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Kr(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:xn(t,"heartbeat"),_delete:()=>Promise.resolve()}},Qr=e=>{const t=xn(e.getProvider("app").getImmediate(),Hr).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await Mr(t);return r?r.catch(console.error):Br(t).catch(console.error),n.fid}(t),getToken:e=>Gr(t,e)}};kn(new pt(Hr,Wr,"PUBLIC")),kn(new pt("installations-internal",Qr,"PRIVATE")),Bn(nr,rr),Bn(nr,rr,"esm2017");const Jr="analytics",Yr="firebase_id",$r="origin",Xr=6e4,Zr="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ei="https://www.googletagmanager.com/gtag/js",ti=new It("@firebase/analytics"),ni=new $e("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function ri(e){if(!e.startsWith(ei)){const t=ni.create("invalid-gtag-resource",{gtagURL:e});return ti.warn(t.message),""}return e}function ii(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function si(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:ri}),r=document.createElement("script"),i="".concat(ei,"?l=").concat(e,"&id=").concat(t);r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function oi(e,t,n,r){return async function(i){try{for(var s=arguments.length,o=new Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];if("event"===i){const[r,i]=o;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await ii(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(jA){ti.error(jA)}}(e,t,n,r,i)}else if("config"===i){const[i,s]=o;await async function(e,t,n,r,i,s){const o=r[i];try{if(o)await t[o];else{const e=(await ii(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(jA){ti.error(jA)}e("config",i,s)}(e,t,n,r,i,s)}else if("consent"===i){const[t,n]=o;e("consent",t,n)}else if("get"===i){const[t,n,r]=o;e("get",t,n,r)}else if("set"===i){const[t]=o;e("set",t)}else e(i,...o)}catch(jA){ti.error(jA)}}}const ai=30;const li=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function ci(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function ui(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:li,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw ni.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw ni.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new di;return setTimeout((async()=>{a.abort()}),void 0!==n?n:Xr),hi({appId:r,apiKey:i,measurementId:s},o,a,t)}async function hi(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:li;var o;const{appId:a,measurementId:l}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(ni.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(n,r)}catch(jA){if(l)return ti.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===jA||void 0===jA?void 0:jA.message,"]")),{appId:a,measurementId:l};throw jA}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:ci(r)},s=Zr.replace("{app-id}",n),o=await fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw ni.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return s.deleteThrottleMetadata(a),t}catch(jA){const r=jA;if(!function(e){if(!(e instanceof Ye)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(r)){if(s.deleteThrottleMetadata(a),l)return ti.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===r||void 0===r?void 0:r.message,"]")),{appId:a,measurementId:l};throw jA}const c=503===Number(null===(o=null===r||void 0===r?void 0:r.customData)||void 0===o?void 0:o.httpStatus)?dt(i,s.intervalMillis,ai):dt(i,s.intervalMillis),u={throttleEndTimeMillis:Date.now()+c,backoffCount:i+1};return s.setThrottleMetadata(a,u),ti.debug("Calling attemptFetch again in ".concat(c," millis")),hi(e,u,n,s)}}class di{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let fi,pi;function mi(e){pi=e}function gi(e){fi=e}async function vi(e,t,n,r,i,s,o){var a;const l=ui(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&ti.warn("The measurement ID in the local Firebase config (".concat(e.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(t.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((e=>ti.error(e))),t.push(l);const c=async function(){if(!Qe())return ti.warn(ni.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await Je()}catch(jA){return ti.warn(ni.create("indexeddb-unavailable",{errorInfo:null===jA||void 0===jA?void 0:jA.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[u,h]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(ei)&&n.src.includes(e))return n;return null})(s)||si(s,u.measurementId),pi&&(i("consent","default",pi),mi(void 0)),i("js",new Date);const d=null!==(a=null===o||void 0===o?void 0:o.config)&&void 0!==a?a:{};return d[$r]="firebase",d.update=!0,null!=h&&(d[Yr]=h),i("config",u.measurementId,d),fi&&(i("set",fi),gi(void 0)),u.measurementId}class yi{constructor(e){this.app=e}_delete(){return delete wi[this.app.options.appId],Promise.resolve()}}let wi={},bi=[];const _i={};let Si,Ei,Ii="dataLayer",Ti="gtag",ki=!1;function xi(){const e=[];if(He()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>"(".concat(t+1,") ").concat(e))).join(" "),n=ni.create("invalid-analytics-context",{errorInfo:t});ti.warn(n.message)}}function Ci(e,t,n){xi();const r=e.options.appId;if(!r)throw ni.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw ni.create("no-api-key");ti.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=wi[r])throw ni.create("already-exists",{id:r});if(!ki){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Ii);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(s=window[i]),window[i]=oi(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(wi,bi,_i,Ii,Ti);Ei=e,Si=t,ki=!0}wi[r]=vi(e,bi,_i,t,Si,Ii,n);return new yi(e)}function Ni(e,t,n,r){e=ft(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(Ei,wi[e.app.options.appId],t,n,r).catch((e=>ti.error(e)))}const Ai="@firebase/analytics",Ri="0.10.5";kn(new pt(Jr,((e,t)=>{let{options:n}=t;return Ci(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),kn(new pt("analytics-internal",(function(e){try{const t=e.getProvider(Jr).getImmediate();return{logEvent:(e,n,r)=>Ni(t,e,n,r)}}catch(jA){throw ni.create("interop-component-reg-failed",{reason:jA})}}),"PRIVATE")),Bn(Ai,Ri),Bn(Ai,Ri,"esm2017");function Di(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Pi(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Oi=Pi,Li=new $e("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Mi=new It("@firebase/auth");function Fi(e){if(Mi.logLevel<=wt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Mi.error("Auth (".concat(Ln,"): ").concat(e),...n)}}function ji(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw qi(e,...n)}function Ui(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return qi(e,...n)}function Vi(e,t,n){const r=Object.assign(Object.assign({},Oi()),{[t]:n});return new $e("auth","Firebase",r).create(t,{appName:e.name})}function Bi(e){return Vi(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zi(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&ji(e,"argument-error"),Vi(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function qi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Li.create(e,...n)}function Gi(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw qi(t,...r)}}function Ki(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Fi(t),new Error(t)}function Hi(e,t){e||Ki(t)}function Wi(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Qi(){return"http:"===Ji()||"https:"===Ji()}function Ji(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Yi{constructor(e,t){this.shortDelay=e,this.longDelay=t,Hi(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Qi()||He()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function $i(e,t){Hi(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Xi{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Zi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},es=new Yi(3e4,6e4);function ts(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function ns(e,t,n,r){return rs(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=nt(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Xi.fetch()(ss(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function rs(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Zi),t);try{const t=new as(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw ls(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ls(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw ls(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw ls(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Vi(e,a,o);ji(e,a)}}catch(jA){if(jA instanceof Ye)throw jA;ji(e,"network-request-failed",{message:String(jA)})}}async function is(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await ns(e,t,n,r,i);return"mfaPendingCredential"in s&&ji(e,"multi-factor-auth-required",{_serverResponse:s}),s}function ss(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?$i(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function os(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class as{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Ui(this.auth,"network-request-failed"))),es.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function ls(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ui(e,t,r);return i.customData._tokenResponse=n,i}function cs(e){return void 0!==e&&void 0!==e.enterprise}class us{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return os(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function hs(e,t){return ns(e,"GET","/v2/recaptchaConfig",ts(e,t))}async function ds(e,t){return ns(e,"POST","/v1/accounts:lookup",t)}function fs(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(jA){}}function ps(e){return 1e3*Number(e)}function ms(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Fi("JWT malformed, contained fewer than 3 sections"),null;try{const e=Le(n);return e?JSON.parse(e):(Fi("Failed to decode base64 JWT payload"),null)}catch(jA){return Fi("Caught error parsing JWT payload as JSON",null===jA||void 0===jA?void 0:jA.toString()),null}}function gs(e){const t=ms(e);return Gi(t,"internal-error"),Gi("undefined"!==typeof t.exp,"internal-error"),Gi("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function vs(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(jA){throw jA instanceof Ye&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(jA)&&e.auth.currentUser===e&&await e.auth.signOut(),jA}}class ys{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(jA){return void((null===jA||void 0===jA?void 0:jA.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class ws{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fs(this.lastLoginAt),this.creationTime=fs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function bs(e){var t;const n=e.auth,r=await e.getIdToken(),i=await vs(e,ds(n,{idToken:r}));Gi(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?_s(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ws(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function _s(e){return e.map((e=>{var{providerId:t}=e,n=Di(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Ss{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Gi(e.idToken,"internal-error"),Gi("undefined"!==typeof e.idToken,"internal-error"),Gi("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):gs(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Gi(0!==e.length,"internal-error");const t=gs(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Gi(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await rs(e,{},(async()=>{const n=nt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=ss(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Xi.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Ss;return n&&(Gi("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Gi("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Gi("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ss,this.toJSON())}_performRefresh(){return Ki("not implemented")}}function Es(e,t){Gi("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Is{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Di(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ys(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ws(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await vs(this,this.stsTokenManager.getToken(this.auth,e));return Gi(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=ft(e),r=await n.getIdToken(t),i=ms(r);Gi(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:fs(ps(i.auth_time)),issuedAtTime:fs(ps(i.iat)),expirationTime:fs(ps(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=ft(e);await bs(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Gi(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Is(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Gi(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await bs(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(An(this.auth.app))return Promise.reject(Bi(this.auth));const e=await this.getIdToken();return await vs(this,async function(e,t){return ns(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:S}=t;Gi(y&&S,e,"internal-error");const E=Ss.fromJSON(this.name,S);Gi("string"===typeof y,e,"internal-error"),Es(u,e.name),Es(h,e.name),Gi("boolean"===typeof w,e,"internal-error"),Gi("boolean"===typeof b,e,"internal-error"),Es(d,e.name),Es(f,e.name),Es(p,e.name),Es(m,e.name),Es(g,e.name),Es(v,e.name);const I=new Is({uid:y,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:v});return _&&Array.isArray(_)&&(I.providerData=_.map((e=>Object.assign({},e)))),m&&(I._redirectEventId=m),I}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Ss;r.updateFromServerResponse(t);const i=new Is({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await bs(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Gi(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?_s(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new Ss;o.updateFromIdToken(n);const a=new Is({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new ws(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const Ts=new Map;function ks(e){Hi(e instanceof Function,"Expected a class definition");let t=Ts.get(e);return t?(Hi(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ts.set(e,t),t)}class xs{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}xs.type="NONE";const Cs=xs;function Ns(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class As{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Ns(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ns("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Is._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new As(ks(Cs),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||ks(Cs);const s=Ns(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=Is._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new As(i,e,n)):new As(i,e,n)}}function Rs(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ls(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ds(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Fs(t))return"Blackberry";if(js(t))return"Webos";if(Ps(t))return"Safari";if((t.includes("chrome/")||Os(t))&&!t.includes("edge/"))return"Chrome";if(Ms(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Ds(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe();return/firefox\//i.test(e)}function Ps(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Os(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe();return/crios\//i.test(e)}function Ls(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe();return/iemobile/i.test(e)}function Ms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe();return/android/i.test(e)}function Fs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe();return/blackberry/i.test(e)}function js(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe();return/webos/i.test(e)}function Us(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Vs(){return function(){const e=qe();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Bs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe();return Us(e)||Ms(e)||js(e)||Fs(e)||/windows phone/i.test(e)||Ls(e)}function zs(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Rs(qe());break;case"Worker":t="".concat(Rs(qe()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ln,"/").concat(r)}class qs{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(jA){r(jA)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(jA){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===jA||void 0===jA?void 0:jA.message})}}}class Gs{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Ks{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ws(this),this.idTokenSubscription=new Ws(this),this.beforeStateQueue=new qs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Li,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ks(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await As.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(jA){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await ds(this,{idToken:e}),n=await Is._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(An(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(jA){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(jA)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Gi(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(jA){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await bs(e)}catch(jA){if((null===jA||void 0===jA?void 0:jA.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(An(this.app))return Promise.reject(Bi(this));const t=e?ft(e):null;return t&&Gi(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Gi(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return An(this.app)?Promise.reject(Bi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return An(this.app)?Promise.reject(Bi(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(ks(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return ns(e,"GET","/v2/passwordPolicy",ts(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Gs(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $e("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return ns(e,"POST","/v2/accounts:revokeToken",ts(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ks(e)||this._popupRedirectResolver;Gi(t,this,"argument-error"),this.redirectPersistenceManager=await As.create(this,[ks(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Gi(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Gi(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Mi.logLevel<=wt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Mi.warn("Auth (".concat(Ln,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Hs(e){return ft(e)}class Ws{constructor(e){this.auth=e,this.observer=null,this.addObserver=st((e=>this.observer=e))}get next(){return Gi(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Qs={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Js(e){return Qs.loadJS(e)}function Ys(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class $s{constructor(e){this.type="recaptcha-enterprise",this.auth=Hs(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;cs(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{hs(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new us(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&cs(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Qs.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Js(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Xs(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new $s(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Zs(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Xs(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Xs(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function eo(e,t,n){const r=Hs(e);Gi(r._canInitEmulator,r,"emulator-config-failed"),Gi(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=to(t),{host:o,port:a}=function(e){const t=to(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:no(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:no(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function to(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function no(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ro{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ki("not implemented")}_getIdTokenResponse(e){return Ki("not implemented")}_linkToIdToken(e,t){return Ki("not implemented")}_getReauthenticationResolver(e){return Ki("not implemented")}}async function io(e,t){return ns(e,"POST","/v1/accounts:signUp",t)}async function so(e,t){return is(e,"POST","/v1/accounts:signInWithPassword",ts(e,t))}async function oo(e,t){return ns(e,"POST","/v1/accounts:sendOobCode",ts(e,t))}async function ao(e,t){return oo(e,t)}class lo extends ro{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new lo(e,t,"password")}static _fromEmailAndCode(e,t){return new lo(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Zs(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",so);case"emailLink":return async function(e,t){return is(e,"POST","/v1/accounts:signInWithEmailLink",ts(e,t))}(e,{email:this._email,oobCode:this._password});default:ji(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Zs(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",io);case"emailLink":return async function(e,t){return is(e,"POST","/v1/accounts:signInWithEmailLink",ts(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:ji(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function co(e,t){return is(e,"POST","/v1/accounts:signInWithIdp",ts(e,t))}class uo extends ro{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ji("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Di(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new uo(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return co(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,co(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,co(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=nt(t)}return e}}const ho={USER_NOT_FOUND:"user-not-found"};class fo extends ro{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new fo({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new fo({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return is(e,"POST","/v1/accounts:signInWithPhoneNumber",ts(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await is(e,"POST","/v1/accounts:signInWithPhoneNumber",ts(e,t));if(n.temporaryProof)throw ls(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return is(e,"POST","/v1/accounts:signInWithPhoneNumber",ts(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ho)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new fo({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class po{constructor(e){var t,n,r,i,s,o;const a=rt(it(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Gi(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=rt(it(e)).link,n=t?rt(it(t)).deep_link_id:null,r=rt(it(e)).deep_link_id;return(r?rt(it(r)).link:null)||r||n||t||e}(e);try{return new po(t)}catch(n){return null}}}class mo{constructor(){this.providerId=mo.PROVIDER_ID}static credential(e,t){return lo._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=po.parseLink(t);return Gi(n,"argument-error"),lo._fromEmailAndCode(e,n.code,n.tenantId)}}mo.PROVIDER_ID="password",mo.EMAIL_PASSWORD_SIGN_IN_METHOD="password",mo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class go{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class vo extends go{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class yo extends vo{constructor(){super("facebook.com")}static credential(e){return uo._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yo.credentialFromTaggedObject(e)}static credentialFromError(e){return yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return yo.credential(t.oauthAccessToken)}catch(n){return null}}}yo.FACEBOOK_SIGN_IN_METHOD="facebook.com",yo.PROVIDER_ID="facebook.com";class wo extends vo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return uo._fromParams({providerId:wo.PROVIDER_ID,signInMethod:wo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return wo.credentialFromTaggedObject(e)}static credentialFromError(e){return wo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return wo.credential(n,r)}catch(i){return null}}}wo.GOOGLE_SIGN_IN_METHOD="google.com",wo.PROVIDER_ID="google.com";class bo extends vo{constructor(){super("github.com")}static credential(e){return uo._fromParams({providerId:bo.PROVIDER_ID,signInMethod:bo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bo.credentialFromTaggedObject(e)}static credentialFromError(e){return bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return bo.credential(t.oauthAccessToken)}catch(n){return null}}}bo.GITHUB_SIGN_IN_METHOD="github.com",bo.PROVIDER_ID="github.com";class _o extends vo{constructor(){super("twitter.com")}static credential(e,t){return uo._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return _o.credentialFromTaggedObject(e)}static credentialFromError(e){return _o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return _o.credential(n,r)}catch(i){return null}}}async function So(e,t){return is(e,"POST","/v1/accounts:signUp",ts(e,t))}_o.TWITTER_SIGN_IN_METHOD="twitter.com",_o.PROVIDER_ID="twitter.com";class Eo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Is._fromIdTokenResponse(e,n,r),s=Io(n);return new Eo({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Io(n);return new Eo({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Io(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class To extends Ye{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,To.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new To(e,t,n,r)}}function ko(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw To._fromErrorAndOperation(e,n,t,r);throw n}))}async function xo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await vs(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Eo._forOperation(e,"link",r)}async function Co(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(An(r.app))return Promise.reject(Bi(r));const i="reauthenticate";try{const s=await vs(e,ko(r,i,t,e),n);Gi(s.idToken,r,"internal-error");const o=ms(s.idToken);Gi(o,r,"internal-error");const{sub:a}=o;return Gi(e.uid===a,r,"user-mismatch"),Eo._forOperation(e,i,s)}catch(jA){throw(null===jA||void 0===jA?void 0:jA.code)==="auth/".concat("user-not-found")&&ji(r,"user-mismatch"),jA}}async function No(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(An(e.app))return Promise.reject(Bi(e));const r="signIn",i=await ko(e,r,t),s=await Eo._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Ao(e,t){return No(Hs(e),t)}function Ro(e,t,n){var r;Gi((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Gi("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Gi(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Gi(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Do(e){const t=Hs(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function Po(e,t,n,r){return ft(e).onAuthStateChanged(t,n,r)}new WeakMap;const Oo="__sak";class Lo{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Oo,"1"),this.storage.removeItem(Oo),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Mo extends Lo{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=qe();return Ps(e)||Us(e)}()&&function(){try{return!(!window||window===window.top)}catch(jA){return!1}}(),this.fallbackToPolling=Bs(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Vs()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Mo.type="LOCAL";const Fo=Mo;class jo extends Lo{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}jo.type="SESSION";const Uo=jo;class Vo{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Vo(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Bo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Vo.receivers=[];class zo{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=Bo("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function qo(){return window}function Go(){return"undefined"!==typeof qo().WorkerGlobalScope&&"function"===typeof qo().importScripts}const Ko="firebaseLocalStorageDb",Ho="firebaseLocalStorage",Wo="fbase_key";class Qo{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Jo(e,t){return e.transaction([Ho],t?"readwrite":"readonly").objectStore(Ho)}function Yo(){const e=indexedDB.open(Ko,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Ho,{keyPath:Wo})}catch(jA){n(jA)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Ho)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ko);return new Qo(e).toPromise()}(),t(await Yo()))}))}))}async function $o(e,t,n){const r=Jo(e,!0).put({[Wo]:t,value:n});return new Qo(r).toPromise()}function Xo(e,t){const n=Jo(e,!0).delete(t);return new Qo(n).toPromise()}class Zo{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Yo()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(jA){if(t++>3)throw jA;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Go()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vo._getInstance(Go()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new zo(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yo();return await $o(e,Oo,"1"),await Xo(e,Oo),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>$o(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Jo(e,!1).get(t),r=await new Qo(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Xo(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Jo(e,!1).getAll();return new Qo(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Zo.type="LOCAL";const ea=Zo;Ys("rcb"),new Yi(3e4,6e4);const ta="recaptcha";async function na(e,t,n){var r;const i=await n.verify();try{let s;if(Gi("string"===typeof i,e,"argument-error"),Gi(n.type===ta,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Gi("enroll"===t.type,e,"internal-error");const n=await function(e,t){return ns(e,"POST","/v2/accounts/mfaEnrollment:start",ts(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Gi("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Gi(n,e,"missing-multi-factor-info");const o=await function(e,t){return ns(e,"POST","/v2/accounts/mfaSignIn:start",ts(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return ns(e,"POST","/v1/accounts:sendVerificationCode",ts(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class ra{constructor(e){this.providerId=ra.PROVIDER_ID,this.auth=Hs(e)}verifyPhoneNumber(e,t){return na(this.auth,e,ft(t))}static credential(e,t){return fo._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ra.credentialFromTaggedObject(t)}static credentialFromError(e){return ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?fo._fromTokenResponse(n,r):null}}function ia(e,t){return t?ks(t):(Gi(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ra.PROVIDER_ID="phone",ra.PHONE_SIGN_IN_METHOD="phone";class sa extends ro{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return co(e,this._buildIdpRequest())}_linkToIdToken(e,t){return co(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return co(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function oa(e){return No(e.auth,new sa(e),e.bypassAuthState)}function aa(e){const{auth:t,user:n}=e;return Gi(n,t,"internal-error"),Co(n,new sa(e),e.bypassAuthState)}async function la(e){const{auth:t,user:n}=e;return Gi(n,t,"internal-error"),xo(n,new sa(e),e.bypassAuthState)}class ca{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(jA){this.reject(jA)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(jA){this.reject(jA)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oa;case"linkViaPopup":case"linkViaRedirect":return la;case"reauthViaPopup":case"reauthViaRedirect":return aa;default:ji(this.auth,"internal-error")}}resolve(e){Hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ua=new Yi(2e3,1e4);class ha extends ca{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,ha.currentPopupAction&&ha.currentPopupAction.cancel(),ha.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Gi(e,this.auth,"internal-error"),e}async onExecution(){Hi(1===this.filter.length,"Popup operations only handle one event");const e=Bo();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Ui(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ui(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ha.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Ui(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,ua.get())};e()}}ha.currentPopupAction=null;const da="pendingRedirect",fa=new Map;class pa extends ca{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=fa.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=va(t),r=ga(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(jA){e=()=>Promise.reject(jA)}fa.set(this.auth._key(),e)}return this.bypassAuthState||fa.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ma(e,t){fa.set(e._key(),t)}function ga(e){return ks(e._redirectPersistence)}function va(e){return Ns(da,e.config.apiKey,e.name)}async function ya(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(An(e.app))return Promise.reject(Bi(e));const r=Hs(e),i=ia(r,t),s=new pa(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class wa{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _a(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!_a(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ui(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ba(e))}saveEventToCache(e){this.cachedEventUids.add(ba(e)),this.lastProcessedEventTime=Date.now()}}function ba(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function _a(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Sa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ea=/^https?/;async function Ia(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return ns(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Ta(r))return}catch(n){}ji(e,"unauthorized-domain")}function Ta(e){const t=Wi(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Ea.test(n))return!1;if(Sa.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const ka=new Yi(3e4,6e4);function xa(){const e=qo().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Ca(e){return new Promise(((t,n)=>{var r,i,s;function o(){xa(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{xa(),n(Ui(e,"network-request-failed"))},timeout:ka.get()})}if(null===(i=null===(r=qo().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=qo().gapi)||void 0===s?void 0:s.load)){const t=Ys("iframefcb");return qo()[t]=()=>{gapi.load?o():n(Ui(e,"network-request-failed"))},Js("".concat(Qs.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw Na=null,e}))}let Na=null;const Aa=new Yi(5e3,15e3),Ra="__/auth/iframe",Da="emulator/auth/iframe",Pa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Oa=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function La(e){const t=e.config;Gi(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?$i(t,Da):"https://".concat(e.config.authDomain,"/").concat(Ra),r={apiKey:t.apiKey,appName:e.name,v:Ln},i=Oa.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(nt(r).slice(1))}async function Ma(e){const t=await function(e){return Na=Na||Ca(e),Na}(e),n=qo().gapi;return Gi(n,e,"internal-error"),t.open({where:document.body,url:La(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Pa,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Ui(e,"network-request-failed"),s=qo().setTimeout((()=>{r(i)}),Aa.get());function o(){qo().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const Fa={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ja{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(jA){}}}function Ua(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Fa),{width:r.toString(),height:i.toString(),top:s,left:o}),c=qe().toLowerCase();n&&(a=Os(c)?"_blank":n),Ds(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Us(arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new ja(null);const h=window.open(t||"",a,u);Gi(h,e,"popup-blocked");try{h.focus()}catch(jA){}return new ja(h)}const Va="__/auth/handler",Ba="emulator/auth/handler",za=encodeURIComponent("fac");async function qa(e,t,n,r,i,s){Gi(e.config.authDomain,e,"auth-domain-config-required"),Gi(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ln,eventId:i};if(t instanceof go){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof vo){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(za,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Va);return $i(t,Ba)}(e),"?").concat(nt(a).slice(1)).concat(c)}const Ga="webStorageSupport";const Ka=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Uo,this._completeRedirectFn=ya,this._overrideRedirectResult=ma}async _openPopup(e,t,n,r){var i;Hi(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Ua(e,await qa(e,t,n,Wi(),r),Bo())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){qo().location.href=e}(await qa(e,t,n,Wi(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Hi(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Ma(e),n=new wa(e);return t.register("authEvent",(t=>{Gi(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ga,{type:Ga},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Ga];void 0!==i&&t(!!i),ji(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ia(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Bs()||Ps()||Us()}};var Ha="@firebase/auth",Wa="1.7.5";class Qa{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Gi(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ja=Be("authIdTokenMaxAge")||300;let Ya=null;const $a=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Ja)return;const i=null===n||void 0===n?void 0:n.token;Ya!==i&&(Ya=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))};function Xa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jn();const t=xn(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=xn(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(et(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;ji(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ka,persistence:[ea,Fo,Uo]}),r=Be("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=$a(e.toString());!function(e,t,n){ft(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){ft(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}const i=Ue("auth");return i&&eo(n,"http://".concat(i)),n}var Za;Qs={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Ui("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Za="Browser",kn(new pt("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Gi(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Za,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zs(Za)},c=new Ks(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ks);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),kn(new pt("auth-internal",(e=>(e=>new Qa(e))(Hs(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Bn(Ha,Wa,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Za)),Bn(Ha,Wa,"esm2017");class el{constructor(e,t){this._delegate=e,this.firebase=t,In(e,new pt("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Vn(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wn;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wn;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){In(this._delegate,e)}_addOrOverwriteComponent(e){Tn(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const tl=new $e("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const nl=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(r){const i=Mn(r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Ze(t,i.name))return t[i.name];const s=new e(i,n);return t[i.name]=s,s},app:i,registerVersion:Bn,setLogLevel:qn,onLog:zn,apps:null,SDK_VERSION:Ln,INTERNAL:{registerComponent:function(t){const r=t.name,s=r.replace("-compat","");if(kn(t)&&"PUBLIC"===t.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw tl.create("invalid-app-argument",{appName:r});return e[s]()};void 0!==t.serviceProps&&Me(o,t.serviceProps),n[s]=o,e.prototype[s]=function(){const e=this._getService.bind(this,r);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e.apply(this,t.multipleInstances?i:[])}}return"PUBLIC"===t.type?n[s]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:r}};function i(e){if(!Ze(t,e=e||wn))throw tl.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((e=>t[e]))}}),i.App=e,n}(el);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Me(t,e)},createSubscribe:st,ErrorFactory:$e,deepExtend:Me}),t}(),rl=new It("@firebase/app-compat");if(Ge()&&void 0!==self.firebase){rl.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&rl.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const il=nl;!function(e){Bn("@firebase/app-compat","0.2.36",e)}();il.registerVersion("firebase","10.12.3","app-compat");var sl,ol,al="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ll={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),s=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=y(r,1),n=y(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=o(n)).j(t);h(c)||0<c.l(e);)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,ol=ll.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},sl=ll.Integer=r}).apply("undefined"!==typeof al?al:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var cl,ul,hl,dl,fl,pl,ml,gl,vl,yl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},wl={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof yl&&yl];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function w(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function S(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function E(e){i.setTimeout((()=>{throw e}),0)}function I(){var e=N;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var T=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new k),(e=>e.reset()));class k{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let x,C=!1,N=new class{constructor(){this.h=this.g=null}add(e,t){const n=T.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=i.Promise.resolve(void 0);x=()=>{e.then(R)}};var R=()=>{for(var e;e=I();){try{e.h.call(e.g)}catch(n){E(n)}var t=T;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function D(){this.s=this.s,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}h(L,P);var M={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),j=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++j,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function B(e){this.src=e,this.g={},this.h=0}function z(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}B.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=q(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new U(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var G="closure_lm_"+(1e6*Math.random()|0),K={};function H(e,t,n,r,i){if(r&&r.once)return Q(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)H(e,t[s],n,r,i);return null}return n=te(n),e&&e[F]?e.K(t,n,o(r)?!!r.capture:!!r,i):W(e,t,n,!1,r,i)}function W(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[G]=l=new B(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent($(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);return null}return n=te(n),e&&e[F]?e.L(t,n,o(r)?!!r.capture:!!r,i):W(e,t,n,!0,r,i)}function J(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)J(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[F]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[F])z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent($(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(z(n,e),0==n.h&&(n.src=null,t[G]=null)):V(e)}}}function $(e){return e in K?K[e]:K[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[G])instanceof B?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){D.call(this),this.i=new B(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var i=t;_(t=new P(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&z(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,D),ne.prototype[F]=!0,ne.prototype.removeEventListener=function(e,t,n,r){J(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends D{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){D.call(this),this.h=e,this.g={}}h(le,D);var ce=[];function ue(e){y(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Y(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){P.call(this,"d")}function we(){P.call(this,"c")}h(ye,P),h(we,P);var be={},_e=null;function Se(){return _e=_e||new ne}function Ee(e){P.call(this,be.La,e)}function Ie(e){const t=Se();re(t,new Ee(t))}function Te(e,t){P.call(this,be.STAT_EVENT,e),this.stat=t}function ke(e){const t=Se();re(t,new Te(t,e))}function xe(e,t){P.call(this,be.Ma,e),this.size=t}function Ce(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ne(){this.g=!0}function Ae(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return he(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}be.La="serverreachability",h(Ee,P),be.STAT_EVENT="statevent",h(Te,P),be.Ma="timingevent",h(xe,P),Ne.prototype.xa=function(){this.g=!1},Ne.prototype.info=function(){};var Re,De={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Oe(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}h(Oe,pe),Oe.prototype.g=function(){return new XMLHttpRequest},Oe.prototype.i=function(){return{}},Re=new Oe;var Fe={},je={};function Ue(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),qe(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Tt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var o=H(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?w(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ie(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Be(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function ze(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?je:(n=Number(t.substring(n,r)),isNaN(n)?Fe:(r+=1)+n>t.length?je:(t=t.slice(r,r+n),e.C=r+n,t))}function qe(e){e.S=Date.now()+e.I,Ge(e,e.I)}function Ge(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(c(e.ba,e),t)}function Ke(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function He(e){0==e.j.G||e.J||ln(e.j,e)}function We(e){Ke(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Yt(n)}rn(n),ke(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(c(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(Ke(a),qe(a)),r.g=o}else nn(r);0<n.i.length&&Xt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Jt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ie()}catch(u){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Kt(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const d=Kt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Ht(this.g)))){this.J||4!=d||7==t||Ie(),Ke(this);var n=this.g.Z();this.X=n;t:if(Be(this)){var r=Ht(this.g);e="";var s=r.length,o=4==Kt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){We(this),He(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,ke(12),We(this),He(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=ze(this,a),e==je){4==d&&(this.s=4,ke(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==Fe){this.s=4,ke(15),Ae(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),Qe(this,e)}if(Be(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,ke(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(h),h.M=!0,ke(11))}}else Ae(this.i,this.l,a,"[Invalid Chunked Response]"),We(this),He(this)}else Ae(this.i,this.l,a,null),Qe(this,a);4==d&&We(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=Kt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=S(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,ke(12)):(this.s=0,ke(13)),We(this),He(this)}}}catch(d){}},Le.prototype.cancel=function(){this.J=!0,We(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ie(),ke(17)),We(this),this.s=2,He(this)):Ge(this,this.S-e)};var Je=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $e(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new _t;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new _t(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof _t?(e.i=t,function(e,t){t&&!e.j&&(St(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Et(this,t),Tt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,wt)),e.i=new _t(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var mt,gt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,wt=/[#\?@]/g,bt=/#/g;function _t(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function St(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Et(e,t){St(e),t=kt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function It(e,t){return St(e),t=kt(e,t),e.g.has(t)}function Tt(e,t,n){Et(e,t),0<n.length&&(e.i=null,e.g.set(kt(e,t),d(n)),e.h+=n.length)}function kt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function xt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Ct(){this.g=new fe}function Nt(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;o(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(jA){throw t.push(r+"type="+encodeURIComponent("_badmap")),jA}}function At(e){this.l=e.Ub||null,this.j=e.eb||!1}function Rt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Dt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Pt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ot(e)}function Ot(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Lt(e){let t="";return y(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Mt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Ft(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=_t.prototype).add=function(e,t){St(this),this.i=null,e=kt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){St(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){St(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){St(this);let t=[];if("string"===typeof e)It(this,e)&&(t=t.concat(this.g.get(kt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return St(this),this.i=null,It(this,e=kt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(At,pe),At.prototype.g=function(){return new Rt(this.l,this.j)},At.prototype.i=(mt={},function(){return mt}),h(Rt,ne),(e=Rt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ot(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ot(this)),this.g&&(this.readyState=3,Ot(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Pt(this):Ot(this),3==this.readyState&&Dt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Pt(this))},e.Qa=function(e){this.g&&(this.response=e,Pt(this))},e.ga=function(){this.g&&Pt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Ft,ne);var jt=/^https?$/i,Ut=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Bt(e),qt(e)}function Bt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function zt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Kt(e)||2!=e.Z()))if(e.u&&4==Kt(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Kt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!jt.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Kt(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",Bt(e)}}finally{qt(e)}}}function qt(e,t){if(e.g){Gt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(jA){}}}function Gt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Kt(e){return e.g?e.g.readyState:0}function Ht(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Sl){return null}}function Wt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qt(e){this.Aa=0,this.i=[],this.j=new Ne,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wt("baseRetryDelayMs",5e3,e),this.cb=Wt("retryDelaySeedMs",1e4,e),this.Wa=Wt("forwardChannelMaxRetries",2,e),this.wa=Wt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new Ct,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Jt(e){if($t(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Le(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}hn(e)}function Yt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function $t(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Xt(e){if(!$e(e.h)&&!e.s){e.s=!0;var t=e.Ga;x||A(),C||(x(),C=!0),N.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Mt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function en(e,t){e.H&&y(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{Nt(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;x||A(),C||(x(),C=!0),N.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Mt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,Ve(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Se(),new xe(r,n)),Xt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ce(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),ht(r),t?function(e,t){const n=new Ne;if(i.Image){const r=new Image;r.onload=u(xt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(xt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(xt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(xt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ne;const n=new AbortController,r=setTimeout((()=>{n.abort(),xt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?xt(0,0,!0,t):xt(0,0,!1,t)})).catch((()=>{clearTimeout(r),xt(0,0,!1,t)}))}(r.toString(),n)}else ke(2);e.G=0,e.l&&e.l.sa(t),hn(e),$t(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ft(new At({eb:n})):new Ft(e.pa)).Ha(e.J),t}function pn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new wn(this)}function vn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){we.call(this),this.status=1}function wn(e){this.g=e}(e=Ft.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Re.g(),this.v=this.o?me(this.o):me(Re),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Vt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Gt(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Vt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),Ft.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?zt(this):this.bb())},e.bb=function(){zt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Kt(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){ke(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Xt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let s=this.o;if(this.S&&(s?(s=w(s),_(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Lt(s)))+"&"+t:this.m&&Mt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||$e(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ke(10),Yt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),rn(this),ke(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},h(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Jt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Je(t.Ya++,e)),3==t.G&&Xt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Jt(this.g),delete this.g,gn.aa.N.call(this)},h(vn,ye),h(yn,we),h(wn,pn),wn.prototype.ua=function(){re(this.g,"a")},wn.prototype.ta=function(e){re(this.g,new vn(e))},wn.prototype.sa=function(e){re(this.g,new yn)},wn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,vl=wl.createWebChannelTransport=function(){return new mn},gl=wl.getStatEventTarget=function(){return Se()},ml=wl.Event=be,pl=wl.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},De.NO_ERROR=0,De.TIMEOUT=8,De.HTTP_ERROR=6,fl=wl.ErrorCode=De,Pe.COMPLETE="complete",dl=wl.EventType=Pe,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,hl=wl.WebChannel=ge,ul=wl.FetchXmlHttpFactory=At,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,cl=wl.XhrIo=Ft}).apply("undefined"!==typeof yl?yl:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const bl="@firebase/firestore";class _l{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_l.UNAUTHENTICATED=new _l(null),_l.GOOGLE_CREDENTIALS=new _l("google-credentials-uid"),_l.FIRST_PARTY=new _l("first-party-uid"),_l.MOCK_USER=new _l("mock-user");let Sl="10.12.3";const El=new It("@firebase/firestore");function Il(){return El.logLevel}function Tl(e){if(El.logLevel<=wt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Cl);El.debug("Firestore (".concat(Sl,"): ").concat(e),...i)}}function kl(e){if(El.logLevel<=wt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Cl);El.error("Firestore (".concat(Sl,"): ").concat(e),...i)}}function xl(e){if(El.logLevel<=wt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Cl);El.warn("Firestore (".concat(Sl,"): ").concat(e),...i)}}function Cl(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Nl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Sl,") INTERNAL ASSERTION FAILED: ")+e;throw kl(t),new Error(t)}function Al(e,t){e||Nl()}function Rl(e,t){return e}const Dl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pl extends Ye{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Ol{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Ll{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Ml{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(_l.UNAUTHENTICATED)))}shutdown(){}}class Fl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class jl{constructor(e){this.t=e,this.currentUser=_l.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Ol;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ol,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Tl("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Tl("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ol)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Tl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Al("string"==typeof t.accessToken),new Ll(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Al(null===e||"string"==typeof e),new _l(e)}}class Ul{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=_l.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Vl{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Ul(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(_l.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Bl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zl{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Tl("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Tl("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Tl("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Tl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Al("string"==typeof e.token),this.R=e.token,new Bl(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ql(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Gl{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=ql(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Kl(e,t){return e<t?-1:e>t?1:0}function Hl(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Wl(e){return e+"\0"}class Ql{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pl(Dl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pl(Dl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pl(Dl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pl(Dl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ql.fromMillis(Date.now())}static fromDate(e){return Ql.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Ql(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Kl(this.nanoseconds,e.nanoseconds):Kl(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Jl{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Jl(e)}static min(){return new Jl(new Ql(0,0))}static max(){return new Jl(new Ql(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Yl{constructor(e,t,n){void 0===t?t=0:t>e.length&&Nl(),void 0===n?n=e.length-t:n>e.length-t&&Nl(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Yl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yl?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class $l extends Yl{construct(e,t,n){return new $l(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Pl(Dl.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new $l(e)}static emptyPath(){return new $l([])}}const Xl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zl extends Yl{construct(e,t,n){return new Zl(e,t,n)}static isValidIdentifier(e){return Xl.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zl.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Zl(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Pl(Dl.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Pl(Dl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Pl(Dl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Pl(Dl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zl(t)}static emptyPath(){return new Zl([])}}class ec{constructor(e){this.path=e}static fromPath(e){return new ec($l.fromString(e))}static fromName(e){return new ec($l.fromString(e).popFirst(5))}static empty(){return new ec($l.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===$l.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return $l.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ec(new $l(e.slice()))}}class tc{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function nc(e){return e.fields.find((e=>2===e.kind))}function rc(e){return e.fields.filter((e=>2!==e.kind))}tc.UNKNOWN_ID=-1;class ic{constructor(e,t){this.fieldPath=e,this.kind=t}}class sc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new sc(0,lc.min())}}function oc(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Jl.fromTimestamp(1e9===r?new Ql(n+1,0):new Ql(n,r));return new lc(i,ec.empty(),t)}function ac(e){return new lc(e.readTime,e.key,-1)}class lc{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new lc(Jl.min(),ec.empty(),-1)}static max(){return new lc(Jl.max(),ec.empty(),-1)}}function cc(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ec.comparator(e.documentKey,t.documentKey),0!==n?n:Kl(e.largestBatchId,t.largestBatchId))}const uc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function dc(e){if(e.code!==Dl.FAILED_PRECONDITION||e.message!==uc)throw e;Tl("LocalStore","Unexpectedly lost primary lease")}class fc{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Nl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fc(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof fc?t:fc.resolve(t)}catch(e){return fc.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):fc.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):fc.reject(t)}static resolve(e){return new fc(((t,n)=>{t(e)}))}static reject(e){return new fc(((t,n)=>{n(e)}))}static waitFor(e){return new fc(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=fc.resolve(!1);for(const n of e)t=t.next((e=>e?fc.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new fc(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new fc(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class pc{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Ol,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new yc(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Ec(t.target.error);this.V.reject(new yc(e,n))}}static open(e,t,n,r){try{return new pc(t,e.transaction(r,n))}catch(e){throw new yc(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Tl("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new bc(t)}}class mc{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===mc.S(qe())&&kl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Tl("SimpleDb","Removing database:",e),_c(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Qe())return!1;if(mc.C())return!0;const e=qe(),t=mc.S(e),n=0<t&&t<10,r=gc(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Tl("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new yc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Pl(Dl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Pl(Dl.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new yc(e,r))},r.onupgradeneeded=e=>{Tl("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.O(t,r.transaction,e.oldVersion,this.version).next((()=>{Tl("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.M(e);const t=pc.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),fc.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Tl("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function gc(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class vc{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return _c(this.B.delete())}}class yc extends Pl{constructor(e,t){super(Dl.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function wc(e){return"IndexedDbTransactionError"===e.name}class bc{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Tl("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Tl("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),_c(n)}add(e){return Tl("SimpleDb","ADD",this.store.name,e,e),_c(this.store.add(e))}get(e){return _c(this.store.get(e)).next((t=>(void 0===t&&(t=null),Tl("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Tl("SimpleDb","DELETE",this.store.name,e),_c(this.store.delete(e))}count(){return Tl("SimpleDb","COUNT",this.store.name),_c(this.store.count())}U(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new fc(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}}G(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new fc(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}j(e,t){Tl("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}J(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Y(e){const t=this.cursor({});return new fc(((n,r)=>{t.onerror=e=>{const t=Ec(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new fc(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new vc(i),o=t(i.primaryKey,i.value,s);if(o instanceof fc){const e=o.catch((e=>(s.done(),fc.reject(e))));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}})).next((()=>fc.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function _c(e){return new fc(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Ec(e.target.error);n(t)}}))}let Sc=!1;function Ec(e){const t=mc.S(qe());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Pl("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Sc||(Sc=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Ic{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){Tl("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Tl("IndexBackfiller","Documents written: ".concat(await this.Z.ee()))}catch(e){wc(e)?Tl("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await dc(e)}await this.X(6e4)}))}}class Tc{constructor(e,t){this.localStore=e,this.persistence=t}async ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const n=new Set;let r=t,i=!0;return fc.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Tl("IndexBackfiller","Processing collection: ".concat(t)),this.ne(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.re(r,n))).next((n=>(Tl("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}re(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=ac(t);cc(r,n)>0&&(n=r)})),new lc(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class kc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function xc(e){return null==e}function Cc(e){return 0===e&&1/e==-1/0}function Nc(e){return"number"==typeof e&&Number.isInteger(e)&&!Cc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Ac(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Dc(t)),t=Rc(e.get(n),t);return Dc(t)}function Rc(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Dc(e){return e+"\x01\x01"}function Pc(e){const t=e.length;if(Al(t>=2),2===t)return Al("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),$l.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Nl(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Nl()}s=t+2}return new $l(r)}kc.oe=-1;const Oc=["userId","batchId"];function Lc(e,t){return[e,Ac(t)]}function Mc(e,t,n){return[e,Ac(t),n]}const Fc={},jc=["prefixPath","collectionGroup","readTime","documentId"],Uc=["prefixPath","collectionGroup","documentId"],Vc=["collectionGroup","readTime","prefixPath","documentId"],Bc=["canonicalId","targetId"],zc=["targetId","path"],qc=["path","targetId"],Gc=["collectionId","parent"],Kc=["indexId","uid"],Hc=["uid","sequenceNumber"],Wc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Qc=["indexId","uid","orderedDocumentKey"],Jc=["userId","collectionPath","documentId"],Yc=["userId","collectionPath","largestBatchId"],$c=["userId","collectionGroup","largestBatchId"],Xc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Zc=[...Xc,"documentOverlays"],eu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],tu=eu,nu=[...tu,"indexConfiguration","indexState","indexEntries"],ru=nu;class iu extends hc{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function su(e,t){const n=Rl(e);return mc.F(n._e,t)}function ou(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function au(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function lu(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class cu{constructor(e,t){this.comparator=e,this.root=t||hu.EMPTY}insert(e,t){return new cu(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hu.BLACK,null,null))}remove(e){return new cu(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hu.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uu(this.root,e,this.comparator,!1)}getReverseIterator(){return new uu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uu(this.root,e,this.comparator,!0)}}class uu{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hu{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:hu.RED,this.left=null!=r?r:hu.EMPTY,this.right=null!=i?i:hu.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new hu(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return hu.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return hu.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Nl();if(this.right.isRed())throw Nl();const e=this.left.check();if(e!==this.right.check())throw Nl();return e+(this.isRed()?0:1)}}hu.EMPTY=null,hu.RED=!0,hu.BLACK=!1,hu.EMPTY=new class{constructor(){this.size=0}get key(){throw Nl()}get value(){throw Nl()}get color(){throw Nl()}get left(){throw Nl()}get right(){throw Nl()}copy(e,t,n,r,i){return this}insert(e,t,n){return new hu(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class du{constructor(e){this.comparator=e,this.data=new cu(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fu(this.data.getIterator())}getIteratorFrom(e){return new fu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof du))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new du(this.comparator);return t.data=e,t}}class fu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function pu(e){return e.hasNext()?e.getNext():void 0}class mu{constructor(e){this.fields=e,e.sort(Zl.comparator)}static empty(){return new mu([])}unionWith(e){let t=new du(Zl.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new mu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Hl(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class gu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class vu{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new gu("Invalid base64 string: "+e):e}}(e);return new vu(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new vu(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kl(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vu.EMPTY_BYTE_STRING=new vu("");const yu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wu(e){if(Al(!!e),"string"==typeof e){let t=0;const n=yu.exec(e);if(Al(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:bu(e.seconds),nanos:bu(e.nanos)}}function bu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function _u(e){return"string"==typeof e?vu.fromBase64String(e):vu.fromUint8Array(e)}function Su(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Eu(e){const t=e.mapValue.fields.__previous_value__;return Su(t)?Eu(t):t}function Iu(e){const t=wu(e.mapValue.fields.__local_write_time__.timestampValue);return new Ql(t.seconds,t.nanos)}class Tu{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class ku{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ku("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ku&&e.projectId===this.projectId&&e.database===this.database}}const xu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Cu={nullValue:"NULL_VALUE"};function Nu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Su(e)?4:qu(e)?9007199254740991:10:Nl()}function Au(e,t){if(e===t)return!0;const n=Nu(e);if(n!==Nu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Iu(e).isEqual(Iu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=wu(e.timestampValue),r=wu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return _u(e.bytesValue).isEqual(_u(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return bu(e.geoPointValue.latitude)===bu(t.geoPointValue.latitude)&&bu(e.geoPointValue.longitude)===bu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return bu(e.integerValue)===bu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=bu(e.doubleValue),r=bu(t.doubleValue);return n===r?Cc(n)===Cc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Hl(e.arrayValue.values||[],t.arrayValue.values||[],Au);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ou(n)!==ou(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Au(n[i],r[i])))return!1;return!0}(e,t);default:return Nl()}}function Ru(e,t){return void 0!==(e.values||[]).find((e=>Au(e,t)))}function Du(e,t){if(e===t)return 0;const n=Nu(e),r=Nu(t);if(n!==r)return Kl(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Kl(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=bu(e.integerValue||e.doubleValue),r=bu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Pu(e.timestampValue,t.timestampValue);case 4:return Pu(Iu(e),Iu(t));case 5:return Kl(e.stringValue,t.stringValue);case 6:return function(e,t){const n=_u(e),r=_u(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Kl(n[i],r[i]);if(0!==e)return e}return Kl(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Kl(bu(e.latitude),bu(t.latitude));return 0!==n?n:Kl(bu(e.longitude),bu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Du(n[i],r[i]);if(e)return e}return Kl(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===xu.mapValue&&t===xu.mapValue)return 0;if(e===xu.mapValue)return 1;if(t===xu.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Kl(r[o],s[o]);if(0!==e)return e;const t=Du(n[r[o]],i[s[o]]);if(0!==t)return t}return Kl(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Nl()}}function Pu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Kl(e,t);const n=wu(e),r=wu(t),i=Kl(n.seconds,r.seconds);return 0!==i?i:Kl(n.nanos,r.nanos)}function Ou(e){return Lu(e)}function Lu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=wu(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return _u(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ec.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Lu(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Lu(e.fields[i]));return n+"}"}(e.mapValue):Nl()}function Mu(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Fu(e){return!!e&&"integerValue"in e}function ju(e){return!!e&&"arrayValue"in e}function Uu(e){return!!e&&"nullValue"in e}function Vu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Bu(e){return!!e&&"mapValue"in e}function zu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return au(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=zu(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=zu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function qu(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Gu(e){return"nullValue"in e?Cu:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Mu(ku.empty(),ec.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Nl()}function Ku(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Mu(ku.empty(),ec.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?xu:Nl()}function Hu(e,t){const n=Du(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Wu(e,t){const n=Du(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Qu{constructor(e){this.value=e}static empty(){return new Qu({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Bu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zu(t)}setAll(e){let t=Zl.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=zu(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Bu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Au(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Bu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){au(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Qu(zu(this.value))}}function Ju(e){const t=[];return au(e.fields,((e,n)=>{const r=new Zl([e]);if(Bu(n)){const e=Ju(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new mu(t)}class Yu{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Yu(e,0,Jl.min(),Jl.min(),Jl.min(),Qu.empty(),0)}static newFoundDocument(e,t,n,r){return new Yu(e,1,t,Jl.min(),n,r,0)}static newNoDocument(e,t){return new Yu(e,2,t,Jl.min(),Jl.min(),Qu.empty(),0)}static newUnknownDocument(e,t){return new Yu(e,3,t,Jl.min(),Jl.min(),Qu.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Jl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qu.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Jl.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Yu&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class $u{constructor(e,t){this.position=e,this.inclusive=t}}function Xu(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?ec.comparator(ec.fromName(o.referenceValue),n.key):Du(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Zu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Au(e.position[n],t.position[n]))return!1;return!0}class eh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function th(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class nh{}class rh extends nh{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new fh(e,t,n):"array-contains"===t?new vh(e,n):"in"===t?new yh(e,n):"not-in"===t?new wh(e,n):"array-contains-any"===t?new bh(e,n):new rh(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new ph(e,n):new mh(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Du(t,this.value)):null!==t&&Nu(this.value)===Nu(t)&&this.matchesComparison(Du(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Nl()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ih extends nh{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new ih(e,t)}matches(e){return sh(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function sh(e){return"and"===e.op}function oh(e){return"or"===e.op}function ah(e){return lh(e)&&sh(e)}function lh(e){for(const t of e.filters)if(t instanceof ih)return!1;return!0}function ch(e){if(e instanceof rh)return e.field.canonicalString()+e.op.toString()+Ou(e.value);if(ah(e))return e.filters.map((e=>ch(e))).join(",");{const t=e.filters.map((e=>ch(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function uh(e,t){return e instanceof rh?function(e,t){return t instanceof rh&&e.op===t.op&&e.field.isEqual(t.field)&&Au(e.value,t.value)}(e,t):e instanceof ih?function(e,t){return t instanceof ih&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&uh(n,t.filters[r])),!0)}(e,t):void Nl()}function hh(e,t){const n=e.filters.concat(t);return ih.create(n,e.op)}function dh(e){return e instanceof rh?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Ou(e.value))}(e):e instanceof ih?function(e){return e.op.toString()+" {"+e.getFilters().map(dh).join(" ,")+"}"}(e):"Filter"}class fh extends rh{constructor(e,t,n){super(e,t,n),this.key=ec.fromName(n.referenceValue)}matches(e){const t=ec.comparator(e.key,this.key);return this.matchesComparison(t)}}class ph extends rh{constructor(e,t){super(e,"in",t),this.keys=gh("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class mh extends rh{constructor(e,t){super(e,"not-in",t),this.keys=gh("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function gh(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>ec.fromName(e.referenceValue)))}class vh extends rh{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ju(t)&&Ru(t.arrayValue,this.value)}}class yh extends rh{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ru(this.value.arrayValue,t)}}class wh extends rh{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ru(this.value.arrayValue,t)}}class bh extends rh{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ju(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Ru(this.value.arrayValue,e)))}}class _h{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function Sh(e){return new _h(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Eh(e){const t=Rl(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>ch(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),xc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Ou(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Ou(e))).join(",")),t.ue=e}return t.ue}function Ih(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!th(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!uh(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Zu(e.startAt,t.startAt)&&Zu(e.endAt,t.endAt)}function Th(e){return ec.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function kh(e,t){return e.filters.filter((e=>e instanceof rh&&e.field.isEqual(t)))}function xh(e,t,n){let r=Cu,i=!0;for(const s of kh(e,t)){let e=Cu,t=!0;switch(s.op){case"<":case"<=":e=Gu(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Cu}Hu({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Hu({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Ch(e,t,n){let r=xu,i=!0;for(const s of kh(e,t)){let e=xu,t=!0;switch(s.op){case">=":case">":e=Ku(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=xu}Wu({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Wu({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Nh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Ah(e,t,n,r,i,s,o,a){return new Nh(e,t,n,r,i,s,o,a)}function Rh(e){return new Nh(e)}function Dh(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ph(e){return null!==e.collectionGroup}function Oh(e){const t=Rl(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new du(Zl.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new eh(r,n))})),e.has(Zl.keyField().canonicalString())||t.ce.push(new eh(Zl.keyField(),n))}return t.ce}function Lh(e){const t=Rl(e);return t.le||(t.le=Mh(t,Oh(e))),t.le}function Mh(e,t){if("F"===e.limitType)return Sh(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new eh(e.field,t)}));const n=e.endAt?new $u(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new $u(e.startAt.position,e.startAt.inclusive):null;return Sh(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Fh(e,t){const n=e.filters.concat([t]);return new Nh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function jh(e,t,n){return new Nh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Uh(e,t){return Ih(Lh(e),Lh(t))&&e.limitType===t.limitType}function Vh(e){return"".concat(Eh(Lh(e)),"|lt:").concat(e.limitType)}function Bh(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>dh(e))).join(", "),"]")),xc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Ou(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Ou(e))).join(",")),"Target(".concat(t,")")}(Lh(e)),"; limitType=").concat(e.limitType,")")}function zh(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ec.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Oh(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Xu(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Oh(e),t))&&!(e.endAt&&!function(e,t,n){const r=Xu(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Oh(e),t))}(e,t)}function qh(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Gh(e){return(t,n)=>{let r=!1;for(const i of Oh(e)){const e=Kh(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Kh(e,t,n){const r=e.field.isKeyField()?ec.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Du(r,i):Nl()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Nl()}}class Hh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){au(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return lu(this.inner)}size(){return this.innerSize}}const Wh=new cu(ec.comparator);function Qh(){return Wh}const Jh=new cu(ec.comparator);function Yh(){let e=Jh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function $h(e){let t=Jh;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Xh(){return ed()}function Zh(){return ed()}function ed(){return new Hh((e=>e.toString()),((e,t)=>e.isEqual(t)))}const td=new cu(ec.comparator),nd=new du(ec.comparator);function rd(){let e=nd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const id=new du(Kl);function sd(){return id}function od(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cc(t)?"-0":t}}function ad(e){return{integerValue:""+e}}function ld(e,t){return Nc(t)?ad(t):od(e,t)}class cd{constructor(){this._=void 0}}function ud(e,t,n){return e instanceof fd?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Su(t)&&(t=Eu(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof pd?md(e,t):e instanceof gd?vd(e,t):function(e,t){const n=dd(e,t),r=wd(n)+wd(e.Pe);return Fu(n)&&Fu(e.Pe)?ad(r):od(e.serializer,r)}(e,t)}function hd(e,t,n){return e instanceof pd?md(e,t):e instanceof gd?vd(e,t):n}function dd(e,t){return e instanceof yd?function(e){return Fu(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class fd extends cd{}class pd extends cd{constructor(e){super(),this.elements=e}}function md(e,t){const n=bd(t);for(const r of e.elements)n.some((e=>Au(e,r)))||n.push(r);return{arrayValue:{values:n}}}class gd extends cd{constructor(e){super(),this.elements=e}}function vd(e,t){let n=bd(t);for(const r of e.elements)n=n.filter((e=>!Au(e,r)));return{arrayValue:{values:n}}}class yd extends cd{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function wd(e){return bu(e.integerValue||e.doubleValue)}function bd(e){return ju(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class _d{constructor(e,t){this.field=e,this.transform=t}}class Sd{constructor(e,t){this.version=e,this.transformResults=t}}class Ed{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ed}static exists(e){return new Ed(void 0,e)}static updateTime(e){return new Ed(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Id(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Td{}function kd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Md(e.key,Ed.none()):new Rd(e.key,e.data,Ed.none());{const n=e.data,r=Qu.empty();let i=new du(Zl.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Dd(e.key,r,new mu(i.toArray()),Ed.none())}}function xd(e,t,n){e instanceof Rd?function(e,t,n){const r=e.value.clone(),i=Od(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Dd?function(e,t,n){if(!Id(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Od(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Pd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Cd(e,t,n,r){return e instanceof Rd?function(e,t,n,r){if(!Id(e.precondition,t))return n;const i=e.value.clone(),s=Ld(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Dd?function(e,t,n,r){if(!Id(e.precondition,t))return n;const i=Ld(e.fieldTransforms,r,t),s=t.data;return s.setAll(Pd(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Id(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Nd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=dd(r.transform,e||null);null!=i&&(null===n&&(n=Qu.empty()),n.set(r.field,i))}return n||null}function Ad(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Hl(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof pd&&t instanceof pd||e instanceof gd&&t instanceof gd?Hl(e.elements,t.elements,Au):e instanceof yd&&t instanceof yd?Au(e.Pe,t.Pe):e instanceof fd&&t instanceof fd}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Rd extends Td{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Dd extends Td{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Pd(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Od(e,t,n){const r=new Map;Al(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,hd(o,a,n[i]))}return r}function Ld(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,ud(e,s,t))}return r}class Md extends Td{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fd extends Td{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class jd{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&xd(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Cd(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Cd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Zh();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=kd(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Jl.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),rd())}isEqual(e){return this.batchId===e.batchId&&Hl(this.mutations,e.mutations,((e,t)=>Ad(e,t)))&&Hl(this.baseMutations,e.baseMutations,((e,t)=>Ad(e,t)))}}class Ud{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Al(e.mutations.length===n.length);let r=td;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Ud(e,t,n,r)}}class Vd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Bd{constructor(e,t){this.count=e,this.unchangedNames=t}}var zd,qd;function Gd(e){switch(e){default:return Nl();case Dl.CANCELLED:case Dl.UNKNOWN:case Dl.DEADLINE_EXCEEDED:case Dl.RESOURCE_EXHAUSTED:case Dl.INTERNAL:case Dl.UNAVAILABLE:case Dl.UNAUTHENTICATED:return!1;case Dl.INVALID_ARGUMENT:case Dl.NOT_FOUND:case Dl.ALREADY_EXISTS:case Dl.PERMISSION_DENIED:case Dl.FAILED_PRECONDITION:case Dl.ABORTED:case Dl.OUT_OF_RANGE:case Dl.UNIMPLEMENTED:case Dl.DATA_LOSS:return!0}}function Kd(e){if(void 0===e)return kl("GRPC error has no .code"),Dl.UNKNOWN;switch(e){case zd.OK:return Dl.OK;case zd.CANCELLED:return Dl.CANCELLED;case zd.UNKNOWN:return Dl.UNKNOWN;case zd.DEADLINE_EXCEEDED:return Dl.DEADLINE_EXCEEDED;case zd.RESOURCE_EXHAUSTED:return Dl.RESOURCE_EXHAUSTED;case zd.INTERNAL:return Dl.INTERNAL;case zd.UNAVAILABLE:return Dl.UNAVAILABLE;case zd.UNAUTHENTICATED:return Dl.UNAUTHENTICATED;case zd.INVALID_ARGUMENT:return Dl.INVALID_ARGUMENT;case zd.NOT_FOUND:return Dl.NOT_FOUND;case zd.ALREADY_EXISTS:return Dl.ALREADY_EXISTS;case zd.PERMISSION_DENIED:return Dl.PERMISSION_DENIED;case zd.FAILED_PRECONDITION:return Dl.FAILED_PRECONDITION;case zd.ABORTED:return Dl.ABORTED;case zd.OUT_OF_RANGE:return Dl.OUT_OF_RANGE;case zd.UNIMPLEMENTED:return Dl.UNIMPLEMENTED;case zd.DATA_LOSS:return Dl.DATA_LOSS;default:return Nl()}}(qd=zd||(zd={}))[qd.OK=0]="OK",qd[qd.CANCELLED=1]="CANCELLED",qd[qd.UNKNOWN=2]="UNKNOWN",qd[qd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qd[qd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qd[qd.NOT_FOUND=5]="NOT_FOUND",qd[qd.ALREADY_EXISTS=6]="ALREADY_EXISTS",qd[qd.PERMISSION_DENIED=7]="PERMISSION_DENIED",qd[qd.UNAUTHENTICATED=16]="UNAUTHENTICATED",qd[qd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qd[qd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qd[qd.ABORTED=10]="ABORTED",qd[qd.OUT_OF_RANGE=11]="OUT_OF_RANGE",qd[qd.UNIMPLEMENTED=12]="UNIMPLEMENTED",qd[qd.INTERNAL=13]="INTERNAL",qd[qd.UNAVAILABLE=14]="UNAVAILABLE",qd[qd.DATA_LOSS=15]="DATA_LOSS";let Hd=null;function Wd(){return new TextEncoder}const Qd=new sl([4294967295,4294967295],0);function Jd(e){const t=Wd().encode(e),n=new ol;return n.update(t),new Uint8Array(n.digest())}function Yd(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new sl([n,r],0),new sl([i,s],0)]}class $d{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Xd("Invalid padding: ".concat(t));if(n<0)throw new Xd("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Xd("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Xd("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=sl.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(sl.fromNumber(n)));return 1===r.compare(Qd)&&(r=new sl([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Jd(e),[n,r]=Yd(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new $d(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=Jd(e),[n,r]=Yd(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Xd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Zd{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,ef.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Zd(Jl.min(),r,new cu(Kl),Qh(),rd())}}class ef{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ef(n,t,rd(),rd(),rd())}}class tf{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class nf{constructor(e,t){this.targetId=e,this.me=t}}class rf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vu.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class sf{constructor(){this.fe=0,this.ge=lf(),this.pe=vu.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=rd(),t=rd(),n=rd();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Nl()}})),new ef(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=lf()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Al(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class of{constructor(e){this.Le=e,this.Be=new Map,this.ke=Qh(),this.qe=af(),this.Qe=new cu(Kl)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Nl()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Th(i))if(0===n){const e=new ec(i.path);this.Ue(t,e,Yu.newNoDocument(e,Jl.min()))}else Al(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==Hd||Hd.et(function(e,t,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=_u(n).toUint8Array()}catch(e){if(e instanceof gu)return xl("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new $d(s,r,i)}catch(e){return xl(e instanceof Xd?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Th(i.target)){const t=new ec(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,Yu.newNoDocument(t,e))}n.be&&(t.set(r,n.Ce()),n.ve())}}));let n=rd();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new Zd(e,t,this.Qe,this.ke,n);return this.ke=Qh(),this.qe=af(),this.Qe=new cu(Kl),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new sf,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new du(Kl),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Tl("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new sf),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function af(){return new cu(ec.comparator)}function lf(){return new cu(ec.comparator)}const cf={asc:"ASCENDING",desc:"DESCENDING"},uf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hf={and:"AND",or:"OR"};class df{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ff(e,t){return e.useProto3Json||xc(t)?t:{value:t}}function pf(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function mf(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function gf(e,t){return pf(e,t.toTimestamp())}function vf(e){return Al(!!e),Jl.fromTimestamp(function(e){const t=wu(e);return new Ql(t.seconds,t.nanos)}(e))}function yf(e,t){return wf(e,t).canonicalString()}function wf(e,t){const n=function(e){return new $l(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function bf(e){const t=$l.fromString(e);return Al(zf(t)),t}function _f(e,t){return yf(e.databaseId,t.path)}function Sf(e,t){const n=bf(t);if(n.get(1)!==e.databaseId.projectId)throw new Pl(Dl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Pl(Dl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ec(kf(n))}function Ef(e,t){return yf(e.databaseId,t)}function If(e){const t=bf(e);return 4===t.length?$l.emptyPath():kf(t)}function Tf(e){return new $l(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function kf(e){return Al(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function xf(e,t,n){return{name:_f(e,t),fields:n.value.mapValue.fields}}function Cf(e,t,n){const r=Sf(e,t.name),i=vf(t.updateTime),s=t.createTime?vf(t.createTime):Jl.min(),o=new Qu({mapValue:{fields:t.fields}}),a=Yu.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Nf(e,t){let n;if(t instanceof Rd)n={update:xf(e,t.key,t.value)};else if(t instanceof Md)n={delete:_f(e,t.key)};else if(t instanceof Dd)n={update:xf(e,t.key,t.data),updateMask:Bf(t.fieldMask)};else{if(!(t instanceof Fd))return Nl();n={verify:_f(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof fd)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof pd)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof gd)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof yd)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Nl()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:gf(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Nl()}(e,t.precondition)),n}function Af(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Ed.updateTime(vf(e.updateTime)):void 0!==e.exists?Ed.exists(e.exists):Ed.none()}(t.currentDocument):Ed.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Al("REQUEST_TIME"===t.setToServerValue),n=new fd;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new pd(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new gd(e)}else"increment"in t?n=new yd(e,t.increment):Nl();const r=Zl.fromServerFormat(t.fieldPath);return new _d(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Sf(e,t.update.name),s=new Qu({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new mu(t.map((e=>Zl.fromServerFormat(e))))}(t.updateMask);return new Dd(i,s,e,n,r)}return new Rd(i,s,n,r)}if(t.delete){const r=Sf(e,t.delete);return new Md(r,n)}if(t.verify){const r=Sf(e,t.verify);return new Fd(r,n)}return Nl()}function Rf(e,t){return{documents:[Ef(e,t.path)]}}function Df(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ef(e,i);const s=function(e){if(0!==e.length)return Vf(ih.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:jf(e.field),direction:Lf(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=ff(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function Pf(e){let t=If(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Al(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Of(e);return t instanceof ih&&ah(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new eh(Uf(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,xc(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new $u(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new $u(n,t)}(n.endAt)),Ah(t,i,o,s,a,"F",l,c)}function Of(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Uf(e.unaryFilter.field);return rh.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Uf(e.unaryFilter.field);return rh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Uf(e.unaryFilter.field);return rh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Uf(e.unaryFilter.field);return rh.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Nl()}}(e):void 0!==e.fieldFilter?function(e){return rh.create(Uf(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Nl()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ih.create(e.compositeFilter.filters.map((e=>Of(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Nl()}}(e.compositeFilter.op))}(e):Nl()}function Lf(e){return cf[e]}function Mf(e){return uf[e]}function Ff(e){return hf[e]}function jf(e){return{fieldPath:e.canonicalString()}}function Uf(e){return Zl.fromServerFormat(e.fieldPath)}function Vf(e){return e instanceof rh?function(e){if("=="===e.op){if(Vu(e.value))return{unaryFilter:{field:jf(e.field),op:"IS_NAN"}};if(Uu(e.value))return{unaryFilter:{field:jf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Vu(e.value))return{unaryFilter:{field:jf(e.field),op:"IS_NOT_NAN"}};if(Uu(e.value))return{unaryFilter:{field:jf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jf(e.field),op:Mf(e.op),value:e.value}}}(e):e instanceof ih?function(e){const t=e.getFilters().map((e=>Vf(e)));return 1===t.length?t[0]:{compositeFilter:{op:Ff(e.op),filters:t}}}(e):Nl()}function Bf(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function zf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class qf{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Jl.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Jl.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:vu.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new qf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new qf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Gf{constructor(e){this.ct=e}}function Kf(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Hf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:_f(e,t.key),fields:t.data.value.mapValue.fields,updateTime:pf(e,t.version.toTimestamp()),createTime:pf(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Wf(t.version)};else{if(!t.isUnknownDocument())return Nl();r.unknownDocument={path:n.path.toArray(),version:Wf(t.version)}}return r}function Hf(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Wf(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Qf(e){const t=new Ql(e.seconds,e.nanoseconds);return Jl.fromTimestamp(t)}function Jf(e,t){const n=(t.baseMutations||[]).map((t=>Af(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Af(e.ct,t))),i=Ql.fromMillis(t.localWriteTimeMs);return new jd(t.batchId,i,n,r)}function Yf(e){const t=Qf(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Qf(e.lastLimboFreeSnapshotVersion):Jl.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Al(1===e.documents.length),Lh(Rh(If(e.documents[0])))}(e.query):function(e){return Lh(Pf(e))}(e.query),new qf(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,vu.fromBase64String(e.resumeToken))}function $f(e,t){const n=Wf(t.snapshotVersion),r=Wf(t.lastLimboFreeSnapshotVersion);let i;i=Th(t.target)?Rf(e.ct,t.target):Df(e.ct,t.target)._t;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Eh(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Xf(e){const t=Pf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?jh(t,t.limit,"L"):t}function Zf(e,t){return new Vd(t.largestBatchId,Af(e.ct,t.overlayMutation))}function ep(e,t){const n=t.path.lastSegment();return[e,Ac(t.path.popLast()),n]}function tp(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:Wf(r.readTime),documentKey:Ac(r.documentKey.path),largestBatchId:r.largestBatchId}}class np{getBundleMetadata(e,t){return rp(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:Qf(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return rp(e).put(function(e){return{bundleId:e.id,createTime:Wf(vf(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return ip(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:Xf(e.bundledQuery),readTime:Qf(e.readTime)}}(e)}))}saveNamedQuery(e,t){return ip(e).put(function(e){return{name:e.name,readTime:Wf(vf(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function rp(e){return su(e,"bundles")}function ip(e){return su(e,"namedQueries")}class sp{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new sp(e,n)}getOverlay(e,t){return op(e).get(ep(this.userId,t)).next((e=>e?Zf(this.serializer,e):null))}getOverlays(e,t){const n=Xh();return fc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Vd(t,i);r.push(this.ht(e,s))})),fc.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Ac(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(op(e).j("collectionPathOverlayIndex",r))})),fc.waitFor(i)}getOverlaysForCollection(e,t,n){const r=Xh(),i=Ac(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return op(e).U("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=Zf(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=Xh();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return op(e).J({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=Zf(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return op(e).put(function(e,t,n){const[r,i,s]=ep(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Nf(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function op(e){return su(e,"documentOverlays")}class ap{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(bu(e.integerValue));else if("doubleValue"in e){const n=bu(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Cc(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Et(t,20),"string"==typeof n&&(n=wu(n)),t.At("".concat(n.seconds||"")),t.dt(n.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(_u(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?qu(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Nl()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),ec.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function lp(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function cp(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=lp(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}ap.bt=new ap;class up{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Lt(e){const t=this.Bt(e),n=cp(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Bt(e),n=cp(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class hp{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class dp{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class fp{constructor(){this.Gt=new up,this.zt=new hp(this.Gt),this.jt=new dp(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class pp{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new pp(this.indexId,this.documentKey,this.arrayValue,n)}}function mp(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=gp(e.arrayValue,t.arrayValue),0!==n?n:(n=gp(e.directionalValue,t.directionalValue),0!==n?n:ec.comparator(e.documentKey,t.documentKey)))}function gp(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class vp{constructor(e){this.Yt=new du(((e,t)=>Zl.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(Al(e.collectionGroup===this.collectionId),this.en)return!1;const t=nc(e);if(void 0!==t&&!this.nn(t))return!1;const n=rc(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new du(Zl.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new ic(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new ic(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new ic(n.field,"asc"===n.dir?0:1)));return new tc(tc.UNKNOWN_ID,this.collectionId,t,sc.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function yp(e){var t,n;if(Al(e instanceof rh||e instanceof ih),e instanceof rh){if(e instanceof yh){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>rh.create(e.field,"==",t))))||[];return ih.create(r,"or")}return e}const r=e.filters.map((e=>yp(e)));return ih.create(r,e.op)}function wp(e){if(0===e.getFilters().length)return[];const t=Ep(yp(e));return Al(Sp(t)),bp(t)||_p(t)?[t]:t.getFilters()}function bp(e){return e instanceof rh}function _p(e){return e instanceof ih&&ah(e)}function Sp(e){return bp(e)||_p(e)||function(e){if(e instanceof ih&&oh(e)){for(const t of e.getFilters())if(!bp(t)&&!_p(t))return!1;return!0}return!1}(e)}function Ep(e){if(Al(e instanceof rh||e instanceof ih),e instanceof rh)return e;if(1===e.filters.length)return Ep(e.filters[0]);const t=e.filters.map((e=>Ep(e)));let n=ih.create(t,e.op);return n=kp(n),Sp(n)?n:(Al(n instanceof ih),Al(sh(n)),Al(n.filters.length>1),n.filters.reduce(((e,t)=>Ip(e,t))))}function Ip(e,t){let n;return Al(e instanceof rh||e instanceof ih),Al(t instanceof rh||t instanceof ih),n=e instanceof rh?t instanceof rh?function(e,t){return ih.create([e,t],"and")}(e,t):Tp(e,t):t instanceof rh?Tp(t,e):function(e,t){if(Al(e.filters.length>0&&t.filters.length>0),sh(e)&&sh(t))return hh(e,t.getFilters());const n=oh(e)?e:t,r=oh(e)?t:e,i=n.filters.map((e=>Ip(e,r)));return ih.create(i,"or")}(e,t),kp(n)}function Tp(e,t){if(sh(t))return hh(t,e.getFilters());{const n=t.filters.map((t=>Ip(e,t)));return ih.create(n,"or")}}function kp(e){if(Al(e instanceof rh||e instanceof ih),e instanceof rh)return e;const t=e.getFilters();if(1===t.length)return kp(t[0]);if(lh(e))return e;const n=t.map((e=>kp(e))),r=[];return n.forEach((t=>{t instanceof rh?r.push(t):t instanceof ih&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:ih.create(r,e.op)}class xp{constructor(){this._n=new Cp}addToCollectionParentIndex(e,t){return this._n.add(t),fc.resolve()}getCollectionParents(e,t){return fc.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return fc.resolve()}deleteFieldIndex(e,t){return fc.resolve()}deleteAllFieldIndexes(e){return fc.resolve()}createTargetIndexes(e,t){return fc.resolve()}getDocumentsMatchingTarget(e,t){return fc.resolve(null)}getIndexType(e,t){return fc.resolve(0)}getFieldIndexes(e,t){return fc.resolve([])}getNextCollectionGroupToUpdate(e){return fc.resolve(null)}getMinOffset(e,t){return fc.resolve(lc.min())}getMinOffsetFromCollectionGroup(e,t){return fc.resolve(lc.min())}updateCollectionGroup(e,t,n){return fc.resolve()}updateIndexEntries(e,t){return fc.resolve()}}class Cp{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new du($l.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new du($l.comparator)).toArray()}}const Np=new Uint8Array(0);class Ap{constructor(e,t){this.databaseId=t,this.an=new Cp,this.un=new Hh((e=>Eh(e)),((e,t)=>Ih(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:Ac(r)};return Rp(e).put(i)}return fc.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Wl(t),""],!1,!0);return Rp(e).U(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Pc(r.parent))}return n}))}addFieldIndex(e,t){const n=Pp(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Op(e);return i.next((e=>{n.put(tp(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Pp(e),r=Op(e),i=Dp(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Pp(e),n=Dp(e),r=Op(e);return t.j().next((()=>n.j())).next((()=>r.j()))}createTargetIndexes(e,t){return fc.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new vp(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Dp(e);let r=!0;const i=new Map;return fc.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=rd();const r=[];return fc.forEach(i,((i,s)=>{Tl("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Eh(t)));const o=function(e,t){const n=nc(t);if(void 0===n)return null;for(const r of kh(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of rc(t))for(const t of kh(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of rc(t)){const t=0===i.kind?xh(e,i.fieldPath,e.startAt):Ch(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new $u(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of rc(t)){const t=0===i.kind?Ch(e,i.fieldPath,e.endAt):xh(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new $u(n,r)}(s,i),u=this.hn(i,s,l),h=this.hn(i,s,c),d=this.Pn(i,s,a),f=this.In(i.indexId,o,u,l.inclusive,h,c.inclusive,d);return fc.forEach(f,(i=>n.G(i,t.limit).next((t=>{t.forEach((t=>{const n=ec.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return fc.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:wp(ih.create(e.filters,"and")).map((t=>Sh(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.Tn(t[u/l]):Np,h=this.En(e,a,n[u%l],r),d=this.dn(e,a,i[u%l],s),f=o.map((t=>this.En(e,a,t,!0)));c.push(...this.createRange(h,d,f))}return c}En(e,t,n,r){const i=new pp(e,ec.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new pp(e,ec.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new vp(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return fc.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new du(Zl.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new fp;for(const r of rc(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);ap.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new fp;return ap.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new fp;return ap.bt.Pt(Mu(this.databaseId,t),n.Ht(function(e){const t=rc(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new fp);let i=0;for(const s of rc(e)){const e=n[i++];for(const n of r)if(this.Vn(t,s.fieldPath)&&ju(e))r=this.mn(r,s,e);else{const t=n.Ht(s.kind);ap.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new fp;n.seed(e.Wt()),ap.bt.Pt(s,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof rh&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Pp(e),r=Op(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next((e=>{const t=[];return fc.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new sc(t.sequenceNumber,new lc(Qf(t.readTime),new ec(Pc(t.documentKey)),t.largestBatchId)):sc.empty(),r=e.fields.map((e=>{let[t,n]=e;return new ic(Zl.fromServerFormat(t),n)}));return new tc(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Kl(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Pp(e),i=Op(e);return this.gn(e).next((e=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>fc.forEach(t,(t=>i.put(tp(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return fc.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?fc.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),fc.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?fc.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return Dp(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return Dp(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=Dp(e);let i=new du(mp);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new pp(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new du(mp);const r=this.An(t,e);if(null==r)return n;const i=nc(t);if(null!=i){const s=e.data.field(i.fieldPath);if(ju(s))for(const i of s.arrayValue.values||[])n=n.add(new pp(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new pp(t.indexId,e.key,Np,r));return n}wn(e,t,n,r,i){Tl("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=pu(s),l=pu(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=pu(o)):t?(i(a),a=pu(s)):(a=pu(s),l=pu(o))}}(r,i,mp,(r=>{s.push(this.Sn(e,t,n,r))}),(r=>{s.push(this.bn(e,t,n,r))})),fc.waitFor(s)}gn(e){let t=1;return Op(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>mp(e,t))).filter(((e,t,n)=>!t||0!==mp(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=mp(s,e),i=mp(s,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(s),r.push(s.Jt());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Np,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Np,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return mp(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Lp)}getMinOffset(e,t){return fc.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||Nl())))).next(Lp)}}function Rp(e){return su(e,"collectionParents")}function Dp(e){return su(e,"indexEntries")}function Pp(e){return su(e,"indexConfiguration")}function Op(e){return su(e,"indexState")}function Lp(e){Al(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;cc(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new lc(t.readTime,t.documentKey,n)}const Mp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fp{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Fp(e,Fp.DEFAULT_COLLECTION_PERCENTILE,Fp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function jp(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{Al(1===a)})));const c=[];for(const u of n.mutations){const e=Mc(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return fc.waitFor(s).next((()=>c))}function Up(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Nl();t=e.noDocument}return JSON.stringify(t).length}Fp.DEFAULT_COLLECTION_PERCENTILE=10,Fp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fp.DEFAULT=new Fp(41943040,Fp.DEFAULT_COLLECTION_PERCENTILE,Fp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fp.DISABLED=new Fp(-1,0,0);class Vp{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){Al(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Vp(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zp(e).J({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=qp(e),s=zp(e);return s.add({}).next((o=>{Al("number"==typeof o);const a=new jd(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Nf(e.ct,t))),i=n.mutations.map((t=>Nf(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new du(((e,t)=>Kl(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Mc(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,Fc))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),fc.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return zp(e).get(t).next((e=>e?(Al(e.userId===this.userId),Jf(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?fc.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return zp(e).J({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Al(t.batchId>=n),i=Jf(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return zp(e).J({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zp(e).U("userMutationsIndex",t).next((e=>e.map((e=>Jf(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Lc(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return qp(e).J({range:r},((n,r,s)=>{const[o,a,l]=n,c=Pc(a);if(o===this.userId&&t.path.isEqual(c))return zp(e).get(l).next((e=>{if(!e)throw Nl();Al(e.userId===this.userId),i.push(Jf(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new du(Kl);const r=[];return t.forEach((t=>{const i=Lc(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=qp(e).J({range:s},((e,r,i)=>{const[s,o,a]=e,l=Pc(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),fc.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Lc(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new du(Kl);return qp(e).J({range:s},((e,t,i)=>{const[s,a,l]=e,c=Pc(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.Fn(e,o)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(zp(e).get(t).next((e=>{if(null===e)throw Nl();Al(e.userId===this.userId),n.push(Jf(this.serializer,e))})))})),fc.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return jp(e._e,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),fc.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return fc.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return qp(e).J({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Pc(e[1]);r.push(t)}else n.done()})).next((()=>{Al(0===r.length)}))}))}containsKey(e,t){return Bp(e,this.userId,t)}xn(e){return Gp(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Bp(e,t,n){const r=Lc(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return qp(e).J({range:s,H:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function zp(e){return su(e,"mutations")}function qp(e){return su(e,"documentMutations")}function Gp(e){return su(e,"mutationQueues")}class Kp{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Kp(0)}static Ln(){return new Kp(-1)}}class Hp{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new Kp(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>Jl.fromTimestamp(new Ql(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Wp(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(Al(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Wp(e).J(((s,o)=>{const a=Yf(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>fc.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Wp(e).J(((e,n)=>{const r=Yf(n);t(r)}))}Bn(e){return Qp(e).get("targetGlobalKey").next((e=>(Al(null!==e),e)))}kn(e,t){return Qp(e).put("targetGlobalKey",t)}qn(e,t){return Wp(e).put($f(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Eh(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Wp(e).J({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=Yf(n);Ih(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Jp(e);return t.forEach((t=>{const s=Ac(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),fc.waitFor(r)}removeMatchingKeys(e,t,n){const r=Jp(e);return fc.forEach(t,(t=>{const i=Ac(t.path);return fc.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Jp(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Jp(e);let i=rd();return r.J({range:n,H:!0},((e,t,n)=>{const r=Pc(e[1]),s=new ec(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Ac(t.path),r=IDBKeyRange.bound([n],[Wl(n)],!1,!0);let i=0;return Jp(e).J({index:"documentTargetsIndex",H:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}ot(e,t){return Wp(e).get(t).next((e=>e?Yf(e):null))}}function Wp(e){return su(e,"targets")}function Qp(e){return su(e,"targetGlobal")}function Jp(e){return su(e,"targetDocuments")}function Yp(e,t){let[n,r]=e,[i,s]=t;const o=Kl(n,i);return 0===o?Kl(r,s):o}class $p{constructor(e){this.Kn=e,this.buffer=new du(Yp),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Yp(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Xp{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){Tl("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){wc(e)?Tl("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await dc(e)}await this.zn(3e5)}))}}class Zp{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return fc.resolve(kc.oe);const n=new $p(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Tl("LruGarbageCollector","Garbage collection skipped; disabled"),fc.resolve(Mp)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Tl("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Mp):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Tl("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Il()<=wt.DEBUG&&Tl("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),fc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function em(e,t){return new Zp(e,t)}class tm{constructor(e,t){this.db=e,this.garbageCollector=em(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return nm(e,n)}removeReference(e,t,n){return nm(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return nm(e,t)}er(e,t){return function(e,t){let n=!1;return Gp(e).Y((r=>Bp(e,r,t).next((e=>(e&&(n=!0),fc.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((s,o)=>{if(o<=t){const t=this.er(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Jl.min()),Jp(e).delete(function(e){return[0,Ac(e.path)]}(s)))))}));r.push(t)}})).next((()=>fc.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return nm(e,t)}Xn(e,t){const n=Jp(e);let r,i=kc.oe;return n.J({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==kc.oe&&t(new ec(Pc(r)),i),i=l,r=a):i=kc.oe})).next((()=>{i!==kc.oe&&t(new ec(Pc(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function nm(e,t){return Jp(e).put(function(e,t){return{targetId:0,path:Ac(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class rm{constructor(){this.changes=new Hh((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yu.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?fc.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class im{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return lm(e).put(n)}removeEntry(e,t,n){return lm(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Hf(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=Yu.newInvalidDocument(t);return lm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(cm(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:Yu.newInvalidDocument(t)};return lm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(cm(t))},((e,r)=>{n={document:this.nr(t,r),size:Up(r)}})).next((()=>n))}getEntries(e,t){let n=Qh();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=Qh(),r=new cu(ec.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,Up(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return fc.resolve();let r=new du(hm);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(cm(r.first()),cm(r.last())),s=r.getIterator();let o=s.getNext();return lm(e).J({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=ec.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&hm(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.$(cm(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),Hf(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lm(e).U(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Qh();for(const i of e){const e=this.nr(ec.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(zh(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Qh();const s=um(t,n),o=um(t,lc.max());return lm(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.nr(ec.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new om(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return am(e).get("remoteDocumentGlobalKey").next((e=>(Al(!!e),e)))}tr(e,t){return am(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Cf(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=ec.fromSegments(t.noDocument.path),r=Qf(t.noDocument.readTime);n=Yu.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Nl();{const e=ec.fromSegments(t.unknownDocument.path),r=Qf(t.unknownDocument.version);n=Yu.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Ql(e[0],e[1]);return Jl.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Jl.min()))return e}return Yu.newInvalidDocument(e)}}function sm(e){return new im(e)}class om extends rm{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Hh((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new du(((e,t)=>Kl(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=Kf(this.ar.serializer,s);r=r.add(i.path.popLast());const l=Up(a);n+=l-o.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=Kf(this.ar.serializer,s.convertToNoDocument(Jl.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),fc.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function am(e){return su(e,"remoteDocumentGlobal")}function lm(e){return su(e,"remoteDocumentsV14")}function cm(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function um(e,t){const n=t.documentKey.path.toArray();return[e,Hf(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function hm(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Kl(n[s],r[s]),i)return i;return i=Kl(n.length,r.length),i||(i=Kl(n[n.length-2],r[r.length-2]),i||Kl(n[n.length-1],r[r.length-1]))}class dm{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class fm{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Cd(n.mutation,e,mu.empty(),Ql.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,rd()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rd();const r=Xh();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Yh();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Xh();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,rd())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Qh();const s=ed(),o=ed();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Dd)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Cd(o.mutation,t,o.mutation.getFieldMask(),Ql.now())):s.set(t.key,mu.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new dm(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=ed();let r=new cu(((e,t)=>e-t)),i=rd();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||mu.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||rd()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=Zh();l.forEach((e=>{if(!i.has(e)){const r=kd(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return fc.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ec.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ph(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):fc.resolve(Xh());let o=-1,a=i;return s.next((t=>fc.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?fc.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,rd()))).next((e=>({batchId:o,changes:$h(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ec(t)).next((e=>{let t=Yh();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Yh();return this.indexManager.getCollectionParents(e,i).next((o=>fc.forEach(o,(o=>{const a=function(e,t){return new Nh(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Yu.newInvalidDocument(r)))}));let n=Yh();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Cd(s.mutation,r,mu.empty(),Ql.now()),zh(t,r)&&(n=n.insert(e,r))})),n}))}}class pm{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return fc.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:vf(e.createTime)}}(t)),fc.resolve()}getNamedQuery(e,t){return fc.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:Xf(e.bundledQuery),readTime:vf(e.readTime)}}(t)),fc.resolve()}}class mm{constructor(){this.overlays=new cu(ec.comparator),this.hr=new Map}getOverlay(e,t){return fc.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Xh();return fc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),fc.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),fc.resolve()}getOverlaysForCollection(e,t,n){const r=Xh(),i=t.length+1,s=new ec(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return fc.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new cu(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Xh(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Xh(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return fc.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Vd(t,n));let i=this.hr.get(t);void 0===i&&(i=rd(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class gm{constructor(){this.Pr=new du(vm.Ir),this.Tr=new du(vm.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new vm(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new vm(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new ec(new $l([])),n=new vm(t,e),r=new vm(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new ec(new $l([])),n=new vm(t,e),r=new vm(t,e+1);let i=rd();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new vm(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class vm{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return ec.comparator(e.key,t.key)||Kl(e.pr,t.pr)}static Er(e,t){return Kl(e.pr,t.pr)||ec.comparator(e.key,t.key)}}class ym{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new du(vm.Ir)}checkEmpty(e){return fc.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new jd(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.wr=this.wr.add(new vm(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return fc.resolve(s)}lookupMutationBatch(e,t){return fc.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return fc.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return fc.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return fc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new vm(t,0),r=new vm(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),fc.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new du(Kl);return t.forEach((e=>{const t=new vm(e,0),r=new vm(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),fc.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ec.isDocumentKey(i)||(i=i.child(""));const s=new vm(new ec(i),0);let o=new du(Kl);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),fc.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Al(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return fc.forEach(t.mutations,(r=>{const i=new vm(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new vm(t,0),r=this.wr.firstAfterOrEqual(n);return fc.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,fc.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class wm{constructor(e){this.vr=e,this.docs=new cu(ec.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return fc.resolve(n?n.document.mutableCopy():Yu.newInvalidDocument(t))}getEntries(e,t){let n=Qh();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Yu.newInvalidDocument(e))})),fc.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Qh();const s=t.path,o=new ec(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||cc(ac(o),n)<=0||(r.has(o.key)||zh(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return fc.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Nl()}Fr(e,t){return fc.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new bm(this)}getSize(e){return fc.resolve(this.size)}}class bm extends rm{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),fc.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class _m{constructor(e){this.persistence=e,this.Mr=new Hh((e=>Eh(e)),Ih),this.lastRemoteSnapshotVersion=Jl.min(),this.highestTargetId=0,this.Or=0,this.Nr=new gm,this.targetCount=0,this.Lr=Kp.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),fc.resolve()}getLastRemoteSnapshotVersion(e){return fc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fc.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),fc.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),fc.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new Kp(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,fc.resolve()}updateTargetData(e,t){return this.qn(t),fc.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,fc.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),fc.waitFor(i).next((()=>r))}getTargetCount(e){return fc.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return fc.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),fc.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),fc.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),fc.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return fc.resolve(n)}containsKey(e,t){return fc.resolve(this.Nr.containsKey(t))}}class Sm{constructor(e,t){this.Br={},this.overlays={},this.kr=new kc(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new _m(this),this.indexManager=new xp,this.remoteDocumentCache=function(e){return new wm(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new Gf(t),this.$r=new pm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new ym(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Tl("MemoryPersistence","Starting transaction:",e);const r=new Em(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return fc.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class Em extends hc{constructor(e){super(),this.currentSequenceNumber=e}}class Im{constructor(e){this.persistence=e,this.zr=new gm,this.jr=null}static Hr(e){return new Im(e)}get Jr(){if(this.jr)return this.jr;throw Nl()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),fc.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),fc.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),fc.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fc.forEach(this.Jr,(n=>{const r=ec.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,Jl.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return fc.or([()=>fc.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class Tm{constructor(e){this.serializer=e}O(e,t,n,r){const i=new pc("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Oc,{unique:!0}),e.createObjectStore("documentMutations")}(e),km(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=fc.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),km(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Jl.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").U().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Oc,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return fc.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Xr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(s=s.next((()=>this.ti(i)))),n<8&&r>=8&&(s=s.next((()=>this.ni(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ri(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Jc});t.createIndex("collectionPathOverlayIndex",Yc,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",$c,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:jc});t.createIndex("documentKeyIndex",Uc),t.createIndex("collectionGroupIndex",Vc)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Kc}).createIndex("sequenceNumberIndex",Hc,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Wc}).createIndex("documentKeyIndex",Qc,{unique:!1})}(e)))),n<16&&r>=16&&(s=s.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),s}ei(e){let t=0;return e.store("remoteDocuments").J(((e,n)=>{t+=Up(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next((t=>fc.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",r).next((n=>fc.forEach(n,(n=>{Al(n.userId===t.userId);const r=Jf(this.serializer,n);return jp(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.J(((n,i)=>{const s=new $l(n),o=function(e){return[0,Ac(e)]}(s);r.push(t.get(o).next((n=>n?fc.resolve():(n=>t.put({targetId:0,path:Ac(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>fc.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:Gc});const n=t.store("collectionParents"),r=new Cp,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Ac(r)})}};return t.store("remoteDocuments").J({H:!0},((e,t)=>{const n=new $l(e);return i(n.popLast())})).next((()=>t.store("documentMutations").J({H:!0},((e,t)=>{let[n,r,s]=e;const o=Pc(r);return i(o.popLast())}))))}ri(e){const t=e.store("targets");return t.J(((e,n)=>{const r=Yf(n),i=$f(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.J(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new ec($l.fromString(e.document.name).popFirst(5)):e.noDocument?ec.fromSegments(e.noDocument.path):e.unknownDocument?ec.fromSegments(e.unknownDocument.path):Nl()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>fc.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=sm(this.serializer),i=new Sm(Im.Hr,this.serializer.ct);return n.U().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:rd();Jf(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),fc.forEach(n,((e,n)=>{const s=new _l(n),o=sp.lt(this.serializer,s),a=i.getIndexManager(s),l=Vp.lt(s,this.serializer,a,i.referenceDelegate);return new fm(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new iu(t,kc.oe),e).next()}))}))}}function km(e){e.createObjectStore("targetDocuments",{keyPath:zc}).createIndex("documentTargetsIndex",qc,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Bc,{unique:!0}),e.createObjectStore("targetGlobal")}const xm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Cm{constructor(e,t,n,r,i,s,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:16;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=s,this.document=o,this._i=l,this.ai=c,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!Cm.D())throw new Pl(Dl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tm(this,r),this.Ti=t+"main",this.serializer=new Gf(a),this.Ei=new mc(this.Ti,this.ui,new Tm(this.serializer)),this.Qr=new Hp(this.referenceDelegate,this.serializer),this.remoteDocumentCache=sm(this.serializer),this.$r=new np,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===c&&kl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pl(Dl.FAILED_PRECONDITION,xm);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new kc(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Am(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(wc(e))return Tl("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Tl("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return Nm(e).get("owner").next((e=>fc.resolve(this.Si(e))))}bi(e){return Am(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=su(e,"clientMetadata");return t.U().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return fc.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?fc.resolve(!0):Nm(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new Pl(Dl.FAILED_PRECONDITION,xm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Am(e).U().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Tl("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new iu(e,kc.oe);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Li()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>Am(e).U().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return Vp.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ap(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return sp.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){Tl("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 16===e?ru:15===e?nu:14===e?tu:13===e?eu:12===e?Zc:11===e?Xc:void Nl()}(this.ui);let s;return this.Ei.runTransaction(e,r,i,(r=>(s=new iu(r,this.kr?this.kr.next():kc.oe),"readwrite-primary"===t?this.gi(s).next((e=>!!e||this.pi(s))).next((t=>{if(!t)throw kl("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new Pl(Dl.FAILED_PRECONDITION,uc);return n(s)})).next((e=>this.wi(s).next((()=>e)))):this.ki(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ki(e){return Nm(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Pl(Dl.FAILED_PRECONDITION,xm)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Nm(e).put("owner",t)}static D(){return mc.D()}yi(e){const t=Nm(e);return t.get("owner").next((e=>this.Si(e)?(Tl("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):fc.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(kl("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;We()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Tl("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return kl("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(jA){kl("Failed to set zombie client id.",jA)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(jA){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Nm(e){return su(e,"owner")}function Am(e){return su(e,"clientMetadata")}function Rm(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Dm{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=rd(),r=rd();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Dm(e,t.fromCache,n,r)}}class Pm{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Om{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=We()?8:gc(qe())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Pm;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(Il()<=wt.DEBUG&&Tl("QueryEngine","SDK will not create cache indexes for query:",Bh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),fc.resolve()):(Il()<=wt.DEBUG&&Tl("QueryEngine","Query:",Bh(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Il()<=wt.DEBUG&&Tl("QueryEngine","The SDK decides to create cache indexes for query:",Bh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Lh(t))):fc.resolve())}ji(e,t){if(Dh(t))return fc.resolve(null);let n=Lh(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=jh(t,null,"F"),n=Lh(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=rd(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,jh(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return Dh(t)||r.isEqual(Jl.min())?fc.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?fc.resolve(null):(Il()<=wt.DEBUG&&Tl("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Bh(t)),this.es(e,s,t,oc(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new du(Gh(e));return t.forEach(((t,r)=>{zh(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return Il()<=wt.DEBUG&&Tl("QueryEngine","Using full collection scan to execute query:",Bh(t)),this.zi.getDocumentsMatchingQuery(e,t,lc.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Lm{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new cu(Kl),this.rs=new Hh((e=>Eh(e)),Ih),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fm(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function Mm(e,t,n,r){return new Lm(e,t,n,r)}async function Fm(e,t){const n=Rl(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=rd();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function jm(e){const t=Rl(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function Um(e,t,n){let r=rd(),i=rd();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Qh();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Jl.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Tl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function Vm(e,t){const n=Rl(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Bm(e,t){const n=Rl(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,fc.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new qf(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function zm(e,t,n){const r=Rl(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!wc(e))throw e;Tl("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function qm(e,t,n){const r=Rl(e);let i=Jl.min(),s=rd();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Rl(e),i=r.rs.get(n);return void 0!==i?fc.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,Lh(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:Jl.min(),n?s:rd()))).next((e=>(Hm(r,qh(t),e),{documents:e,hs:s})))))}function Gm(e,t){const n=Rl(e),r=Rl(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.ot(e,t).next((e=>e?e.target:null))))}function Km(e,t){const n=Rl(e),r=n.ss.get(t)||Jl.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,oc(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Hm(n,t,e),e)))}function Hm(e,t,n){let r=e.ss.get(t)||Jl.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function Wm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rd();const r=await Bm(e,Lh(Xf(t.bundledQuery))),i=Rl(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=vf(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(e,t);const o=r.withResumeToken(vu.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(o.targetId,o),i.Qr.updateTargetData(e,o).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function Qm(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Jm(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Ym(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class $m{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Pl(r.error.code,r.error.message))),s?new $m(e,t,r.state,i):(kl("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xm{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Pl(n.error.code,n.error.message))),i?new Xm(e,n.state,r):(kl("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=sd();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Nc(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new Zm(e,i):(kl("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class eg{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new eg(t.clientId,t.onlineState):(kl("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class tg{constructor(){this.activeTargetIds=sd()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ng{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new cu(Kl),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=Qm(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new tg),this.bs=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(Qm(this.persistenceKey,n));if(e){const t=Zm.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,n){this.Ls(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Ym(this.persistenceKey,e));if(n){const r=Xm.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ym(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Tl("SharedClientState","READ",e,t),t}setItem(e,t){Tl("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Tl("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(Tl("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void kl("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=kc.oe;if(null!=e)try{const n=JSON.parse(e);Al("number"==typeof n),t=n}catch(e){kl("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==kc.oe&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,n){const r=new $m(this.currentUser,e,t,n),i=Jm(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Bs(e){const t=Jm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=Ym(this.persistenceKey,e),i=new Xm(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return Zm.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return $m.Es(new _l(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return Xm.Es(r,t)}xs(e){return eg.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);Tl("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.eo(s,o).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=sd();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class rg{constructor(){this.no=new tg,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new tg,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ig{io(e){}shutdown(){}}class sg{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Tl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Tl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let og=null;function ag(){return null===og?og=268435456+Math.round(2147483648*Math.random()):og++,"0x"+og.toString(16)}const lg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cg{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const ug="WebChannelConnection";class hg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.wo=t+"://"+e.host,this.So="projects/".concat(n,"/databases/").concat(r),this.bo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Do(){return!1}Co(e,t,n,r,i){const s=ag(),o=this.vo(e,t.toUriEncodedString());Tl("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(a,r,i),this.Mo(e,o,a,n).then((t=>(Tl("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw xl("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}xo(e,t,n,r,i,s){return this.Co(e,t,n,r,i)}Fo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Sl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}vo(e,t){const n=lg[e];return"".concat(this.wo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,n,r){const i=ag();return new Promise(((s,o)=>{const a=new cl;a.setWithCredentials(!0),a.listenOnce(dl.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case fl.NO_ERROR:const t=a.getResponseJson();Tl(ug,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case fl.TIMEOUT:Tl(ug,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Pl(Dl.DEADLINE_EXCEEDED,"Request time out"));break;case fl.HTTP_ERROR:const n=a.getStatus();if(Tl(ug,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Dl).indexOf(t)>=0?t:Dl.UNKNOWN}(t.status);o(new Pl(e,t.message))}else o(new Pl(Dl.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Pl(Dl.UNAVAILABLE,"Connection failed."));break;default:Nl()}}finally{Tl(ug,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Tl(ug,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Oo(e,t,n){const r=ag(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=vl(),o=gl(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new ul({})),this.Fo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Tl(ug,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new cg({lo:t=>{d?Tl(ug,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Tl(ug,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Tl(ug,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,hl.EventType.OPEN,(()=>{d||(Tl(ug,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.mo())})),p(u,hl.EventType.CLOSE,(()=>{d||(d=!0,Tl(ug,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.po())})),p(u,hl.EventType.ERROR,(t=>{d||(d=!0,xl(ug,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.po(new Pl(Dl.UNAVAILABLE,"The operation could not be completed")))})),p(u,hl.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Al(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Tl(ug,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=zd[e];if(void 0!==t)return Kd(t)}(t),i=o.message;void 0===n&&(n=Dl.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.po(new Pl(n,i)),u.close()}else Tl(ug,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.yo(i)}})),p(o,ml.STAT_EVENT,(t=>{t.stat===pl.PROXY?Tl(ug,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===pl.NOPROXY&&Tl(ug,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.fo()}),0),f}}function dg(){return"undefined"!=typeof window?window:null}function fg(){return"undefined"!=typeof document?document:null}function pg(e){return new df(e,!0)}class mg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.No=n,this.Lo=r,this.Bo=i,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),r=Math.max(0,t-n);r>0&&Tl("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Qo=Date.now(),e()))),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class gg{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.Go=n,this.zo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new mg(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,(()=>this.r_())))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,t){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,4!==e?this.Yo.reset():t&&t.code===Dl.RESOURCE_EXHAUSTED?(kl(t.toString()),kl("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===Dl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(t)}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.jo===t&&this.u_(n,r)}),(t=>{e((()=>{const e=new Pl(Dl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.c_(e)}))}))}u_(e,t){const n=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po((()=>{n((()=>this.listener.Po()))})),this.stream.To((()=>{n((()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,(()=>(this.Xo()&&(this.state=3),Promise.resolve()))),this.listener.To())))})),this.stream.Ao((e=>{n((()=>this.c_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}e_(){this.state=5,this.Yo.$o((async()=>{this.state=0,this.start()}))}c_(e){return Tl("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget((()=>this.jo===e?t():(Tl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class vg extends gg{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Nl()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Al(void 0===t||"string"==typeof t),vu.fromBase64String(t||"")):(Al(void 0===t||t instanceof Buffer||t instanceof Uint8Array),vu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Dl.UNKNOWN:Kd(e.code);return new Pl(t,e.message||"")}(o);n=new rf(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Sf(e,r.document.name),s=vf(r.document.updateTime),o=r.document.createTime?vf(r.document.createTime):Jl.min(),a=new Qu({mapValue:{fields:r.document.fields}}),l=Yu.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new tf(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Sf(e,r.document),s=r.readTime?vf(r.readTime):Jl.min(),o=Yu.newNoDocument(i,s),a=r.removedTargetIds||[];n=new tf([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Sf(e,r.document),s=r.removedTargetIds||[];n=new tf([],s,i,null)}else{if(!("filter"in t))return Nl();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Bd(r,i),o=e.targetId;n=new nf(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Jl.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Jl.min():t.readTime?vf(t.readTime):Jl.min()}(e);return this.listener.h_(t,n)}P_(e){const t={};t.database=Tf(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Th(r)?{documents:Rf(e,r)}:{query:Df(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=mf(e,t.resumeToken);const r=ff(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Jl.min())>0){n.readTime=pf(e,t.snapshotVersion.toTimestamp());const r=ff(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Nl()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.i_(t)}I_(e){const t={};t.database=Tf(this.serializer),t.removeTarget=e,this.i_(t)}}class yg extends gg{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(Al(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function(e,t){return e&&e.length>0?(Al(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?vf(e.updateTime):vf(t);return n.isEqual(Jl.min())&&(n=vf(t)),new Sd(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=vf(e.commitTime);return this.listener.A_(n,t)}return Al(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=Tf(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Nf(this.serializer,e)))};this.i_(t)}}class wg extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new Pl(Dl.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,n,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Co(e,wf(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Dl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Pl(Dl.UNKNOWN,e.toString())}))}xo(e,t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.xo(e,wf(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Dl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Pl(Dl.UNKNOWN,e.toString())}))}terminate(){this.m_=!0,this.connection.terminate()}}class bg{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve()))))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.y_?(kl(t),this.y_=!1):Tl("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class _g{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.io((e=>{n.enqueueAndForget((async()=>{Ag(this)&&(Tl("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Rl(e);t.M_.add(4),await Eg(t),t.N_.set("Unknown"),t.M_.delete(4),await Sg(t)}(this))}))})),this.N_=new bg(n,r)}}async function Sg(e){if(Ag(e))for(const t of e.x_)await t(!0)}async function Eg(e){for(const t of e.x_)await t(!1)}function Ig(e,t){const n=Rl(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),Ng(n)?Cg(n):Jg(n).Xo()&&kg(n,t))}function Tg(e,t){const n=Rl(e),r=Jg(n);n.F_.delete(t),r.Xo()&&xg(n,t),0===n.F_.size&&(r.Xo()?r.n_():Ag(n)&&n.N_.set("Unknown"))}function kg(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Jl.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Jg(e).P_(t)}function xg(e,t){e.L_.xe(t),Jg(e).I_(t)}function Cg(e){e.L_=new of({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Jg(e).start(),e.N_.w_()}function Ng(e){return Ag(e)&&!Jg(e).Zo()&&e.F_.size>0}function Ag(e){return 0===Rl(e).M_.size}function Rg(e){e.L_=void 0}async function Dg(e){e.N_.set("Online")}async function Pg(e){e.F_.forEach(((t,n)=>{kg(e,t)}))}async function Og(e,t){Rg(e),Ng(e)?(e.N_.D_(t),Cg(e)):e.N_.set("Unknown")}async function Lg(e,t,n){if(e.N_.set("Online"),t instanceof rf&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.F_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.F_.delete(r),e.L_.removeTarget(r))}(e,t)}catch(n){Tl("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Mg(e,n)}else if(t instanceof tf?e.L_.Ke(t):t instanceof nf?e.L_.He(t):e.L_.We(t),!n.isEqual(Jl.min()))try{const t=await jm(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.L_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.F_.get(r);i&&e.F_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.F_.get(t);if(!r)return;e.F_.set(t,r.withResumeToken(vu.EMPTY_BYTE_STRING,r.snapshotVersion)),xg(e,t);const i=new qf(r.target,t,n,r.sequenceNumber);kg(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Tl("RemoteStore","Failed to raise snapshot:",t),await Mg(e,t)}}async function Mg(e,t,n){if(!wc(t))throw t;e.M_.add(1),await Eg(e),e.N_.set("Offline"),n||(n=()=>jm(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Tl("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await Sg(e)}))}function Fg(e,t){return t().catch((n=>Mg(e,n,t)))}async function jg(e){const t=Rl(e),n=Yg(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;Ug(t);)try{const e=await Vm(t.localStore,r);if(null===e){0===t.v_.length&&n.n_();break}r=e.batchId,Vg(t,e)}catch(e){await Mg(t,e)}Bg(t)&&zg(t)}function Ug(e){return Ag(e)&&e.v_.length<10}function Vg(e,t){e.v_.push(t);const n=Yg(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function Bg(e){return Ag(e)&&!Yg(e).Zo()&&e.v_.length>0}function zg(e){Yg(e).start()}async function qg(e){Yg(e).V_()}async function Gg(e){const t=Yg(e);for(const n of e.v_)t.d_(n.mutations)}async function Kg(e,t,n){const r=e.v_.shift(),i=Ud.from(r,t,n);await Fg(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await jg(e)}async function Hg(e,t){t&&Yg(e).E_&&await async function(e,t){if(function(e){return Gd(e)&&e!==Dl.ABORTED}(t.code)){const n=e.v_.shift();Yg(e).t_(),await Fg(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await jg(e)}}(e,t),Bg(e)&&zg(e)}async function Wg(e,t){const n=Rl(e);n.asyncQueue.verifyOperationInProgress(),Tl("RemoteStore","RemoteStore received new credentials");const r=Ag(n);n.M_.add(3),await Eg(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await Sg(n)}async function Qg(e,t){const n=Rl(e);t?(n.M_.delete(2),await Sg(n)):t||(n.M_.add(2),await Eg(n),n.N_.set("Unknown"))}function Jg(e){return e.B_||(e.B_=function(e,t,n){const r=Rl(e);return r.f_(),new vg(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Dg.bind(null,e),To:Pg.bind(null,e),Ao:Og.bind(null,e),h_:Lg.bind(null,e)}),e.x_.push((async t=>{t?(e.B_.t_(),Ng(e)?Cg(e):e.N_.set("Unknown")):(await e.B_.stop(),Rg(e))}))),e.B_}function Yg(e){return e.k_||(e.k_=function(e,t,n){const r=Rl(e);return r.f_(),new yg(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:qg.bind(null,e),Ao:Hg.bind(null,e),R_:Gg.bind(null,e),A_:Kg.bind(null,e)}),e.x_.push((async t=>{t?(e.k_.t_(),await jg(e)):(await e.k_.stop(),e.v_.length>0&&(Tl("RemoteStore","Stopping write stream with ".concat(e.v_.length," pending writes")),e.v_=[]))}))),e.k_}class $g{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Ol,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new $g(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pl(Dl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xg(e,t){if(kl("AsyncQueue","".concat(t,": ").concat(e)),wc(e))return new Pl(Dl.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Zg{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ec.comparator(t.key,n.key):(e,t)=>ec.comparator(e.key,t.key),this.keyedMap=Yh(),this.sortedSet=new cu(this.comparator)}static emptySet(e){return new Zg(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zg))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Zg;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class ev{constructor(){this.q_=new cu(ec.comparator)}track(e){const t=e.doc.key,n=this.q_.get(t);n?0!==e.type&&3===n.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==n.type?this.q_=this.q_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.q_=this.q_.remove(t):1===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Nl():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class tv{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new tv(e,t,Zg.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class nv{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some((e=>e.G_()))}}class rv{constructor(){this.queries=new Hh((e=>Vh(e)),Uh),this.onlineState="Unknown",this.z_=new Set}}async function iv(e,t){const n=Rl(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new nv,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Xg(e,"Initialization of query '".concat(Bh(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&lv(n)}async function sv(e,t){const n=Rl(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.U_.indexOf(t);e>=0&&(s.U_.splice(e,1),0===s.U_.length?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ov(e,t){const n=Rl(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.U_)e.H_(i)&&(r=!0);t.K_=i}}r&&lv(n)}function av(e,t,n){const r=Rl(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function lv(e){e.z_.forEach((e=>{e.next()}))}var cv,uv;(uv=cv||(cv={})).J_="default",uv.Cache="cache";class hv{constructor(e,t,n){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new tv(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache)return!0;if(!this.G_())return!0;const n="Offline"!==t;return(!this.options.ra||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}na(e){e=tv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==cv.Cache}}class dv{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class fv{constructor(e){this.serializer=e}Ps(e){return Sf(this.serializer,e)}Is(e){return e.metadata.exists?Cf(this.serializer,e.document,!1):Yu.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return vf(e)}}class pv{constructor(e,t,n){this.oa=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=mv(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const n=$l.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,n=new fv(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||rd()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Rl(e);let s=rd(),o=Qh();for(const c of n){const e=t.Ps(c.metadata.name);c.document&&(s=s.add(e));const n=t.Is(c);n.setReadTime(t.Ts(c.metadata.readTime)),o=o.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=await Bm(i,function(e){return Lh(Rh($l.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Um(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Qr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new fv(this.serializer),this.documents,this.oa.id),t=this.aa(this.documents);for(const n of this.queries)await Wm(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}}}function mv(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class gv{constructor(e){this.key=e}}class vv{constructor(e){this.key=e}}class yv{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=rd(),this.mutatedKeys=rd(),this.Ia=Gh(e),this.Ta=new Zg(this.Ia)}get Ea(){return this.la}da(e,t){const n=t?t.Aa:new ev,r=t?t.Ta:this.Ta;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=zh(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ra(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Ia(u,a)>0||l&&this.Ia(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ta:s,Aa:n,Xi:o,mutatedKeys:i}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const s=e.Aa.Q_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nl()}};return n(e)-n(t)}(e.type,t.type)||this.Ia(e.doc,t.doc))),this.Va(n),r=null!=r&&r;const o=t&&!r?this.ma():[],a=0===this.Pa.size&&this.current&&!r?1:0,l=a!==this.ha;return this.ha=a,0!==s.length||l?{snapshot:new tv(this.query,e.Ta,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:o}:{fa:o}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new ev,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach((e=>this.la=this.la.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.la=this.la.delete(e))),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=rd(),this.Ta.forEach((e=>{this.ga(e.key)&&(this.Pa=this.Pa.add(e.key))}));const t=[];return e.forEach((e=>{this.Pa.has(e)||t.push(new vv(e))})),this.Pa.forEach((n=>{e.has(n)||t.push(new gv(n))})),t}pa(e){this.la=e.hs,this.Pa=rd();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return tv.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class wv{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class bv{constructor(e){this.key=e,this.wa=!1}}class _v{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new Hh((e=>Vh(e)),Uh),this.Da=new Map,this.Ca=new Set,this.va=new cu(ec.comparator),this.Fa=new Map,this.Ma=new gm,this.xa={},this.Oa=new Map,this.Na=Kp.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function Sv(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=$v(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await Iv(r,t,n,!0),i}async function Ev(e,t){const n=$v(e);await Iv(n,t,!0,!1)}async function Iv(e,t,n,r){const i=await Bm(e.localStore,Lh(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await Tv(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Ig(e.remoteStore,i),a}async function Tv(e,t,n,r,i){e.Ba=(t,n,r)=>async function(e,t,n,r){let i=t.view.da(n);i.Xi&&(i=await qm(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.da(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Fv(e,t.targetId,a.fa),a.snapshot}(e,t,n,r);const s=await qm(e.localStore,t,!0),o=new yv(t,s.hs),a=o.da(s.documents),l=ef.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);Fv(e,n,c.fa);const u=new wv(t,n,o);return e.ba.set(t,u),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),c.snapshot}async function kv(e,t,n){const r=Rl(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter((e=>!Uh(e,t)))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await zm(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Tg(r.remoteStore,i.targetId),Lv(r,i.targetId)})).catch(dc)):(Lv(r,i.targetId),await zm(r.localStore,i.targetId,!0))}async function xv(e,t){const n=Rl(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Tg(n.remoteStore,r.targetId))}async function Cv(e,t){const n=Rl(e);try{const e=await function(e,t){const n=Rl(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(vu.EMPTY_BYTE_STRING,Jl.min()).withLastLimboFreeSnapshotVersion(Jl.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Qr.updateTargetData(e,c))}));let a=Qh(),l=rd();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Um(e,s,t.documentUpdates).next((e=>{a=e.cs,l=e.ls}))),!r.isEqual(Jl.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return fc.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Fa.get(t);r&&(Al(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.wa=!0:e.modifiedDocuments.size>0?Al(r.wa):e.removedDocuments.size>0&&(Al(r.wa),r.wa=!1))})),await Vv(n,e,t)}catch(e){await dc(e)}}function Nv(e,t,n){const r=Rl(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ba.forEach(((n,r)=>{const i=r.view.j_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Rl(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.U_)i.j_(t)&&(r=!0)})),r&&lv(n)}(r.eventManager,t),e.length&&r.Sa.h_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Av(e,t,n){const r=Rl(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let e=new cu(ec.comparator);e=e.insert(s,Yu.newNoDocument(s,Jl.min()));const n=rd().add(s),i=new Zd(Jl.min(),new Map,new cu(Kl),e,n);await Cv(r,i),r.va=r.va.remove(s),r.Fa.delete(t),Uv(r)}else await zm(r.localStore,t,!1).then((()=>Lv(r,t,n))).catch(dc)}async function Rv(e,t){const n=Rl(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Rl(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=fc.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Al(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=rd();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Ov(n,r,null),Pv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Vv(n,e)}catch(e){await dc(e)}}async function Dv(e,t,n){const r=Rl(e);try{const e=await function(e,t){const n=Rl(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Al(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Ov(r,t,n),Pv(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Vv(r,e)}catch(n){await dc(n)}}function Pv(e,t){(e.Oa.get(t)||[]).forEach((e=>{e.resolve()})),e.Oa.delete(t)}function Ov(e,t,n){const r=Rl(e);let i=r.xa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function Lv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach((t=>{e.Ma.containsKey(t)||Mv(e,t)}))}function Mv(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);null!==n&&(Tg(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),Uv(e))}function Fv(e,t,n){for(const r of n)r instanceof gv?(e.Ma.addReference(r.key,t),jv(e,r)):r instanceof vv?(Tl("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||Mv(e,r.key)):Nl()}function jv(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(Tl("SyncEngine","New document in limbo: "+n),e.Ca.add(r),Uv(e))}function Uv(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new ec($l.fromString(t)),r=e.Na.next();e.Fa.set(r,new bv(n)),e.va=e.va.insert(n,r),Ig(e.remoteStore,new qf(Lh(Rh(n.path)),r,"TargetPurposeLimboResolution",kc.oe))}}async function Vv(e,t,n){const r=Rl(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach(((e,a)=>{o.push(r.Ba(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Dm.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Sa.h_(i),await async function(e,t){const n=Rl(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>fc.forEach(t,(t=>fc.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>fc.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!wc(e))throw e;Tl("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function Bv(e,t){const n=Rl(e);if(!n.currentUser.isEqual(t)){Tl("SyncEngine","User change. New user:",t.toKey());const e=await Fm(n.localStore,t);n.currentUser=t,function(e,t){e.Oa.forEach((e=>{e.forEach((e=>{e.reject(new Pl(Dl.CANCELLED,t))}))})),e.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Vv(n,e.us)}}function zv(e,t){const n=Rl(e),r=n.Fa.get(t);if(r&&r.wa)return rd().add(r.key);{let e=rd();const r=n.Da.get(t);if(!r)return e;for(const t of r){const r=n.ba.get(t);e=e.unionWith(r.view.Ea)}return e}}async function qv(e,t){const n=Rl(e),r=await qm(n.localStore,t.query,!0),i=t.view.pa(r);return n.isPrimaryClient&&Fv(n,t.targetId,i.fa),i}async function Gv(e,t){const n=Rl(e);return Km(n.localStore,t).then((e=>Vv(n,e)))}async function Kv(e,t,n,r){const i=Rl(e),s=await function(e,t){const n=Rl(e),r=Rl(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):fc.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await jg(i.remoteStore):"acknowledged"===n||"rejected"===n?(Ov(i,t,r||null),Pv(i,t),function(e,t){Rl(Rl(e).mutationQueue).Mn(t)}(i.localStore,t)):Nl(),await Vv(i,s)):Tl("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Hv(e,t,n){const r=Rl(e),i=[],s=[];for(const o of t){let e;const t=r.Da.get(o);if(t&&0!==t.length){e=await Bm(r.localStore,Lh(t[0]));for(const e of t){const t=r.ba.get(e),n=await qv(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await Gm(r.localStore,o);e=await Bm(r.localStore,t),await Tv(r,Wv(t),o,!1,e.resumeToken)}i.push(e)}return r.Sa.h_(s),i}function Wv(e){return Ah(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Qv(e){return function(e){return Rl(Rl(e).persistence).Bi()}(Rl(e).localStore)}async function Jv(e,t,n,r){const i=Rl(e);if(i.La)return void Tl("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await Km(i.localStore,qh(s[0])),r=Zd.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,vu.EMPTY_BYTE_STRING);await Vv(i,e,r);break}case"rejected":await zm(i.localStore,t,!0),Lv(i,t,r);break;default:Nl()}}async function Yv(e,t,n){const r=$v(e);if(r.La){for(const e of t){if(r.Da.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){Tl("SyncEngine","Adding an already active target "+e);continue}const t=await Gm(r.localStore,e),n=await Bm(r.localStore,t);await Tv(r,Wv(t),n.targetId,!1,n.resumeToken),Ig(r.remoteStore,n)}for(const e of n)r.Da.has(e)&&await zm(r.localStore,e,!1).then((()=>{Tg(r.remoteStore,e),Lv(r,e)})).catch(dc)}}function $v(e){const t=Rl(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Cv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=zv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Av.bind(null,t),t.Sa.h_=ov.bind(null,t.eventManager),t.Sa.ka=av.bind(null,t.eventManager),t}function Xv(e){const t=Rl(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Rv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Dv.bind(null,t),t}class Zv{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=pg(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Mm(this.persistence,new Om,e.initialUser,this.serializer)}createPersistence(e){return new Sm(Im.Hr,this.serializer)}createSharedClientState(e){return new rg}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class ey extends Zv{constructor(e,t,n){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Qa.initialize(this,e),await Xv(this.Qa.syncEngine),await jg(this.Qa.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Mm(this.persistence,new Om,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Xp(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Tc(t,this.persistence);return new Ic(e.asyncQueue,n)}createPersistence(e){const t=Rm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Fp.withCacheSize(this.cacheSizeBytes):Fp.DEFAULT;return new Cm(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,dg(),fg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new rg}}class ty extends ey{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Qa.syncEngine;this.sharedClientState instanceof ng&&(this.sharedClientState.syncEngine={Zs:Kv.bind(null,t),Xs:Jv.bind(null,t),eo:Yv.bind(null,t),Bi:Qv.bind(null,t),Ys:Gv.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=Rl(e);if($v(n),Xv(n),!0===t&&!0!==n.La){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Hv(n,e.toArray());n.La=!0,await Qg(n.remoteStore,!0);for(const r of t)Ig(n.remoteStore,r)}else if(!1===t&&!1!==n.La){const e=[];let t=Promise.resolve();n.Da.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Lv(n,i),zm(n.localStore,i,!0)))),Tg(n.remoteStore,i)})),await t,await Hv(n,e),function(e){const t=Rl(e);t.Fa.forEach(((e,n)=>{Tg(t.remoteStore,n)})),t.Ma.mr(),t.Fa=new Map,t.va=new cu(ec.comparator)}(n),n.La=!1,await Qg(n.remoteStore,!1)}}(this.Qa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=dg();if(!ng.D(t))throw new Pl(Dl.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Rm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ng(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class ny{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Nv(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Bv.bind(null,this.syncEngine),await Qg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new rv}createDatastore(e){const t=pg(e.databaseInfo.databaseId),n=function(e){return new hg(e)}(e.databaseInfo);return function(e,t,n,r){return new wg(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new _g(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Nv(this.syncEngine,e,0)),sg.D()?new sg:new ig)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new _v(e,t,n,r,i,s);return o&&(a.La=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Rl(e);Tl("RemoteStore","RemoteStore shutting down."),t.M_.add(5),await Eg(t),t.O_.shutdown(),t.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function ry(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class iy{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):kl("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class sy{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new Ol,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then((e=>{e&&e.sa()?this.metadata.resolve(e.ia.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ia))))}),(e=>this.metadata.reject(e)))}close(){return this.Ua.cancel()}async getMetadata(){return this.metadata.promise}async qa(){return await this.getMetadata(),this.Ga()}async Ga(){const e=await this.za();if(null===e)return null;const t=this.Wa.decode(e),n=Number(t);isNaN(n)&&this.ja("length string (".concat(t,") is not valid number"));const r=await this.Ha(n);return new dv(JSON.parse(r),e.length+n)}Ja(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async za(){for(;this.Ja()<0&&!await this.Ya(););if(0===this.buffer.length)return null;const e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ha(e){for(;this.buffer.length<e;)await this.Ya()&&this.ja("Reached the end of bundle when more is expected.");const t=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ja(e){throw this.Ua.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ya(){const e=await this.Ua.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class oy{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Pl(Dl.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Rl(e),r={documents:t.map((e=>_f(n.serializer,e)))},i=await n.xo("BatchGetDocuments",n.serializer.databaseId,$l.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Al(!!t.found),t.found.name,t.found.updateTime;const n=Sf(e,t.found.name),r=vf(t.found.updateTime),i=t.found.createTime?vf(t.found.createTime):Jl.min(),s=new Qu({mapValue:{fields:t.found.fields}});return Yu.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Al(!!t.missing),Al(!!t.readTime);const n=Sf(e,t.missing),r=vf(t.readTime);return Yu.newNoDocument(n,r)}(e,t):Nl()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());Al(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Md(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=ec.fromPath(t);this.mutations.push(new Fd(n,this.precondition(n)))})),await async function(e,t){const n=Rl(e),r={writes:t.map((e=>Nf(n.serializer,e)))};await n.Co("Commit",n.serializer.databaseId,$l.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Nl();t=Jl.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Pl(Dl.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Jl.min())?Ed.exists(!1):Ed.updateTime(t):Ed.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Jl.min()))throw new Pl(Dl.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ed.updateTime(t)}return Ed.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ay{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Za=n.maxAttempts,this.Yo=new mg(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o((async()=>{const e=new oy(this.datastore),t=this.tu(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.nu(e)}))))})).catch((e=>{this.nu(e)}))}))}tu(e){try{const t=this.updateFunction(e);return!xc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget((()=>(this.eu(),Promise.resolve())))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Gd(t)}return!1}}class ly{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=_l.UNAUTHENTICATED,this.clientId=Gl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Tl("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Tl("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pl(Dl.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ol;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Xg(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function cy(e,t){e.asyncQueue.verifyOperationInProgress(),Tl("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Fm(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function uy(e,t){e.asyncQueue.verifyOperationInProgress();const n=await dy(e);Tl("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Wg(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Wg(t.remoteStore,n))),e._onlineComponents=t}function hy(e){return"FirebaseError"===e.name?e.code===Dl.FAILED_PRECONDITION||e.code===Dl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function dy(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Tl("FirestoreClient","Using user provided OfflineComponentProvider");try{await cy(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!hy(n))throw n;xl("Error using user provided cache. Falling back to memory cache: "+n),await cy(e,new Zv)}}else Tl("FirestoreClient","Using default OfflineComponentProvider"),await cy(e,new Zv);return e._offlineComponents}async function fy(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Tl("FirestoreClient","Using user provided OnlineComponentProvider"),await uy(e,e._uninitializedComponentsProvider._online)):(Tl("FirestoreClient","Using default OnlineComponentProvider"),await uy(e,new ny))),e._onlineComponents}function py(e){return dy(e).then((e=>e.persistence))}function my(e){return dy(e).then((e=>e.localStore))}function gy(e){return fy(e).then((e=>e.remoteStore))}function vy(e){return fy(e).then((e=>e.syncEngine))}function yy(e){return fy(e).then((e=>e.datastore))}async function wy(e){const t=await fy(e),n=t.eventManager;return n.onListen=Sv.bind(null,t.syncEngine),n.onUnlisten=kv.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Ev.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=xv.bind(null,t.syncEngine),n}function by(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Ol;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new iy({next:s=>{t.enqueueAndForget((()=>sv(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Pl(Dl.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Pl(Dl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new hv(Rh(n.path),s,{includeMetadataChanges:!0,ra:!0});return iv(e,o)}(await wy(e),e.asyncQueue,t,n,r))),r.promise}function _y(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Ol;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new iy({next:n=>{t.enqueueAndForget((()=>sv(e,o))),n.fromCache&&"server"===r.source?i.reject(new Pl(Dl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new hv(n,s,{includeMetadataChanges:!0,ra:!0});return iv(e,o)}(await wy(e),e.asyncQueue,t,n,r))),r.promise}function Sy(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Wd().encode(e):e,function(e,t){return new sy(e,t)}(function(e,t){if(e instanceof Uint8Array)return ry(e,t);if(e instanceof ArrayBuffer)return ry(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,pg(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Rl(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Rl(e),r=vf(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(mv(r));const i=new pv(r,e.localStore,t.serializer);let s=await t.qa();for(;s;){const e=await i._a(s);e&&n._updateProgress(e),s=await t.qa()}const o=await i.complete();return await Vv(e,o.ca,void 0),await function(e,t){const n=Rl(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.ua)}catch(e){return xl("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await vy(e),i,r)}))}function Ey(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Iy=new Map;function Ty(e,t,n){if(!n)throw new Pl(Dl.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function ky(e,t,n,r){if(!0===t&&!0===r)throw new Pl(Dl.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function xy(e){if(!ec.isDocumentKey(e))throw new Pl(Dl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Cy(e){if(ec.isDocumentKey(e))throw new Pl(Dl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ny(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Nl()}function Ay(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Pl(Dl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ny(e);throw new Pl(Dl.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Ry(e,t){if(t<=0)throw new Pl(Dl.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Dy{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Pl(Dl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pl(Dl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ky("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ey(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Pl(Dl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Pl(Dl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Pl(Dl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Py{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dy({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Pl(Dl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pl(Dl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dy(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ml;switch(e.type){case"firstParty":return new Vl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Pl(Dl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Iy.get(e);t&&(Tl("ComponentProvider","Removing Datastore"),Iy.delete(e),t.terminate())}(this),Promise.resolve()}}function Oy(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Ay(e,Py))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&xl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=_l.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Oe(JSON.stringify({alg:"none",type:"JWT"})),Oe(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Pl(Dl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new _l(s)}e._authCredentials=new Fl(new Ll(t,n))}}class Ly{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ly(this.firestore,e,this._query)}}class My{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fy(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new My(this.firestore,e,this._key)}}class Fy extends Ly{constructor(e,t,n){super(e,t,Rh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new My(this.firestore,null,new ec(e))}withConverter(e){return new Fy(this.firestore,e,this._path)}}function jy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ft(e),Ty("collection","path",t),e instanceof Py){const n=$l.fromString(t,...r);return Cy(n),new Fy(e,null,n)}{if(!(e instanceof My||e instanceof Fy))throw new Pl(Dl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child($l.fromString(t,...r));return Cy(n),new Fy(e.firestore,null,n)}}function Uy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ft(e),1===arguments.length&&(t=Gl.newId()),Ty("doc","path",t),e instanceof Py){const n=$l.fromString(t,...r);return xy(n),new My(e,null,new ec(n))}{if(!(e instanceof My||e instanceof Fy))throw new Pl(Dl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child($l.fromString(t,...r));return xy(n),new My(e.firestore,e instanceof Fy?e.converter:null,new ec(n))}}function Vy(e,t){return e=ft(e),t=ft(t),(e instanceof My||e instanceof Fy)&&(t instanceof My||t instanceof Fy)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function By(e,t){return e=ft(e),t=ft(t),e instanceof Ly&&t instanceof Ly&&e.firestore===t.firestore&&Uh(e._query,t._query)&&e.converter===t.converter}class zy{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new mg(this,"async_queue_retry"),this.hu=()=>{const e=fg();e&&Tl("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const e=fg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=fg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise((()=>{}));const t=new Ol;return this.Iu((()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.su.push(e),this.Tu())))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(jA){if(!wc(jA))throw jA;Tl("AsyncQueue","Operation failed with retryable error: "+jA)}this.su.length>0&&this.Yo.$o((()=>this.Tu()))}}Iu(e){const t=this.iu.then((()=>(this.uu=!0,e().catch((e=>{this.au=e,this.uu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw kl("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.uu=!1,e))))));return this.iu=t,t}enqueueAfterDelay(e,t,n){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const r=$g.createAndSchedule(this,e,t,n,(e=>this.Eu(e)));return this._u.push(r),r}Pu(){this.au&&Nl()}verifyOperationInProgress(){}async du(){let e;do{e=this.iu,await e}while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then((()=>{this._u.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()}))}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function qy(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Gy{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ol,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ky extends Py{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new zy,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Wy(this),this._firestoreClient.terminate()}}function Hy(e){return e._firestoreClient||Wy(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Wy(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Tu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Ey(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new ly(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Qy(e,t,n){const r=new Ol;return e.asyncQueue.enqueue((async()=>{try{await cy(e,n),await uy(e,t),r.resolve()}catch(e){const n=e;if(!hy(n))throw n;xl("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function Jy(e){return function(e){const t=new Ol;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Rl(e);Ag(n.remoteStore)||Tl("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Rl(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Oa.get(e)||[];r.push(t),n.Oa.set(e,r)}catch(e){const n=Xg(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await vy(e),t))),t.promise}(Hy(e=Ay(e,Ky)))}function Yy(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await py(e),n=await gy(e);return t.setNetworkEnabled(!0),function(e){const t=Rl(e);return t.M_.delete(0),Sg(t)}(n)}))}(Hy(e=Ay(e,Ky)))}function $y(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await py(e),n=await gy(e);return t.setNetworkEnabled(!1),async function(e){const t=Rl(e);t.M_.add(0),await Eg(t),t.N_.set("Offline")}(n)}))}(Hy(e=Ay(e,Ky)))}function Xy(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Rl(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await my(e),t)))}(Hy(e=Ay(e,Ky)),t).then((t=>t?new Ly(e,null,t.query):null))}function Zy(e){if(e._initialized||e._terminated)throw new Pl(Dl.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ew{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ew(vu.fromBase64String(e))}catch(e){throw new Pl(Dl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new ew(vu.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class tw{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Pl(Dl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zl(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class nw{constructor(e){this._methodName=e}}class rw{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pl(Dl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pl(Dl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Kl(this._lat,e._lat)||Kl(this._long,e._long)}}const iw=/^__.*__$/;class sw{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Dd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rd(e,this.data,t,this.fieldTransforms)}}class ow{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Dd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function aw(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nl()}}class lw{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new lw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.wu(e),r}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Cw(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(aw(this.fu)&&iw.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class cw{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||pg(e)}Fu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new lw({fu:e,methodName:t,vu:n,path:Zl.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uw(e){const t=e._freezeSettings(),n=pg(e._databaseId);return new cw(e._databaseId,!!t.ignoreUndefinedProperties,n)}function hw(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);Iw("Data must be an object, but it was:",o,r);const a=Sw(r,o);let l,c;if(s.merge)l=new mu(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Tw(t,r,n);if(!o.contains(i))throw new Pl(Dl.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Nw(e,i)||e.push(i)}l=new mu(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new sw(new Qu(a),l,c)}class dw extends nw{_toFieldTransform(e){if(2!==e.fu)throw 1===e.fu?e.Du("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Du("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dw}}function fw(e,t,n){return new lw({fu:3,vu:t.settings.vu,methodName:e._methodName,yu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class pw extends nw{_toFieldTransform(e){return new _d(e.path,new fd)}isEqual(e){return e instanceof pw}}class mw extends nw{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=fw(this,e,!0),n=this.Mu.map((e=>_w(e,t))),r=new pd(n);return new _d(e.path,r)}isEqual(e){return e instanceof mw&&et(this.Mu,e.Mu)}}class gw extends nw{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=fw(this,e,!0),n=this.Mu.map((e=>_w(e,t))),r=new gd(n);return new _d(e.path,r)}isEqual(e){return e instanceof gw&&et(this.Mu,e.Mu)}}class vw extends nw{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new yd(e.serializer,ld(e.serializer,this.xu));return new _d(e.path,t)}isEqual(e){return e instanceof vw&&this.xu===e.xu}}function yw(e,t,n,r){const i=e.Fu(1,t,n);Iw("Data must be an object, but it was:",i,r);const s=[],o=Qu.empty();au(r,((e,r)=>{const a=xw(t,e,n);r=ft(r);const l=i.Su(a);if(r instanceof dw)s.push(a);else{const e=_w(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new mu(s);return new ow(o,a,i.fieldTransforms)}function ww(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[Tw(t,r,n)],l=[i];if(s.length%2!=0)throw new Pl(Dl.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(Tw(t,s[d])),l.push(s[d+1]);const c=[],u=Qu.empty();for(let d=a.length-1;d>=0;--d)if(!Nw(c,a[d])){const e=a[d];let t=l[d];t=ft(t);const n=o.Su(e);if(t instanceof dw)c.push(e);else{const r=_w(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new mu(c);return new ow(u,h,o.fieldTransforms)}function bw(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return _w(n,e.Fu(r?4:3,t))}function _w(e,t){if(Ew(e=ft(e)))return Iw("Unsupported field value:",t,e),Sw(e,t);if(e instanceof nw)return function(e,t){if(!aw(t.fu))throw t.Du("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Du("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=_w(i,t.bu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=ft(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ld(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Ql.fromDate(e);return{timestampValue:pf(t.serializer,n)}}if(e instanceof Ql){const n=new Ql(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:pf(t.serializer,n)}}if(e instanceof rw)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ew)return{bytesValue:mf(t.serializer,e._byteString)};if(e instanceof My){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Du("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:yf(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Du("Unsupported field value: ".concat(Ny(e)))}(e,t)}function Sw(e,t){const n={};return lu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):au(e,((e,r)=>{const i=_w(r,t.pu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Ew(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ql||e instanceof rw||e instanceof ew||e instanceof My||e instanceof nw)}function Iw(e,t,n){if(!Ew(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Ny(n);throw"an object"===r?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function Tw(e,t,n){if((t=ft(t))instanceof tw)return t._internalPath;if("string"==typeof t)return xw(e,t);throw Cw("Field path arguments must be of type string or ",e,!1,void 0,n)}const kw=new RegExp("[~\\*/\\[\\]]");function xw(e,t,n){if(t.search(kw)>=0)throw Cw("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new tw(...t.split("."))._internalPath}catch(r){throw Cw("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Cw(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Pl(Dl.INVALID_ARGUMENT,a+e+l)}function Nw(e,t){return e.some((e=>e.isEqual(t)))}class Aw{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new My(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Rw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Dw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Rw extends Aw{data(){return super.data()}}function Dw(e,t){return"string"==typeof t?xw(e,t):t instanceof tw?t._internalPath:t._delegate._internalPath}function Pw(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Pl(Dl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ow{}class Lw extends Ow{}function Mw(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Ow&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Uw)).length,n=e.filter((e=>e instanceof Fw)).length;if(t>1||t>0&&n>0)throw new Pl(Dl.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Fw extends Lw{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Fw(e,t,n)}_apply(e){const t=this._parse(e);return Ww(e._query,t),new Ly(e.firestore,e.converter,Fh(e._query,t))}_parse(e){const t=uw(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Pl(Dl.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Hw(o,s);const t=[];for(const n of o)t.push(Kw(r,e,n));a={arrayValue:{values:t}}}else a=Kw(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Hw(o,s),a=bw(n,t,o,"in"===s||"not-in"===s);return rh.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function jw(e,t,n){const r=t,i=Dw("where",e);return Fw._create(i,r,n)}class Uw extends Ow{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Uw(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:ih.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Ww(n,i),n=Fh(n,i)}(e._query,t),new Ly(e.firestore,e.converter,Fh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Vw extends Lw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Vw(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Pl(Dl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Pl(Dl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new eh(t,n)}(e._query,this._field,this._direction);return new Ly(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Nh(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Bw extends Lw{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Bw(e,t,n)}_apply(e){return new Ly(e.firestore,e.converter,jh(e._query,this._limit,this._limitType))}}class zw extends Lw{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new zw(e,t,n)}_apply(e){const t=Gw(e,this.type,this._docOrFields,this._inclusive);return new Ly(e.firestore,e.converter,function(e,t){return new Nh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class qw extends Lw{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new qw(e,t,n)}_apply(e){const t=Gw(e,this.type,this._docOrFields,this._inclusive);return new Ly(e.firestore,e.converter,function(e,t){return new Nh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Gw(e,t,n,r){if(n[0]=ft(n[0]),n[0]instanceof Aw)return function(e,t,n,r,i){if(!r)throw new Pl(Dl.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of Oh(e))if(o.field.isKeyField())s.push(Mu(t,r.key));else{const e=r.data.field(o.field);if(Su(e))throw new Pl(Dl.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Pl(Dl.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new $u(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=uw(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Pl(Dl.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new Pl(Dl.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Ph(e)&&-1!==s.indexOf("/"))throw new Pl(Dl.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child($l.fromString(s));if(!ec.isDocumentKey(n))throw new Pl(Dl.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new ec(n);a.push(Mu(t,i))}else{const e=bw(n,r,s);a.push(e)}}return new $u(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Kw(e,t,n){if("string"==typeof(n=ft(n))){if(""===n)throw new Pl(Dl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ph(t)&&-1!==n.indexOf("/"))throw new Pl(Dl.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child($l.fromString(n));if(!ec.isDocumentKey(r))throw new Pl(Dl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Mu(e,new ec(r))}if(n instanceof My)return Mu(e,n._key);throw new Pl(Dl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Ny(n),"."))}function Hw(e,t){if(!Array.isArray(e)||0===e.length)throw new Pl(Dl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Ww(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Pl(Dl.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Pl(Dl.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Qw{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Nu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_u(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Nl()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return au(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new rw(bu(e.latitude),bu(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Eu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Iu(e));default:return null}}convertTimestamp(e){const t=wu(e);return new Ql(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=$l.fromString(e);Al(zf(n));const r=new ku(n.get(1),n.get(3)),i=new ec(n.popFirst(5));return r.isEqual(t)||kl("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Jw(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Yw extends Qw{constructor(e){super(),this.firestore=e}convertBytes(e){return new ew(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new My(this.firestore,null,t)}}class $w{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xw extends Aw{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Zw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Dw("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Zw extends Xw{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class eb{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new $w(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Zw(this._firestore,this._userDataWriter,n.key,n,new $w(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Pl(Dl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Zw(e._firestore,e._userDataWriter,n.doc.key,n.doc,new $w(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Zw(e._firestore,e._userDataWriter,t.doc.key,t.doc,new $w(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:tb(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function tb(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nl()}}function nb(e,t){return e instanceof Xw&&t instanceof Xw?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof eb&&t instanceof eb&&e._firestore===t._firestore&&By(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class rb extends Qw{constructor(e){super(),this.firestore=e}convertBytes(e){return new ew(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new My(this.firestore,null,t)}}function ib(e){e=Ay(e,My);const t=Ay(e.firestore,Ky),n=Hy(t),r=new rb(t);return function(e,t){const n=new Ol;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Rl(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Pl(Dl.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Xg(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await my(e),t,n))),n.promise}(n,e._key).then((n=>new Xw(t,r,e._key,n,new $w(null!==n&&n.hasLocalMutations,!0),e.converter)))}function sb(e){e=Ay(e,Ly);const t=Ay(e.firestore,Ky),n=Hy(t),r=new rb(t);return Pw(e._query),_y(n,e._query).then((n=>new eb(t,r,e,n)))}function ob(e){e=Ay(e,Ly);const t=Ay(e.firestore,Ky),n=Hy(t),r=new rb(t);return function(e,t){const n=new Ol;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await qm(e,t,!0),i=new yv(t,r.hs),s=i.da(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=Xg(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await my(e),t,n))),n.promise}(n,e._query).then((n=>new eb(t,r,e,n)))}function ab(e,t,n){e=Ay(e,My);const r=Ay(e.firestore,Ky),i=Jw(e.converter,t,n);return fb(r,[hw(uw(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ed.none())])}function lb(e,t,n){e=Ay(e,My);const r=Ay(e.firestore,Ky),i=uw(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=ft(t))||t instanceof tw?ww(i,"updateDoc",e._key,t,n,a):yw(i,"updateDoc",e._key,t),fb(r,[s.toMutation(e._key,Ed.exists(!0))])}function cb(e){return fb(Ay(e.firestore,Ky),[new Md(e._key,Ed.none())])}function ub(e,t){const n=Ay(e.firestore,Ky),r=Uy(e),i=Jw(e.converter,t);return fb(n,[hw(uw(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ed.exists(!1))]).then((()=>r))}function hb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=ft(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||qy(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(qy(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof My)h=Ay(e.firestore,Ky),d=Rh(e._key.path),u={next:t=>{n[l]&&n[l](pb(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Ay(e,Ly);h=Ay(t.firestore,Ky),d=t._query;const r=new rb(h);u={next:e=>{n[l]&&n[l](new eb(h,r,t,e))},error:n[l+1],complete:n[l+2]},Pw(e._query)}return function(e,t,n,r){const i=new iy(r),s=new hv(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>iv(await wy(e),s))),()=>{i.$a(),e.asyncQueue.enqueueAndForget((async()=>sv(await wy(e),s)))}}(Hy(h),d,c,u)}function db(e,t){return function(e,t){const n=new iy(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Rl(e).z_.add(t),t.next()}(await wy(e),n))),()=>{n.$a(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Rl(e).z_.delete(t)}(await wy(e),n)))}}(Hy(e=Ay(e,Ky)),qy(t)?t:{next:t})}function fb(e,t){return function(e,t){const n=new Ol;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Xv(e);try{const e=await function(e,t){const n=Rl(e),r=Ql.now(),i=t.reduce(((e,t)=>e.add(t.key)),rd());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Qh(),l=rd();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Nd(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Dd(e.key,t,Ju(t.value.mapValue),Ed.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:$h(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.xa[e.currentUser.toKey()];r||(r=new cu(Kl)),r=r.insert(t,n),e.xa[e.currentUser.toKey()]=r}(r,e.batchId,n),await Vv(r,e.changes),await jg(r.remoteStore)}catch(e){const t=Xg(e,"Failed to persist write");n.reject(t)}}(await vy(e),t,n))),n.promise}(Hy(e),t)}function pb(e,t,n){const r=n.docs.get(t._key),i=new rb(e);return new Xw(e,i,t._key,r,new $w(n.hasPendingWrites,n.fromCache),t.converter)}const mb={maxAttempts:5};class gb{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=uw(e)}set(e,t,n){this._verifyNotCommitted();const r=vb(e,this._firestore),i=Jw(r.converter,t,n),s=hw(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Ed.none())),this}update(e,t,n){this._verifyNotCommitted();const r=vb(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=ft(t))||t instanceof tw?ww(this._dataReader,"WriteBatch.update",r._key,t,n,o):yw(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Ed.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=vb(e,this._firestore);return this._mutations=this._mutations.concat(new Md(t._key,Ed.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pl(Dl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function vb(e,t){if((e=ft(e)).firestore!==t)throw new Pl(Dl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class yb extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=uw(e)}get(e){const t=vb(e,this._firestore),n=new Yw(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Nl();const r=e[0];if(r.isFoundDocument())return new Aw(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Aw(this._firestore,n,t._key,null,t.converter);throw Nl()}))}set(e,t,n){const r=vb(e,this._firestore),i=Jw(r.converter,t,n),s=hw(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=vb(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=ft(t))||t instanceof tw?ww(this._dataReader,"Transaction.update",r._key,t,n,o):yw(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=vb(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=vb(e,this._firestore),n=new rb(this._firestore);return super.get(e).then((e=>new Xw(this._firestore,n,t._key,e._document,new $w(!1,!1),t.converter)))}}function wb(){return new pw("serverTimestamp")}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Sl=e}(Ln),kn(new pt("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Ky(new jl(e.getProvider("auth-internal")),new zl(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Pl(Dl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ku(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Bn(bl,"4.6.4",e),Bn(bl,"4.6.4","esm2017")}();function bb(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Pl("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function _b(){if("undefined"===typeof Uint8Array)throw new Pl("unimplemented","Uint8Arrays are not available in this environment.")}function Sb(){if("undefined"==typeof atob)throw new Pl("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Eb{constructor(e){this._delegate=e}static fromBase64String(e){return Sb(),new Eb(ew.fromBase64String(e))}static fromUint8Array(e){return _b(),new Eb(ew.fromUint8Array(e))}toBase64(){return Sb(),this._delegate.toBase64()}toUint8Array(){return _b(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ib(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Tb{enableIndexedDbPersistence(e,t){return function(e,t){Zy(e=Ay(e,Ky));const n=Hy(e);if(n._uninitializedComponentsProvider)throw new Pl(Dl.FAILED_PRECONDITION,"SDK cache is already specified.");xl("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new ny;return Qy(n,i,new ey(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){Zy(e=Ay(e,Ky));const t=Hy(e);if(t._uninitializedComponentsProvider)throw new Pl(Dl.FAILED_PRECONDITION,"SDK cache is already specified.");xl("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new ny;return Qy(t,r,new ty(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Pl(Dl.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Ol;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!mc.D())return Promise.resolve();const t=e+"main";await mc.delete(t)}(Rm(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class kb{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof ku||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||xl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Oy(this._delegate,e,t,n)}enableNetwork(){return Yy(this._delegate)}disableNetwork(){return $y(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,ky("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Jy(this._delegate)}onSnapshotsInSync(e){return db(this._delegate,e)}get app(){if(!this._appCompat)throw new Pl("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Vb(this,jy(this._delegate,e))}catch(jA){throw Db(jA,"collection()","Firestore.collection()")}}doc(e){try{return new Rb(this,Uy(this._delegate,e))}catch(jA){throw Db(jA,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Fb(this,function(e,t){if(e=Ay(e,Py),Ty("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Pl(Dl.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Ly(e,null,function(e){return new Nh($l.emptyPath(),e)}(t))}(this._delegate,e))}catch(jA){throw Db(jA,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Ay(e,Ky);const r=Object.assign(Object.assign({},mb),n);return function(e){if(e.maxAttempts<1)throw new Pl(Dl.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Ol;return e.asyncQueue.enqueueAndForget((async()=>{const i=await yy(e);new ay(e.asyncQueue,i,n,t,r).Xa()})),r.promise}(Hy(e),(n=>t(new yb(e,n))),r)}(this._delegate,(t=>e(new Cb(this,t))))}batch(){return Hy(this._delegate),new Nb(new gb(this._delegate,(e=>fb(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Hy(e=Ay(e,Ky)),r=new Gy;return Sy(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return Xy(this._delegate,e).then((e=>e?new Fb(this,e):null))}}class xb extends Qw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Eb(new ew(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Rb.forKey(t,this.firestore,null)}}class Cb{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new xb(e)}get(e){const t=Bb(e);return this._delegate.get(t).then((e=>new Lb(this._firestore,new Xw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=Bb(e);return n?(bb("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=Bb(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=Bb(e);return this._delegate.delete(t),this}}class Nb{constructor(e){this._delegate=e}set(e,t,n){const r=Bb(e);return n?(bb("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=Bb(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=Bb(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ab{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Zw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Mb(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Ab.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new Ab(e,new xb(e),t),r.set(t,i)),i}}Ab.INSTANCES=new WeakMap;class Rb{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new xb(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Pl("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new Rb(t,new My(t._delegate,n,new ec(e)))}static forKey(e,t,n){return new Rb(t,new My(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Vb(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Vb(this.firestore,jy(this._delegate,e))}catch(jA){throw Db(jA,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=ft(e))instanceof My&&Vy(this._delegate,e)}set(e,t){t=bb("DocumentReference.set",t);try{return t?ab(this._delegate,e,t):ab(this._delegate,e)}catch(jA){throw Db(jA,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?lb(this._delegate,e):lb(this._delegate,e,t,...r)}catch(jA){throw Db(jA,"updateDoc()","DocumentReference.update()")}}delete(){return cb(this._delegate)}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Pb(t),i=Ob(t,(e=>new Lb(this.firestore,new Xw(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return hb(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?ib(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Ay(e,My);const t=Ay(e.firestore,Ky);return by(Hy(t),e._key,{source:"server"}).then((n=>pb(t,e,n)))}(this._delegate):function(e){e=Ay(e,My);const t=Ay(e.firestore,Ky);return by(Hy(t),e._key).then((n=>pb(t,e,n)))}(this._delegate),t.then((e=>new Lb(this.firestore,new Xw(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Rb(this.firestore,e?this._delegate.withConverter(Ab.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Db(e,t,n){return e.message=e.message.replace(t,n),e}function Pb(e){for(const t of e)if("object"===typeof t&&!Ib(t))return t;return{}}function Ob(e,t){var n,r;let i;return i=Ib(e[0])?e[0]:Ib(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Lb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Rb(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return nb(this._delegate,e._delegate)}}class Mb extends Lb{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||Nl(),t}}class Fb{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new xb(e)}where(e,t,n){try{return new Fb(this.firestore,Mw(this._delegate,jw(e,t,n)))}catch(jA){throw Db(jA,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Fb(this.firestore,Mw(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Dw("orderBy",e);return Vw._create(n,t)}(e,t)))}catch(jA){throw Db(jA,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Fb(this.firestore,Mw(this._delegate,(Ry("limit",t=e),Bw._create("limit",t,"F"))))}catch(t){throw Db(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new Fb(this.firestore,Mw(this._delegate,(Ry("limitToLast",t=e),Bw._create("limitToLast",t,"L"))))}catch(t){throw Db(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new Fb(this.firestore,Mw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return zw._create("startAt",t,!0)}(...arguments)))}catch(jA){throw Db(jA,"startAt()","Query.startAt()")}}startAfter(){try{return new Fb(this.firestore,Mw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return zw._create("startAfter",t,!1)}(...arguments)))}catch(jA){throw Db(jA,"startAfter()","Query.startAfter()")}}endBefore(){try{return new Fb(this.firestore,Mw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return qw._create("endBefore",t,!1)}(...arguments)))}catch(jA){throw Db(jA,"endBefore()","Query.endBefore()")}}endAt(){try{return new Fb(this.firestore,Mw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return qw._create("endAt",t,!0)}(...arguments)))}catch(jA){throw Db(jA,"endAt()","Query.endAt()")}}isEqual(e){return By(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?ob(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Ay(e,Ly);const t=Ay(e.firestore,Ky),n=Hy(t),r=new rb(t);return _y(n,e._query,{source:"server"}).then((n=>new eb(t,r,e,n)))}(this._delegate):sb(this._delegate),t.then((e=>new Ub(this.firestore,new eb(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Pb(t),i=Ob(t,(e=>new Ub(this.firestore,new eb(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return hb(this._delegate,r,i)}withConverter(e){return new Fb(this.firestore,e?this._delegate.withConverter(Ab.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class jb{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Mb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ub{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Fb(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Mb(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new jb(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Mb(this._firestore,n))}))}isEqual(e){return nb(this._delegate,e._delegate)}}class Vb extends Fb{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Rb(this.firestore,e):null}doc(e){try{return new Rb(this.firestore,void 0===e?Uy(this._delegate):Uy(this._delegate,e))}catch(jA){throw Db(jA,"doc()","CollectionReference.doc()")}}add(e){return ub(this._delegate,e).then((e=>new Rb(this.firestore,e)))}isEqual(e){return Vy(this._delegate,e._delegate)}withConverter(e){return new Vb(this.firestore,e?this._delegate.withConverter(Ab.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Bb(e){return Ay(e,My)}class zb{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new tw(...t)}static documentId(){return new zb(Zl.keyField().canonicalString())}isEqual(e){return(e=ft(e))instanceof tw&&this._delegate._internalPath.isEqual(e._internalPath)}}class qb{constructor(e){this._delegate=e}static serverTimestamp(){const e=wb();return e._methodName="FieldValue.serverTimestamp",new qb(e)}static delete(){const e=new dw("deleteField");return e._methodName="FieldValue.delete",new qb(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new mw("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new qb(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new gw("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new qb(e)}static increment(e){const t=new vw("increment",e);return t._methodName="FieldValue.increment",new qb(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Gb={Firestore:kb,GeoPoint:rw,Timestamp:Ql,Blob:Eb,Transaction:Cb,WriteBatch:Nb,DocumentReference:Rb,DocumentSnapshot:Lb,Query:Fb,QueryDocumentSnapshot:Mb,QuerySnapshot:Ub,CollectionReference:Vb,FieldPath:zb,FieldValue:qb,setLogLevel:function(e){var t;t=e,El.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};var Kb;(function(e,t){e.INTERNAL.registerComponent(new pt("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Gb)))})(Kb=il,((e,t)=>new kb(e,t,new Tb))),Kb.registerVersion("@firebase/firestore-compat","0.3.33");const Hb={apiKey:"AIzaSyAJ8GrRz659ejvVbqQ4npHTAVgPNzpVqV8",authDomain:"jejubus-927cf.firebaseapp.com",projectId:"jejubus-927cf",storageBucket:"jejubus-927cf.appspot.com",messagingSenderId:"721392735009",appId:"1:721392735009:web:826cd21f60e57a3f226460",measurementId:"G-DZY2F0PY19"},Wb=Mn(Hb),Qb=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jn();e=ft(e);const t=xn(e,Jr);t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=xn(e,Jr);if(n.isInitialized()){const e=n.getImmediate();if(et(t,n.getOptions()))return e;throw ni.create("already-initialized")}const r=n.initialize({options:t})}(e)}(Wb),Xa(Wb));il.initializeApp(Hb);const Jb=il.firestore();var Yb=n(579);function $b(){const[e,t]=(0,s.useState)(!1),[n,r]=(0,s.useState)("");(0,s.useEffect)((()=>{const e=Po(Qb,(async e=>{if(t(!!e),e){const t=Mw(jy(Jb,"users"),jw("uid","==",e.uid)),n=await sb(t);if(n.empty)console.log("User document not found for UID:",e.uid),r("\uc774\ub984\uc5c6\uc74c");else{const e=n.docs[0].data();r(e.nickname)}}}));return()=>{e()}}),[]);return(0,Yb.jsxs)("header",{className:"flex justify-between items-center p-4 bg-gray-100 shadow-md",children:[(0,Yb.jsx)("div",{className:"flex items-center",children:(0,Yb.jsx)(Ce,{to:"/",children:(0,Yb.jsx)("div",{className:"text-2xl font-bold",children:"JEJU BUS"})})}),(0,Yb.jsx)("div",{className:"flex items-center space-x-4",children:e?(0,Yb.jsxs)(Yb.Fragment,{children:[(0,Yb.jsxs)("span",{children:[n," \ub2d8"]}),(0,Yb.jsx)("button",{onClick:()=>{(function(e){return ft(e).signOut()})(Qb).then((()=>{alert("\ub85c\uadf8\uc544\uc6c3 \ub418\uc5c8\uc2b5\ub2c8\ub2e4."),window.location.reload()})).catch((e=>{console.error("\ub85c\uadf8\uc544\uc6c3 \uc624\ub958:",e.message)}))},className:"btn",children:"\ub85c\uadf8\uc544\uc6c3"})]}):(0,Yb.jsx)(Ce,{to:"/login",className:"btn",children:"\ub85c\uadf8\uc778"})})]})}const Xb=function(e){let{imgUrl:t,link:n,children:r}=e;return(0,Yb.jsxs)(Ce,{to:n,className:"linkToPage",children:[t&&(0,Yb.jsx)("img",{src:t,alt:"img",width:50}),r]})},Zb=n.p+"static/media/busStop.63021b5bf91c1038d7a8.png",e_=n.p+"static/media/location.ab8049301c9a13253598.png",t_=n.p+"static/media/pathSearch.8a99d3fc2f265895ab4a.png",n_=n.p+"static/media/route.5f9bed963fbe563e4829.png",r_=n.p+"static/media/schedule.913f2c0c4056f028fc65.png";async function i_(e,t){try{const n=await fetch("/api1/OpenAPI/service/bis/Notice"),r=await n.text(),i=(new DOMParser).parseFromString(r,"application/xml"),s=[],o=i.getElementsByTagName("item");for(let e=0;e<o.length;e++){const t=o[e],n={NoticeID:t.querySelector("NoticeID").textContent,NoticeTitle:t.querySelector("NoticeTitle").textContent,NoticeText:t.querySelector("NoticeText").textContent,date:t.querySelector("date").textContent};s.push(n)}const a=s.sort(((e,t)=>{const n=new Date(e.date);return new Date(t.date)-n})),l=[];return a.slice(e,t).forEach((e=>{const t=e.NoticeID,n=e.NoticeTitle,r=e.NoticeText,i=e.date,s=new Date(i).toISOString().split("T")[0];l.push({noticeId:t,noticeTitle:n,noticeText:r,dateOnlyStr:s})})),l}catch(n){throw new Error(n)}}const s_=function(e){const[t,n]=(0,s.useState)([]);return(0,s.useEffect)((()=>{!async function(){try{const e=await i_(0,6);n(e)}catch(e){console.error("Error in fetchData:",e)}}()}),[]),(0,Yb.jsxs)("div",{children:[(0,Yb.jsx)($b,{}),(0,Yb.jsxs)("div",{className:"bg-[#FDE49E]",children:[(0,Yb.jsxs)("div",{className:"wrap1-head",children:[(0,Yb.jsx)("div",{className:"text-3xl text-[ #274356]",children:"\ubc84\uc2a4 \uc815\ubcf4\uac00 \ud544\uc694\ud560 \ub54c, \uc27d\uace0 \ube60\ub978"}),(0,Yb.jsx)("div",{className:"text-5xl font-bold",children:"\uc81c\uc8fc\ubc84\uc2a4"})]}),(0,Yb.jsxs)("div",{className:"wrap-1",children:[(0,Yb.jsxs)(Xb,{link:"/busStop",children:[(0,Yb.jsxs)("div",{children:[(0,Yb.jsx)("div",{children:"\uc815\ub958\uc18c\uc5d0 \ubc84\uc2a4 \uba87 \ubd84 \ub0a8\uc558\uc9c0?"}),(0,Yb.jsx)("div",{className:"text-[28px] font-bold",children:"\uc815\ub958\uc18c \uac80\uc0c9 \ubc14\ub85c\uac00\uae30"})]}),(0,Yb.jsx)("img",{src:Zb,alt:"busStopImg",width:200})]}),(0,Yb.jsxs)(Xb,{imgUrl:n_,link:"/routeSearch",children:[(0,Yb.jsxs)("div",{children:["\ud3b8\ub9ac\ud55c \ub300\uc911\uad50\ud1b5 \uc774\uc6a9\uc744 \uc704\ud55c",(0,Yb.jsx)("br",{})," \ub178\uc120 \uac80\uc0c9 \uc11c\ube44\uc2a4"]}),(0,Yb.jsx)("div",{children:"\ub178\uc120 \uac80\uc0c9"})]}),(0,Yb.jsxs)(Xb,{imgUrl:t_,link:"/pathSearch",children:[(0,Yb.jsxs)("div",{children:["\ucd9c\ubc1c\uc9c0\ubd80\ud130 \ub3c4\ucc29\uc9c0\uae4c\uc9c0,",(0,Yb.jsx)("br",{})," \uc2a4\ub9c8\ud2b8\ud55c \ub178\uc120 \uac80\uc0c9"]}),(0,Yb.jsx)("div",{children:"\uacbd\ub85c \uac80\uc0c9"})]}),(0,Yb.jsxs)(Xb,{imgUrl:e_,link:"/nearByStation",children:[(0,Yb.jsxs)("div",{children:["\uae38 \uc783\uc9c0 \ub9c8\uc138\uc694,",(0,Yb.jsx)("br",{}),"\uc8fc\ubcc0 \uc815\ub958\uc18c \uc54c\ub824\ub4dc\ub9b4\uaed8\uc694"]}),(0,Yb.jsx)("div",{children:"\uc8fc\ubcc0 \uc815\ub958\uc18c"})]}),(0,Yb.jsxs)(Xb,{imgUrl:r_,link:"/busSchedule",children:[(0,Yb.jsxs)("div",{children:["\uc2dc\uac04\uc744 \uc808\uc57d\ud558\ub294",(0,Yb.jsx)("br",{})," \uc2a4\ub9c8\ud2b8\ud55c \ubc84\uc2a4 \uc2dc\uac04\ud45c"]}),(0,Yb.jsx)("div",{children:"\ubc84\uc2a4\uc2dc\uac04\ud45c"})]})]})]}),(0,Yb.jsx)("div",{children:(0,Yb.jsx)("div",{className:"wrap-2",children:(0,Yb.jsxs)("div",{children:[(0,Yb.jsxs)("div",{className:"flex justify-between items-center border-[#eaeaea] border-b-[1px] pb-4 ",children:[(0,Yb.jsx)("div",{className:"text-2xl font-bold",children:"\uacf5\uc9c0\uc0ac\ud56d"}),(0,Yb.jsx)(Ce,{to:"/notice",className:"link",children:"\xa0\xa0\xa0\xa0"})]}),(0,Yb.jsx)("div",{className:"mt-12",children:(0,Yb.jsx)("ul",{className:"flex flex-col gap-6",children:t.map(((e,t)=>(0,Yb.jsx)(Ce,{to:"/notice/".concat(e.noticeId),state:{item:e},children:(0,Yb.jsxs)("li",{className:"flex justify-between items-center cursor-pointer",children:[(0,Yb.jsx)("div",{children:e.noticeTitle}),(0,Yb.jsx)("div",{className:"text-sm text-[#909090]\n",children:e.dateOnlyStr})]})},e.noticeId)))})})]})})}),(0,Yb.jsx)("div",{children:(0,Yb.jsxs)("div",{className:"wrap-3 text-white",children:[(0,Yb.jsxs)("div",{children:["\uc81c\uc8fc \ubc84\uc2a4\uc624\ub9e8 \uc571\uc744 \ud1b5\ud574 ",(0,Yb.jsx)("br",{}),"\uc27d\uace0 \ube60\ub978 \ub300\uc911\uad50\ud1b5\uc744 \uc774\uc6a9\ud574\ubcf8 \uacbd\ud5d8\uc744 \uc774\uc57c\uae30\ud574\uc8fc\uc138\uc694."]}),(0,Yb.jsx)("div",{className:"mt-2.5 text-base text-[#c7d2dd] mb-16",children:"\uc695\uc124, \ube44\ubc29 \uae08\uc9c0 ( \uc870\uc5b8 \ud658\uc601 )"}),(0,Yb.jsx)(Ce,{to:"/review",className:"reviewBtn",children:"\ub9ac\ubdf0 \ubc14\ub85c\uac00\uae30"})]})})]})};const o_=function(e){let{onSearch:t,children:n}=e;const[r,i]=(0,s.useState)("");return(0,Yb.jsx)("form",{children:(0,Yb.jsx)("input",{type:"text",className:"searchInput",name:"search",value:r,placeholder:n,onChange:e=>{const n=e.target.value;i(e.target.value),t(n)}})})};const a_=function(e){const[t,n]=(0,s.useState)([]),[r,i]=(0,s.useState)([]),[o,a]=(0,s.useState)([]),[l,c]=(0,s.useState)(!1),u=e=>{localStorage.setItem("routeInfo",JSON.stringify(e));const t=JSON.parse(localStorage.getItem("routeSearchHistory"))||[];if(!t.some((t=>t.ROUTE_ID===e.ROUTE_ID))){const n=[...t,e];localStorage.setItem("routeSearchHistory",JSON.stringify(n)),a(n)}},h=(0,s.useCallback)((e=>{const n=e?t.filter((t=>t.ROUTE_NUM.includes(e))):[];i(n)}),[t]);return(0,s.useEffect)((()=>{!async function(){try{const e=await fetch("/api2/api/searchBusRouteList.do"),t=await e.json();n(t)}catch(e){console.error(e)}}()}),[]),(0,s.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("routeSearchHistory"));a(e)}),[]),(0,Yb.jsxs)("div",{className:"notice-container",children:[(0,Yb.jsx)($b,{}),(0,Yb.jsxs)("div",{className:"mb-10",children:[(0,Yb.jsx)("p",{children:"\ub178\uc120 \uac80\uc0c9"}),(0,Yb.jsx)("p",{children:"\ub178\uc120 \uac80\uc0c9 \uc11c\ube44\uc2a4\ub97c \uc774\uc6a9\ud574\ubcf4\uc138\uc694."})]}),(0,Yb.jsx)(o_,{onSearch:h,children:"\ub178\uc120 \ubc88\ud638\ub97c \uac80\uc0c9\ud574\uc8fc\uc138\uc694"}),(0,Yb.jsxs)("div",{className:"routeItems",children:[r&&r.length>0?r.map(((e,t)=>(0,Yb.jsxs)(Ce,{to:"/busRouteDetail",className:"routeItem",onClick:()=>u(e),children:[(0,Yb.jsx)("div",{children:"".concat(e.ROUTE_NUM," (").concat(e.DST_NM,")")}),(0,Yb.jsx)("div",{className:"dirTip",children:"".concat(e.ORGT_NM," ~ ").concat(e.DST_NM)})]},t))):o&&o.length>0?o.map(((e,t)=>l?(0,Yb.jsxs)("div",{className:"routeItem ".concat(l?"removeHistory":""),children:[(0,Yb.jsxs)("div",{children:[(0,Yb.jsx)("div",{children:"".concat(e.ROUTE_NUM," (").concat(e.DST_NM,")")}),(0,Yb.jsx)("div",{className:"dirTip",children:"".concat(e.ORGT_NM," ~ ").concat(e.DST_NM)})]}),(0,Yb.jsx)("div",{className:"removeBtn",onClick:e=>((e,t)=>{if(window.confirm("\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){const t=[...JSON.parse(localStorage.getItem("routeSearchHistory"))||[]];t.splice(e,1),localStorage.setItem("routeSearchHistory",JSON.stringify(t)),a(t)}t.preventDefault()})(t,e),children:"X"})]},t):(0,Yb.jsx)(Ce,{to:"/busRouteDetail",className:"routeItem ".concat(l?"removeHistory":""),onClick:()=>u(e),children:(0,Yb.jsxs)("div",{children:[(0,Yb.jsx)("div",{children:"".concat(e.ROUTE_NUM," (").concat(e.DST_NM,")")}),(0,Yb.jsx)("div",{className:"dirTip",children:"".concat(e.ORGT_NM," ~ ").concat(e.DST_NM)})]})},t))):null,(0,Yb.jsx)("div",{className:"flex justify-end",children:(0,Yb.jsx)("button",{className:"rectBtn",onClick:()=>{c((e=>!e))},children:l?"\ud3b8\uc9d1 \uc644\ub8cc":"\uac80\uc0c9\uae30\ub85d \ud3b8\uc9d1"})})]})]})};var l_=function(e){const t=new Error(e);if(void 0===t.stack)try{throw t}catch(n){}return t};var c_=function(e){return!!e&&"function"===typeof e.then};var u_=function(e,t){if(null!=e)return e;throw l_(null!==t&&void 0!==t?t:"Got unexpected null or undefined")};function h_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class d_{getValue(){throw l_("BaseLoadable")}toPromise(){throw l_("BaseLoadable")}valueMaybe(){throw l_("BaseLoadable")}valueOrThrow(){throw l_('Loadable expected value, but in "'.concat(this.state,'" state'))}promiseMaybe(){throw l_("BaseLoadable")}promiseOrThrow(){throw l_('Loadable expected promise, but in "'.concat(this.state,'" state'))}errorMaybe(){throw l_("BaseLoadable")}errorOrThrow(){throw l_('Loadable expected error, but in "'.concat(this.state,'" state'))}is(e){return e.state===this.state&&e.contents===this.contents}map(e){throw l_("BaseLoadable")}}class f_ extends d_{constructor(e){super(),h_(this,"state","hasValue"),h_(this,"contents",void 0),this.contents=e}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(e){try{const t=e(this.contents);return c_(t)?y_(t):__(t)?t:g_(t)}catch(jA){return c_(jA)?y_(jA.next((()=>this.map(e)))):v_(jA)}}}class p_ extends d_{constructor(e){super(),h_(this,"state","hasError"),h_(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(e){return this}}class m_ extends d_{constructor(e){super(),h_(this,"state","loading"),h_(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(e){return y_(this.contents.then((t=>{const n=e(t);if(__(n)){const e=n;switch(e.state){case"hasValue":case"loading":return e.contents;case"hasError":throw e.contents}}return n})).catch((t=>{if(c_(t))return t.then((()=>this.map(e).contents));throw t})))}}function g_(e){return Object.freeze(new f_(e))}function v_(e){return Object.freeze(new p_(e))}function y_(e){return Object.freeze(new m_(e))}function w_(){return Object.freeze(new m_(new Promise((()=>{}))))}function b_(e){const t=(Array.isArray(e)?e:Object.getOwnPropertyNames(e).map((t=>e[t]))).map((e=>__(e)?e:c_(e)?y_(e):g_(e))),n=function(e){return e.every((e=>"hasValue"===e.state))?g_(e.map((e=>e.contents))):e.some((e=>"hasError"===e.state))?v_(u_(e.find((e=>"hasError"===e.state)),"Invalid loadable passed to loadableAll").contents):y_(Promise.all(e.map((e=>e.contents))))}(t);return Array.isArray(e)?n:n.map((t=>Object.getOwnPropertyNames(e).reduce(((e,n,r)=>({...e,[n]:t[r]})),{})))}function __(e){return e instanceof d_}const S_={of:e=>c_(e)?y_(e):__(e)?e:g_(e),error:e=>v_(e),loading:()=>w_(),all:b_,isLoadable:__};var E_={loadableWithValue:g_,loadableWithError:v_,loadableWithPromise:y_,loadableLoading:w_,loadableAll:b_,isLoadable:__,RecoilLoadable:S_},I_=E_.loadableWithValue,T_=E_.loadableWithError,k_=E_.loadableWithPromise,x_=E_.loadableLoading,C_=E_.loadableAll,N_=E_.isLoadable,A_=E_.RecoilLoadable,R_=Object.freeze({__proto__:null,loadableWithValue:I_,loadableWithError:T_,loadableWithPromise:k_,loadableLoading:x_,loadableAll:C_,isLoadable:N_,RecoilLoadable:A_});const D_={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0,RECOIL_GKS_ENABLED:new Set(["recoil_hamt_2020","recoil_sync_external_store","recoil_suppress_rerender_in_callback","recoil_memory_managament_2020"])};!function(){var e;"undefined"!==typeof process&&null!=(null===(e=process)||void 0===e?void 0:{NODE_ENV:"production",PUBLIC_URL:"/jejubus-guide",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAJ8GrRz659ejvVbqQ4npHTAVgPNzpVqV8",REACT_APP_FIREBASE_AUTH_DOMAIN:"jejubus-927cf.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"jejubus-927cf",REACT_APP_FIREBASE_STORAGE_BUCKET:"jejubus-927cf.appspot.com",REACT_APP_FIREBASE_MESSAGING_SENDERID:"721392735009",REACT_APP_FIREBASE_APP_ID:"1:721392735009:web:826cd21f60e57a3f226460",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-DZY2F0PY19",REACT_APP_GOOGLE_API_KEY:"AIzaSyD2O5f3i3-FGjddQaPrS_vNQiUdrpzUnbc"})&&(function(e,t){var n,r;const i=null===(n={NODE_ENV:"production",PUBLIC_URL:"/jejubus-guide",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAJ8GrRz659ejvVbqQ4npHTAVgPNzpVqV8",REACT_APP_FIREBASE_AUTH_DOMAIN:"jejubus-927cf.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"jejubus-927cf",REACT_APP_FIREBASE_STORAGE_BUCKET:"jejubus-927cf.appspot.com",REACT_APP_FIREBASE_MESSAGING_SENDERID:"721392735009",REACT_APP_FIREBASE_APP_ID:"1:721392735009:web:826cd21f60e57a3f226460",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-DZY2F0PY19",REACT_APP_GOOGLE_API_KEY:"AIzaSyD2O5f3i3-FGjddQaPrS_vNQiUdrpzUnbc"}[e])||void 0===n||null===(r=n.toLowerCase())||void 0===r?void 0:r.trim();if(null==i||""===i)return;if(!["true","false"].includes(i))throw l_("process.env.".concat(e," value must be 'true', 'false', or empty: ").concat(i));t("true"===i)}("RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED",(e=>{D_.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=e})),function(e,t){var n;const r=null===(n={NODE_ENV:"production",PUBLIC_URL:"/jejubus-guide",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAJ8GrRz659ejvVbqQ4npHTAVgPNzpVqV8",REACT_APP_FIREBASE_AUTH_DOMAIN:"jejubus-927cf.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"jejubus-927cf",REACT_APP_FIREBASE_STORAGE_BUCKET:"jejubus-927cf.appspot.com",REACT_APP_FIREBASE_MESSAGING_SENDERID:"721392735009",REACT_APP_FIREBASE_APP_ID:"1:721392735009:web:826cd21f60e57a3f226460",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-DZY2F0PY19",REACT_APP_GOOGLE_API_KEY:"AIzaSyD2O5f3i3-FGjddQaPrS_vNQiUdrpzUnbc"}[e])||void 0===n?void 0:n.trim();null!=r&&""!==r&&t(r.split(/\s*,\s*|\s+/))}("RECOIL_GKS_ENABLED",(e=>{e.forEach((e=>{D_.RECOIL_GKS_ENABLED.add(e)}))})))}();var P_=D_;function O_(e){return P_.RECOIL_GKS_ENABLED.has(e)}O_.setPass=e=>{P_.RECOIL_GKS_ENABLED.add(e)},O_.setFail=e=>{P_.RECOIL_GKS_ENABLED.delete(e)},O_.clear=()=>{P_.RECOIL_GKS_ENABLED.clear()};var L_=O_;var M_,F_,j_,U_=function(e,t){let{error:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return null};const V_=null!==(M_=s.createMutableSource)&&void 0!==M_?M_:s.unstable_createMutableSource,B_=null!==(F_=s.useMutableSource)&&void 0!==F_?F_:s.unstable_useMutableSource,z_=null!==(j_=s.useSyncExternalStore)&&void 0!==j_?j_:s.unstable_useSyncExternalStore;let q_=!1;var G_={createMutableSource:V_,useMutableSource:B_,useSyncExternalStore:z_,currentRendererSupportsUseSyncExternalStore:function(){var e;const{ReactCurrentDispatcher:t,ReactCurrentOwner:n}=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,r=null!=(null!==(e=null===t||void 0===t?void 0:t.current)&&void 0!==e?e:n.currentDispatcher).useSyncExternalStore;return!z_||r||q_||(q_=!0,U_("A React renderer without React 18+ API support is being used with React 18+.")),r},reactMode:function(){return L_("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:L_("recoil_sync_external_store")&&null!=z_?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:L_("recoil_mutable_source")&&null!=B_&&"undefined"!==typeof window&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?L_("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:L_("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}},isFastRefreshEnabled:function(){return!1}};class K_{constructor(e){h_(this,"key",void 0),this.key=e}toJSON(){return{key:this.key}}}class H_ extends K_{}class W_ extends K_{}var Q_={AbstractRecoilValue:K_,RecoilState:H_,RecoilValueReadOnly:W_,isRecoilValue:function(e){return e instanceof H_||e instanceof W_}},J_=Q_.AbstractRecoilValue,Y_=Q_.RecoilState,$_=Q_.RecoilValueReadOnly,X_=Q_.isRecoilValue,Z_=Object.freeze({__proto__:null,AbstractRecoilValue:J_,RecoilState:Y_,RecoilValueReadOnly:$_,isRecoilValue:X_});var eS=function(e){};var tS=function(e,t){return function*(){let n=0;for(const r of e)yield t(r,n++)}()};const{isFastRefreshEnabled:nS}=G_;class rS{}const iS=new rS,sS=new Map,oS=new Map;class aS extends Error{}const lS=new Map;function cS(e){return lS.get(e)}var uS={nodes:sS,recoilValues:oS,registerNode:function(e){P_.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&function(e){if(sS.has(e)){const t='Duplicate atom key "'.concat(e,'". This is a FATAL ERROR in\n      production. But it is safe to ignore this warning if it occurred because of\n      hot module replacement.');console.warn(t)}}(e.key),sS.set(e.key,e);const t=null==e.set?new Z_.RecoilValueReadOnly(e.key):new Z_.RecoilState(e.key);return oS.set(e.key,t),t},getNode:function(e){const t=sS.get(e);if(null==t)throw new aS('Missing definition for RecoilValue: "'.concat(e,'""'));return t},getNodeMaybe:function(e){return sS.get(e)},deleteNodeConfigIfPossible:function(e){var t;if(!L_("recoil_memory_managament_2020"))return;const n=sS.get(e);var r;null!==n&&void 0!==n&&null!==(t=n.shouldDeleteConfigOnRelease)&&void 0!==t&&t.call(n)&&(sS.delete(e),null===(r=cS(e))||void 0===r||r(),lS.delete(e))},setConfigDeletionHandler:function(e,t){L_("recoil_memory_managament_2020")&&(void 0===t?lS.delete(e):lS.set(e,t))},getConfigDeletionHandler:cS,recoilValuesForKeys:function(e){return tS(e,(e=>u_(oS.get(e))))},NodeMissingError:aS,DefaultValue:rS,DEFAULT_VALUE:iS};var hS={enqueueExecution:function(e,t){t()}};var dS,fS,pS=(dS=function(e){var t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n={},r=Math.pow(2,5),i=r-1,s=r/2,o=r/4,a={},l=function(e){return function(){return e}},c=n.hash=function(e){var n="undefined"===typeof e?"undefined":t(e);if("number"===n)return e;"string"!==n&&(e+="");for(var r=0,i=0,s=e.length;i<s;++i)r=(r<<5)-r+e.charCodeAt(i)|0;return r},u=function(e,t){return t>>>e&i},h=function(e){return 1<<e},d=function(e,t){return function(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,127&(e+=e>>8)+(e>>16)}(e&t-1)},f=function(e,t,n,r){var i=r;if(!e){var s=r.length;i=new Array(s);for(var o=0;o<s;++o)i[o]=r[o]}return i[t]=n,i},p=function(e,t,n){var r=n.length-1,i=0,s=0,o=n;if(e)i=s=t;else for(o=new Array(r);i<t;)o[s++]=n[i++];for(++i;i<=r;)o[s++]=n[i++];return e&&(o.length=r),o},m={__hamt_isEmpty:!0},g=function(e){return e===m||e&&e.__hamt_isEmpty},v=function(e,t,n,r){return{type:1,edit:e,hash:t,key:n,value:r,_modify:E}},y=function(e,t,n){return{type:2,edit:e,hash:t,children:n,_modify:I}},w=function(e,t,n){return{type:3,edit:e,mask:t,children:n,_modify:T}},b=function(e,t,n){return{type:4,edit:e,size:t,children:n,_modify:k}},_=function e(t,n,r,i,s,o){if(r===s)return y(t,r,[o,i]);var a=u(n,r),l=u(n,s);return w(t,h(a)|h(l),a===l?[e(t,n+5,r,i,s,o)]:a<l?[i,o]:[o,i])},S=function(e,t){return e===t.edit},E=function(e,t,n,r,i,s,o){if(t(s,this.key)){var l=r(this.value);return l===this.value?this:l===a?(--o.value,m):S(e,this)?(this.value=l,this):v(e,i,s,l)}var c=r();return c===a?this:(++o.value,_(e,n,this.hash,this,i,v(e,i,s,c)))},I=function(e,t,n,r,i,s,o){if(i===this.hash){var l=function(e,t,n,r,i,s,o,l){for(var c=i.length,u=0;u<c;++u){var h=i[u];if(n(o,h.key)){var d=h.value,m=s(d);return m===d?i:m===a?(--l.value,p(e,u,i)):f(e,u,v(t,r,o,m),i)}}var g=s();return g===a?i:(++l.value,f(e,c,v(t,r,o,g),i))}(S(e,this),e,t,this.hash,this.children,r,s,o);return l===this.children?this:l.length>1?y(e,this.hash,l):l[0]}var c=r();return c===a?this:(++o.value,_(e,n,this.hash,this,i,v(e,i,s,c)))},T=function(e,t,n,r,i,o,a){var l=this.mask,c=this.children,v=u(n,i),y=h(v),_=d(l,y),E=l&y,I=E?c[_]:m,T=I._modify(e,t,n+5,r,i,o,a);if(I===T)return this;var k,x=S(e,this),C=l,N=void 0;if(E&&g(T)){if(!(C&=~y))return m;if(c.length<=2&&((k=c[1^_])===m||1===k.type||2===k.type))return c[1^_];N=p(x,_,c)}else if(E||g(T))N=f(x,_,T,c);else{if(c.length>=s)return function(e,t,n,r,i){for(var s=[],o=r,a=0,l=0;o;++l)1&o&&(s[l]=i[a++]),o>>>=1;return s[t]=n,b(e,a+1,s)}(e,v,T,l,c);C|=y,N=function(e,t,n,r){var i=r.length;if(e){for(var s=i;s>=t;)r[s--]=r[s];return r[t]=n,r}for(var o=0,a=0,l=new Array(i+1);o<t;)l[a++]=r[o++];for(l[t]=n;o<i;)l[++a]=r[o++];return l}(x,_,T,c)}return x?(this.mask=C,this.children=N,this):w(e,C,N)},k=function(e,t,n,r,i,s,a){var l=this.size,c=this.children,h=u(n,i),d=c[h],p=(d||m)._modify(e,t,n+5,r,i,s,a);if(d===p)return this;var v=S(e,this),y=void 0;if(g(d)&&!g(p))++l,y=f(v,h,p,c);else if(!g(d)&&g(p)){if(--l<=o)return function(e,t,n,r){for(var i=new Array(t-1),s=0,o=0,a=0,l=r.length;a<l;++a)if(a!==n){var c=r[a];c&&!g(c)&&(i[s++]=c,o|=1<<a)}return w(e,o,i)}(e,l,h,c);y=f(v,h,m,c)}else y=f(v,h,p,c);return v?(this.size=l,this.children=y,this):b(e,l,y)};function x(e,t,n,r,i){this._editable=e,this._edit=t,this._config=n,this._root=r,this._size=i}m._modify=function(e,t,n,r,i,s,o){var l=r();return l===a?m:(++o.value,v(e,i,s,l))},x.prototype.setTree=function(e,t){return this._editable?(this._root=e,this._size=t,this):e===this._root?this:new x(this._editable,this._edit,this._config,e,t)};var C=n.tryGetHash=function(e,t,n,r){for(var i=r._root,s=0,o=r._config.keyEq;;)switch(i.type){case 1:return o(n,i.key)?i.value:e;case 2:if(t===i.hash)for(var a=i.children,l=0,c=a.length;l<c;++l){var f=a[l];if(o(n,f.key))return f.value}return e;case 3:var p=u(s,t),m=h(p);if(i.mask&m){i=i.children[d(i.mask,m)],s+=5;break}return e;case 4:if(i=i.children[u(s,t)]){s+=5;break}return e;default:return e}};x.prototype.tryGetHash=function(e,t,n){return C(e,t,n,this)};var N=n.tryGet=function(e,t,n){return C(e,n._config.hash(t),t,n)};x.prototype.tryGet=function(e,t){return N(e,t,this)};var A=n.getHash=function(e,t,n){return C(void 0,e,t,n)};x.prototype.getHash=function(e,t){return A(e,t,this)},n.get=function(e,t){return C(void 0,t._config.hash(e),e,t)},x.prototype.get=function(e,t){return N(t,e,this)};var R=n.has=function(e,t,n){return C(a,e,t,n)!==a};x.prototype.hasHash=function(e,t){return R(e,t,this)};var D=n.has=function(e,t){return R(t._config.hash(e),e,t)};x.prototype.has=function(e){return D(e,this)};var P=function(e,t){return e===t};n.make=function(e){return new x(0,0,{keyEq:e&&e.keyEq||P,hash:e&&e.hash||c},m,0)},n.empty=n.make();var O=n.isEmpty=function(e){return e&&!!g(e._root)};x.prototype.isEmpty=function(){return O(this)};var L=n.modifyHash=function(e,t,n,r){var i={value:r._size},s=r._root._modify(r._editable?r._edit:NaN,r._config.keyEq,0,e,t,n,i);return r.setTree(s,i.value)};x.prototype.modifyHash=function(e,t,n){return L(n,e,t,this)};var M=n.modify=function(e,t,n){return L(e,n._config.hash(t),t,n)};x.prototype.modify=function(e,t){return M(t,e,this)};var F=n.setHash=function(e,t,n,r){return L(l(n),e,t,r)};x.prototype.setHash=function(e,t,n){return F(e,t,n,this)};var j=n.set=function(e,t,n){return F(n._config.hash(e),e,t,n)};x.prototype.set=function(e,t){return j(e,t,this)};var U=l(a),V=n.removeHash=function(e,t,n){return L(U,e,t,n)};x.prototype.removeHash=x.prototype.deleteHash=function(e,t){return V(e,t,this)};var B=n.remove=function(e,t){return V(t._config.hash(e),e,t)};x.prototype.remove=x.prototype.delete=function(e){return B(e,this)};var z=n.beginMutation=function(e){return new x(e._editable+1,e._edit+1,e._config,e._root,e._size)};x.prototype.beginMutation=function(){return z(this)};var q=n.endMutation=function(e){return e._editable=e._editable&&e._editable-1,e};x.prototype.endMutation=function(){return q(this)};var G=n.mutate=function(e,t){var n=z(t);return e(n),q(n)};x.prototype.mutate=function(e){return G(e,this)};var K=function(e){return e&&H(e[0],e[1],e[2],e[3],e[4])},H=function(e,t,n,r,i){for(;n<e;){var s=t[n++];if(s&&!g(s))return W(s,r,[e,t,n,r,i])}return K(i)},W=function(e,t,n){switch(e.type){case 1:return{value:t(e),rest:n};case 2:case 4:case 3:var r=e.children;return H(r.length,r,0,t,n);default:return K(n)}},Q={done:!0};function J(e){this.v=e}J.prototype.next=function(){if(!this.v)return Q;var e=this.v;return this.v=K(e.rest),e},J.prototype[Symbol.iterator]=function(){return this};var Y=function(e,t){return new J(W(e._root,t))},$=function(e){return[e.key,e.value]},X=n.entries=function(e){return Y(e,$)};x.prototype.entries=x.prototype[Symbol.iterator]=function(){return X(this)};var Z=function(e){return e.key},ee=n.keys=function(e){return Y(e,Z)};x.prototype.keys=function(){return ee(this)};var te=function(e){return e.value},ne=n.values=x.prototype.values=function(e){return Y(e,te)};x.prototype.values=function(){return ne(this)};var re=n.fold=function(e,t,n){var r=n._root;if(1===r.type)return e(t,r.value,r.key);for(var i=[r.children],s=void 0;s=i.pop();)for(var o=0,a=s.length;o<a;){var l=s[o++];l&&l.type&&(1===l.type?t=e(t,l.value,l.key):i.push(l.children))}return t};x.prototype.fold=function(e,t){return re(e,t,this)};var ie=n.forEach=function(e,t){return re((function(n,r,i){return e(r,i,t)}),null,t)};x.prototype.forEach=function(e){return ie(e,this)};var se=n.count=function(e){return e._size};x.prototype.count=function(){return se(this)},Object.defineProperty(x.prototype,"size",{get:x.prototype.count}),e.exports?e.exports=n:(void 0).hamt=n},dS(fS={exports:{}},fS.exports),fS.exports);class mS{constructor(e){h_(this,"_map",void 0),this._map=new Map(null===e||void 0===e?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,t){return this._map.set(e,t),this}delete(e){return this._map.delete(e),this}clone(){return vS(this)}toMap(){return new Map(this._map)}}class gS{constructor(e){if(h_(this,"_hamt",pS.empty.beginMutation()),e instanceof gS){const t=e._hamt.endMutation();e._hamt=t.beginMutation(),this._hamt=t.beginMutation()}else if(e)for(const[t,n]of e.entries())this._hamt.set(t,n)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,t){return this._hamt.set(e,t),this}delete(e){return this._hamt.delete(e),this}clone(){return vS(this)}toMap(){return new Map(this._hamt)}}function vS(e){return L_("recoil_hamt_2020")?new gS(e):new mS(e)}var yS=vS,wS=Object.freeze({__proto__:null,persistentMap:yS});var bS=function(e){const t=new Set;for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e:for(const s of e){for(const e of r)if(e.has(s))continue e;t.add(s)}return t};var _S=function(e,t){const n=new Map;return e.forEach(((e,r)=>{n.set(r,t(e,r))})),n};function SS(e,t,n,r){const{nodeDeps:i,nodeToNodeSubscriptions:s}=n,o=i.get(e);if(o&&r&&o!==r.nodeDeps.get(e))return;i.set(e,t);const a=null==o?t:bS(t,o);for(const l of a){s.has(l)||s.set(l,new Set);u_(s.get(l)).add(e)}if(o){const n=bS(o,t);for(const t of n){if(!s.has(t))return;const n=u_(s.get(t));n.delete(e),0===n.size&&s.delete(t)}}}var ES={cloneGraph:function(e){return{nodeDeps:_S(e.nodeDeps,(e=>new Set(e))),nodeToNodeSubscriptions:_S(e.nodeToNodeSubscriptions,(e=>new Set(e)))}},graph:function(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}},saveDepsToStore:function(e,t,n,r){var i,s,o,a;const l=n.getState();r!==l.currentTree.version&&r!==(null===(i=l.nextTree)||void 0===i?void 0:i.version)&&r!==(null===(s=l.previousTree)||void 0===s?void 0:s.version)&&U_("Tried to save dependencies to a discarded tree");const c=n.getGraph(r);if(SS(e,t,c),r===(null===(o=l.previousTree)||void 0===o?void 0:o.version)){SS(e,t,n.getGraph(l.currentTree.version),c)}if(r===(null===(a=l.previousTree)||void 0===a?void 0:a.version)||r===l.currentTree.version){var u;const r=null===(u=l.nextTree)||void 0===u?void 0:u.version;if(void 0!==r){SS(e,t,n.getGraph(r),c)}}}};let IS=0;let TS=0;let kS=0;var xS={getNextTreeStateVersion:()=>IS++,getNextStoreID:()=>TS++,getNextComponentID:()=>kS++};const{persistentMap:CS}=wS,{graph:NS}=ES,{getNextTreeStateVersion:AS}=xS;function RS(){const e=AS();return{version:e,stateID:e,transactionMetadata:{},dirtyAtoms:new Set,atomValues:CS(),nonvalidatedAtoms:CS()}}var DS={makeEmptyTreeState:RS,makeEmptyStoreState:function(){const e=RS();return{currentTree:e,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:(new Map).set(e.version,NS()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}},getNextTreeStateVersion:AS};class PS{}var OS={RetentionZone:PS,retentionZone:function(){return new PS}};var LS={setByAddingToSet:function(e,t){const n=new Set(e);return n.add(t),n},setByDeletingFromSet:function(e,t){const n=new Set(e);return n.delete(t),n},mapBySettingInMap:function(e,t,n){const r=new Map(e);return r.set(t,n),r},mapByUpdatingInMap:function(e,t,n){const r=new Map(e);return r.set(t,n(r.get(t))),r},mapByDeletingFromMap:function(e,t){const n=new Map(e);return n.delete(t),n},mapByDeletingMultipleFromMap:function(e,t){const n=new Map(e);return t.forEach((e=>n.delete(e))),n}};var MS=function*(e,t){let n=0;for(const r of e)t(r,n++)&&(yield r)};var FS=function(e,t){return new Proxy(e,{get:(e,n)=>(!(n in e)&&n in t&&(e[n]=t[n]()),e[n]),ownKeys:e=>Object.keys(e)})};const{getNode:jS,getNodeMaybe:US,recoilValuesForKeys:VS}=uS,{RetentionZone:BS}=OS,{setByAddingToSet:zS}=LS,qS=Object.freeze(new Set);class GS extends Error{}function KS(e,t,n,r){const i=e.getState();if(i.nodeCleanupFunctions.has(n))return;const s=jS(n),o=function(e,t,n){if(!L_("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:r}=e.getState().retention;function i(e){let n=r.get(e);n||r.set(e,n=new Set),n.add(t)}if(n instanceof BS)i(n);else if(Array.isArray(n))for(const s of n)i(s);return()=>{if(!L_("recoil_memory_managament_2020"))return;const{retention:r}=e.getState();function i(e){const n=r.nodesRetainedByZone.get(e);null===n||void 0===n||n.delete(t),n&&0===n.size&&r.nodesRetainedByZone.delete(e)}if(n instanceof BS)i(n);else if(Array.isArray(n))for(const e of n)i(e)}}(e,n,s.retainedBy),a=s.init(e,t,r);i.nodeCleanupFunctions.set(n,(()=>{a(),o()}))}function HS(e,t,n){return jS(n).peek(e,t)}function WS(e,t,n){const r=new Set,i=Array.from(n),s=e.getGraph(t.version);for(let a=i.pop();a;a=i.pop()){var o;r.add(a);const e=null!==(o=s.nodeToNodeSubscriptions.get(a))&&void 0!==o?o:qS;for(const t of e)r.has(t)||i.push(t)}return r}var QS={getNodeLoadable:function(e,t,n){return KS(e,t,n,"get"),jS(n).get(e,t)},peekNodeLoadable:HS,setNodeValue:function(e,t,n,r){const i=jS(n);if(null==i.set)throw new GS("Attempt to set read-only RecoilValue: ".concat(n));const s=i.set;return KS(e,t,n,"set"),s(e,t,r)},initializeNode:function(e,t,n){KS(e,e.getState().currentTree,t,n)},cleanUpNode:function(e,t){var n;const r=e.getState();null===(n=r.nodeCleanupFunctions.get(t))||void 0===n||n(),r.nodeCleanupFunctions.delete(t)},setUnvalidatedAtomValue_DEPRECATED:function(e,t,n){var r;const i=US(t);return null===i||void 0===i||null===(r=i.invalidate)||void 0===r||r.call(i,e),{...e,atomValues:e.atomValues.clone().delete(t),nonvalidatedAtoms:e.nonvalidatedAtoms.clone().set(t,n),dirtyAtoms:zS(e.dirtyAtoms,t)}},peekNodeInfo:function(e,t,n){const r=e.getState(),i=e.getGraph(t.version),s=jS(n).nodeType;return FS({type:s},{loadable:()=>HS(e,t,n),isActive:()=>r.knownAtoms.has(n)||r.knownSelectors.has(n),isSet:()=>"selector"!==s&&t.atomValues.has(n),isModified:()=>t.dirtyAtoms.has(n),deps:()=>{var e;return VS(null!==(e=i.nodeDeps.get(n))&&void 0!==e?e:[])},subscribers:()=>{var i,s;return{nodes:VS(MS(WS(e,t,new Set([n])),(e=>e!==n))),components:tS(null!==(i=null===(s=r.nodeToComponentSubscriptions.get(n))||void 0===s?void 0:s.values())&&void 0!==i?i:[],(e=>{let[t]=e;return{name:t}}))}}})},getDownstreamNodes:WS};let JS=null;var YS={setInvalidateMemoizedSnapshot:function(e){JS=e},invalidateMemoizedSnapshot:function(){var e;null===(e=JS)||void 0===e||e()}};const{getDownstreamNodes:$S,getNodeLoadable:XS,setNodeValue:ZS}=QS,{getNextComponentID:eE}=xS,{getNode:tE,getNodeMaybe:nE}=uS,{DefaultValue:rE}=uS,{reactMode:iE}=G_,{AbstractRecoilValue:sE,RecoilState:oE,RecoilValueReadOnly:aE,isRecoilValue:lE}=Z_,{invalidateMemoizedSnapshot:cE}=YS;function uE(e,t,n){if("set"===n.type){const{recoilValue:r,valueOrUpdater:i}=n,s=function(e,t,n,r){let{key:i}=n;if("function"===typeof r){const n=XS(e,t,i);if("loading"===n.state){const e='Tried to set atom or selector "'.concat(i,'" using an updater function while the current state is pending, this is not currently supported.');throw U_(e),l_(e)}if("hasError"===n.state)throw n.contents;return r(n.contents)}return r}(e,t,r,i),o=ZS(e,t,r.key,s);for(const[e,n]of o.entries())hE(t,e,n)}else if("setLoadable"===n.type){const{recoilValue:{key:e},loadable:r}=n;hE(t,e,r)}else if("markModified"===n.type){const{recoilValue:{key:e}}=n;t.dirtyAtoms.add(e)}else if("setUnvalidated"===n.type){var r;const{recoilValue:{key:e},unvalidatedValue:i}=n,s=nE(e);null===s||void 0===s||null===(r=s.invalidate)||void 0===r||r.call(s,t),t.atomValues.delete(e),t.nonvalidatedAtoms.set(e,i),t.dirtyAtoms.add(e)}else U_("Unknown action ".concat(n.type))}function hE(e,t,n){"hasValue"===n.state&&n.contents instanceof rE?e.atomValues.delete(t):e.atomValues.set(t,n),e.dirtyAtoms.add(t),e.nonvalidatedAtoms.delete(t)}function dE(e,t){e.replaceState((n=>{const r=mE(n);for(const i of t)uE(e,r,i);return gE(e,r),cE(),r}))}function fE(e,t){if(pE.length){const n=pE[pE.length-1];let r=n.get(e);r||n.set(e,r=[]),r.push(t)}else dE(e,[t])}const pE=[];function mE(e){return{...e,atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(e.dirtyAtoms)}}function gE(e,t){const n=$S(e,t,t.dirtyAtoms);for(const s of n){var r,i;null===(r=nE(s))||void 0===r||null===(i=r.invalidate)||void 0===i||i.call(r,t)}}function vE(e,t,n){fE(e,{type:"set",recoilValue:t,valueOrUpdater:n})}var yE={RecoilValueReadOnly:aE,AbstractRecoilValue:sE,RecoilState:oE,getRecoilValueAsLoadable:function(e,t){let{key:n}=t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getState().currentTree;var i,s;const o=e.getState();r.version!==o.currentTree.version&&r.version!==(null===(i=o.nextTree)||void 0===i?void 0:i.version)&&r.version!==(null===(s=o.previousTree)||void 0===s?void 0:s.version)&&U_("Tried to read from a discarded tree");const a=XS(e,r,n);return"loading"===a.state&&a.contents.catch((()=>{})),a},setRecoilValue:vE,setRecoilValueLoadable:function(e,t,n){if(n instanceof rE)return vE(e,t,n);fE(e,{type:"setLoadable",recoilValue:t,loadable:n})},markRecoilValueModified:function(e,t){fE(e,{type:"markModified",recoilValue:t})},setUnvalidatedRecoilValue:function(e,t,n){fE(e,{type:"setUnvalidated",recoilValue:t,unvalidatedValue:n})},subscribeToRecoilValue:function(e,t,n){let{key:r}=t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const s=eE(),o=e.getState();o.nodeToComponentSubscriptions.has(r)||o.nodeToComponentSubscriptions.set(r,new Map),u_(o.nodeToComponentSubscriptions.get(r)).set(s,[null!==i&&void 0!==i?i:"<not captured>",n]);const a=iE();if(a.early&&("LEGACY"===a.mode||"MUTABLE_SOURCE"===a.mode)){const t=e.getState().nextTree;t&&t.dirtyAtoms.has(r)&&n(t)}return{release:()=>{const t=e.getState(),n=t.nodeToComponentSubscriptions.get(r);void 0!==n&&n.has(s)?(n.delete(s),0===n.size&&t.nodeToComponentSubscriptions.delete(r)):U_("Subscription missing at release time for atom ".concat(r,". This is a bug in Recoil."))}}},isRecoilValue:lE,applyAtomValueWrites:function(e,t){const n=e.clone();return t.forEach(((e,t)=>{"hasValue"===e.state&&e.contents instanceof rE?n.delete(t):n.set(t,e)})),n},batchStart:function(){const e=new Map;return pE.push(e),()=>{for(const[t,n]of e)dE(t,n);pE.pop()!==e&&U_("Incorrect order of batch popping")}},writeLoadableToTreeState:hE,invalidateDownstreams:gE,copyTreeState:mE,refreshRecoilValue:function(e,t){var n;const{currentTree:r}=e.getState(),i=tE(t.key);null===(n=i.clearCache)||void 0===n||n.call(i,e,r)}};var wE=function(e,t,n){const r=e.entries();let i=r.next();for(;!i.done;){const s=i.value;if(t.call(n,s[1],s[0],e))return!0;i=r.next()}return!1};const{cleanUpNode:bE}=QS,{deleteNodeConfigIfPossible:_E,getNode:SE}=uS,{RetentionZone:EE}=OS,IE=new Set;function TE(e,t){const n=e.getState(),r=n.currentTree;if(n.nextTree)return void U_("releaseNodesNowOnCurrentTree should only be called at the end of a batch");const i=new Set;for(const o of t)if(o instanceof EE)for(const e of xE(n,o))i.add(e);else i.add(o);const s=function(e,t){const n=e.getState(),r=n.currentTree,i=e.getGraph(r.version),s=new Set,o=new Set;return a(t),s;function a(t){const l=new Set,c=function(e,t,n,r,i){const s=e.getGraph(t.version),o=[],a=new Set;for(;n.size>0;)l(u_(n.values().next().value));return o;function l(e){if(r.has(e)||i.has(e))return void n.delete(e);if(a.has(e))return;const t=s.nodeToNodeSubscriptions.get(e);if(t)for(const n of t)l(n);a.add(e),n.delete(e),o.push(e)}}(e,r,t,s,o);for(const e of c){var u;if("recoilRoot"===SE(e).retainedBy){o.add(e);continue}if((null!==(u=n.retention.referenceCounts.get(e))&&void 0!==u?u:0)>0){o.add(e);continue}if(CE(e).some((e=>n.retention.referenceCounts.get(e)))){o.add(e);continue}const t=i.nodeToNodeSubscriptions.get(e);t&&wE(t,(e=>o.has(e)))?o.add(e):(s.add(e),l.add(e))}const h=new Set;for(const e of l)for(const t of null!==(d=i.nodeDeps.get(e))&&void 0!==d?d:IE){var d;s.has(t)||h.add(t)}h.size&&a(h)}}(e,i);for(const o of s)kE(e,r,o)}function kE(e,t,n){if(!L_("recoil_memory_managament_2020"))return;bE(e,n);const r=e.getState();r.knownAtoms.delete(n),r.knownSelectors.delete(n),r.nodeTransactionSubscriptions.delete(n),r.retention.referenceCounts.delete(n);const i=CE(n);for(const l of i){var s;null===(s=r.retention.nodesRetainedByZone.get(l))||void 0===s||s.delete(n)}t.atomValues.delete(n),t.dirtyAtoms.delete(n),t.nonvalidatedAtoms.delete(n);const o=r.graphsByVersion.get(t.version);if(o){const e=o.nodeDeps.get(n);if(void 0!==e){o.nodeDeps.delete(n);for(const t of e){var a;null===(a=o.nodeToNodeSubscriptions.get(t))||void 0===a||a.delete(n)}}o.nodeToNodeSubscriptions.delete(n)}_E(n)}function xE(e,t){var n;return null!==(n=e.retention.nodesRetainedByZone.get(t))&&void 0!==n?n:IE}function CE(e){const t=SE(e).retainedBy;return void 0===t||"components"===t||"recoilRoot"===t?[]:t instanceof EE?[t]:t}function NE(e,t){if(!L_("recoil_memory_managament_2020"))return;e.getState().retention.referenceCounts.delete(t),function(e,t){const n=e.getState();n.nextTree?n.retention.retainablesToCheckForRelease.add(t):TE(e,new Set([t]))}(e,t)}var AE={SUSPENSE_TIMEOUT_MS:12e4,updateRetainCount:function(e,t,n){var r;if(!L_("recoil_memory_managament_2020"))return;const i=e.getState().retention.referenceCounts,s=(null!==(r=i.get(t))&&void 0!==r?r:0)+n;0===s?NE(e,t):i.set(t,s)},updateRetainCountToZero:NE,releaseScheduledRetainablesNow:function(e){if(!L_("recoil_memory_managament_2020"))return;const t=e.getState();TE(e,t.retention.retainablesToCheckForRelease),t.retention.retainablesToCheckForRelease.clear()},retainedByOptionWithDefault:function(e){return void 0===e?"recoilRoot":e}};const{unstable_batchedUpdates:RE}=l;var DE={unstable_batchedUpdates:RE};const{unstable_batchedUpdates:PE}=DE;var OE={unstable_batchedUpdates:PE};const{batchStart:LE}=yE,{unstable_batchedUpdates:ME}=OE;let FE=ME||(e=>e());var jE={getBatcher:()=>FE,setBatcher:e=>{FE=e},batchUpdates:e=>{FE((()=>{let t=()=>{};try{t=LE(),e()}finally{t()}}))}};var UE=function*(e){for(const t of e)for(const e of t)yield e};const VE="undefined"===typeof Window||"undefined"===typeof window,BE="undefined"!==typeof navigator&&"ReactNative"===navigator.product;var zE={isSSR:VE,isReactNative:BE,isWindow:e=>!VE&&(e===window||e instanceof Window)};var qE={memoizeWithArgsHash:function(e,t){let n;return function(){n||(n={});const r=t(...arguments);return Object.hasOwnProperty.call(n,r)||(n[r]=e(...arguments)),n[r]}},memoizeOneWithArgsHash:function(e,t){let n,r;return function(){const i=t(...arguments);return n===i||(n=i,r=e(...arguments)),r}},memoizeOneWithArgsHashAndInvalidation:function(e,t){let n,r;return[function(){const i=t(...arguments);return n===i||(n=i,r=e(...arguments)),r},()=>{n=null}]}};const{batchUpdates:GE}=jE,{initializeNode:KE,peekNodeInfo:HE}=QS,{graph:WE}=ES,{getNextStoreID:QE}=xS,{DEFAULT_VALUE:JE,recoilValues:YE,recoilValuesForKeys:$E}=uS,{AbstractRecoilValue:XE,getRecoilValueAsLoadable:ZE,setRecoilValue:eI,setUnvalidatedRecoilValue:tI}=yE,{updateRetainCount:nI}=AE,{setInvalidateMemoizedSnapshot:rI}=YS,{getNextTreeStateVersion:iI,makeEmptyStoreState:sI}=DS,{isSSR:oI}=zE,{memoizeOneWithArgsHashAndInvalidation:aI}=qE;class lI{constructor(e,t){h_(this,"_store",void 0),h_(this,"_refCount",1),h_(this,"getLoadable",(e=>(this.checkRefCount_INTERNAL(),ZE(this._store,e)))),h_(this,"getPromise",(e=>(this.checkRefCount_INTERNAL(),this.getLoadable(e).toPromise()))),h_(this,"getNodes_UNSTABLE",(e=>{if(this.checkRefCount_INTERNAL(),!0===(null===e||void 0===e?void 0:e.isModified)){if(!1===(null===e||void 0===e?void 0:e.isInitialized))return[];const t=this._store.getState().currentTree;return $E(t.dirtyAtoms)}const t=this._store.getState().knownAtoms,n=this._store.getState().knownSelectors;return null==(null===e||void 0===e?void 0:e.isInitialized)?YE.values():!0===e.isInitialized?$E(UE([t,n])):MS(YE.values(),(e=>{let{key:r}=e;return!t.has(r)&&!n.has(r)}))})),h_(this,"getInfo_UNSTABLE",(e=>{let{key:t}=e;return this.checkRefCount_INTERNAL(),HE(this._store,this._store.getState().currentTree,t)})),h_(this,"map",(e=>{this.checkRefCount_INTERNAL();const t=new dI(this,GE);return e(t),t})),h_(this,"asyncMap",(async e=>{this.checkRefCount_INTERNAL();const t=new dI(this,GE);return t.retain(),await e(t),t.autoRelease_INTERNAL(),t})),this._store={storeID:QE(),parentStoreID:t,getState:()=>e,replaceState:t=>{e.currentTree=t(e.currentTree)},getGraph:t=>{const n=e.graphsByVersion;if(n.has(t))return u_(n.get(t));const r=WE();return n.set(t,r),r},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw l_("Cannot subscribe to Snapshots")}};for(const n of this._store.getState().knownAtoms)KE(this._store,n,"get"),nI(this._store,n,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0&&U_("Attempt to retain() Snapshot that was already released."),this._refCount++;let e=!1;return()=>{e||(e=!0,this._release())}}autoRelease_INTERNAL(){oI||window.setTimeout((()=>this._release()),10)}_release(){if(this._refCount--,0===this._refCount){if(this._store.getState().nodeCleanupFunctions.forEach((e=>e())),this._store.getState().nodeCleanupFunctions.clear(),!L_("recoil_memory_managament_2020"))return}else this._refCount}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){L_("recoil_memory_managament_2020")&&this._refCount}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function cI(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=e.getState(),i=n?iI():t.version;return{currentTree:{version:n?i:t.version,stateID:n?i:t.stateID,transactionMetadata:{...t.transactionMetadata},dirtyAtoms:new Set(t.dirtyAtoms),atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(r.knownAtoms),knownSelectors:new Set(r.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:(new Map).set(i,e.getGraph(t.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(tS(r.nodeCleanupFunctions.entries(),(e=>{let[t]=e;return[t,()=>{}]})))}}const[uI,hI]=aI(((e,t)=>{var n;const r=e.getState(),i="latest"===t?null!==(n=r.nextTree)&&void 0!==n?n:r.currentTree:u_(r.previousTree);return new lI(cI(e,i),e.storeID)}),((e,t)=>{var n,r;return String(t)+String(e.storeID)+String(null===(n=e.getState().nextTree)||void 0===n?void 0:n.version)+String(e.getState().currentTree.version)+String(null===(r=e.getState().previousTree)||void 0===r?void 0:r.version)}));rI(hI);class dI extends lI{constructor(e,t){super(cI(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0),e.getStoreID()),h_(this,"_batch",void 0),h_(this,"set",((e,t)=>{this.checkRefCount_INTERNAL();const n=this.getStore_INTERNAL();this._batch((()=>{nI(n,e.key,1),eI(this.getStore_INTERNAL(),e,t)}))})),h_(this,"reset",(e=>{this.checkRefCount_INTERNAL();const t=this.getStore_INTERNAL();this._batch((()=>{nI(t,e.key,1),eI(this.getStore_INTERNAL(),e,JE)}))})),h_(this,"setUnvalidatedAtomValues_DEPRECATED",(e=>{this.checkRefCount_INTERNAL();const t=this.getStore_INTERNAL();GE((()=>{for(const[n,r]of e.entries())nI(t,n,1),tI(t,new XE(n),r)}))})),this._batch=t}}var fI={Snapshot:lI,MutableSnapshot:dI,freshSnapshot:function(e){const t=new lI(sI());return null!=e?t.map(e):t},cloneSnapshot:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"latest";const n=uI(e,t);return n.isRetained()?n:(hI(),uI(e,t))}},pI=fI.Snapshot,mI=fI.MutableSnapshot,gI=fI.freshSnapshot,vI=fI.cloneSnapshot,yI=Object.freeze({__proto__:null,Snapshot:pI,MutableSnapshot:mI,freshSnapshot:gI,cloneSnapshot:vI});var wI=function(){const e=new Set;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)for(const t of i)e.add(t);return e};const{useRef:bI}=s;var _I=function(e){const t=bI(e);return t.current===e&&"function"===typeof e&&(t.current=e()),t};const{getNextTreeStateVersion:SI,makeEmptyStoreState:EI}=DS,{cleanUpNode:II,getDownstreamNodes:TI,initializeNode:kI,setNodeValue:xI,setUnvalidatedAtomValue_DEPRECATED:CI}=QS,{graph:NI}=ES,{cloneGraph:AI}=ES,{getNextStoreID:RI}=xS,{createMutableSource:DI,reactMode:PI}=G_,{applyAtomValueWrites:OI}=yE,{releaseScheduledRetainablesNow:LI}=AE,{freshSnapshot:MI}=yI,{useCallback:FI,useContext:jI,useEffect:UI,useMemo:VI,useRef:BI,useState:zI}=s;function qI(){throw l_("This component must be used inside a <RecoilRoot> component.")}const GI=Object.freeze({storeID:RI(),getState:qI,replaceState:qI,getGraph:qI,subscribeToTransactions:qI,addTransactionMetadata:qI});let KI=!1;function HI(e){if(KI)throw l_("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const t=e.getState();if(null===t.nextTree){L_("recoil_memory_managament_2020")&&L_("recoil_release_on_cascading_update_killswitch_2021")&&t.commitDepth>0&&LI(e);const n=t.currentTree.version,r=SI();t.nextTree={...t.currentTree,version:r,stateID:r,dirtyAtoms:new Set,transactionMetadata:{}},t.graphsByVersion.set(r,AI(u_(t.graphsByVersion.get(n))))}}const WI=s.createContext({current:GI}),QI=()=>jI(WI),JI=s.createContext(null);function YI(e,t,n){const r=TI(e,n,n.dirtyAtoms);for(const i of r){const e=t.nodeToComponentSubscriptions.get(i);if(e)for(const[t,[r,i]]of e)i(n)}}function $I(e){const t=e.getState(),n=t.currentTree,r=n.dirtyAtoms;if(r.size){for(const[n,i]of t.nodeTransactionSubscriptions)if(r.has(n))for(const[t,r]of i)r(e);for(const[n,r]of t.transactionSubscriptions)r(e);(!PI().early||t.suspendedComponentResolvers.size>0)&&(YI(e,t,n),t.suspendedComponentResolvers.forEach((e=>e())),t.suspendedComponentResolvers.clear())}t.queuedComponentCallbacks_DEPRECATED.forEach((e=>e(n))),t.queuedComponentCallbacks_DEPRECATED.splice(0,t.queuedComponentCallbacks_DEPRECATED.length)}function XI(e){let{setNotifyBatcherOfChange:t}=e;const n=QI(),[,r]=zI([]);return t((()=>r({}))),UI((()=>(t((()=>r({}))),()=>{t((()=>{}))})),[t]),UI((()=>{hS.enqueueExecution("Batcher",(()=>{!function(e){const t=e.getState();t.commitDepth++;try{const{nextTree:n}=t;if(null==n)return;t.previousTree=t.currentTree,t.currentTree=n,t.nextTree=null,$I(e),null!=t.previousTree?t.graphsByVersion.delete(t.previousTree.version):U_("Ended batch with no previous state, which is unexpected","recoil"),t.previousTree=null,L_("recoil_memory_managament_2020")&&null==n&&LI(e)}finally{t.commitDepth--}}(n.current)}))})),null}let ZI=0;function eT(e){let t,{initializeState_DEPRECATED:n,initializeState:r,store_INTERNAL:i,children:o}=e;const a=e=>{const n=t.current.graphsByVersion;if(n.has(e))return u_(n.get(e));const r=NI();return n.set(e,r),r},l=(e,t)=>{if(null==t){const{transactionSubscriptions:t}=f.current.getState(),n=ZI++;return t.set(n,e),{release:()=>{t.delete(n)}}}{const{nodeTransactionSubscriptions:n}=f.current.getState();n.has(t)||n.set(t,new Map);const r=ZI++;return u_(n.get(t)).set(r,e),{release:()=>{const e=n.get(t);e&&(e.delete(r),0===e.size&&n.delete(t))}}}},c=e=>{HI(f.current);for(const t of Object.keys(e))u_(f.current.getState().nextTree).transactionMetadata[t]=e[t]},u=e=>{HI(f.current);const n=u_(t.current.nextTree);let r;try{KI=!0,r=e(n)}finally{KI=!1}r!==n&&(t.current.nextTree=r,PI().early&&YI(f.current,t.current,r),u_(h.current)())},h=BI(null),d=FI((e=>{h.current=e}),[h]),f=_I((()=>null!==i&&void 0!==i?i:{storeID:RI(),getState:()=>t.current,replaceState:u,getGraph:a,subscribeToTransactions:l,addTransactionMetadata:c}));null!=i&&(f.current=i),t=_I((()=>null!=n?function(e,t){const n=EI();return t({set:(t,r)=>{const i=n.currentTree,s=xI(e,i,t.key,r),o=new Set(s.keys()),a=i.nonvalidatedAtoms.clone();for(const e of o)a.delete(e);n.currentTree={...i,dirtyAtoms:wI(i.dirtyAtoms,o),atomValues:OI(i.atomValues,s),nonvalidatedAtoms:a}},setUnvalidatedAtomValues:e=>{e.forEach(((e,t)=>{n.currentTree=CI(n.currentTree,t,e)}))}}),n}(f.current,n):null!=r?function(e){const t=MI(e),n=t.getStore_INTERNAL().getState();return t.retain(),n.nodeCleanupFunctions.forEach((e=>e())),n.nodeCleanupFunctions.clear(),n}(r):EI()));const p=VI((()=>null===DI||void 0===DI?void 0:DI(t,(()=>t.current.currentTree.version))),[t]);return UI((()=>{const e=f.current;for(const t of new Set(e.getState().knownAtoms))kI(e,t,"get");return()=>{for(const t of e.getState().knownAtoms)II(e,t)}}),[f]),s.createElement(WI.Provider,{value:f},s.createElement(JI.Provider,{value:p},s.createElement(XI,{setNotifyBatcherOfChange:d}),o))}var tT={RecoilRoot:function(e){const{override:t,...n}=e,r=QI();return!1===t&&r.current!==GI?e.children:s.createElement(eT,n)},useStoreRef:QI,useRecoilMutableSource:function(){const e=jI(JI);return null==e&&eS("Attempted to use a Recoil hook outside of a <RecoilRoot>. <RecoilRoot> must be an ancestor of any component that uses Recoil hooks."),e},useRecoilStoreID:function(){return QI().current.storeID},notifyComponents_FOR_TESTING:YI,sendEndOfBatchNotifications_FOR_TESTING:$I};var nT=function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0};const{useEffect:rT,useRef:iT}=s;var sT=function(e){const t=iT();return rT((()=>{t.current=e})),t.current};const{useStoreRef:oT}=tT,{SUSPENSE_TIMEOUT_MS:aT}=AE,{updateRetainCount:lT}=AE,{RetentionZone:cT}=OS,{useEffect:uT,useRef:hT}=s,{isSSR:dT}=zE;var fT=function(e){if(L_("recoil_memory_managament_2020"))return function(e){const t=Array.isArray(e)?e:[e],n=t.map((e=>e instanceof cT?e:e.key)),r=oT();uT((()=>{if(!L_("recoil_memory_managament_2020"))return;const e=r.current;if(i.current&&!dT)window.clearTimeout(i.current),i.current=null;else for(const t of n)lT(e,t,1);return()=>{for(const t of n)lT(e,t,-1)}}),[r,...n]);const i=hT(),s=sT(n);if(!dT&&(void 0===s||!nT(s,n))){const e=r.current;for(const t of n)lT(e,t,1);if(s)for(const t of s)lT(e,t,-1);i.current&&window.clearTimeout(i.current),i.current=window.setTimeout((()=>{i.current=null;for(const t of n)lT(e,t,-1)}),aT)}}(e)};var pT=function(){return"<component name not available>"};const{batchUpdates:mT}=jE,{DEFAULT_VALUE:gT}=uS,{currentRendererSupportsUseSyncExternalStore:vT,reactMode:yT,useMutableSource:wT,useSyncExternalStore:bT}=G_,{useRecoilMutableSource:_T,useStoreRef:ST}=tT,{isRecoilValue:ET}=Z_,{AbstractRecoilValue:IT,getRecoilValueAsLoadable:TT,setRecoilValue:kT,setUnvalidatedRecoilValue:xT,subscribeToRecoilValue:CT}=yE,{useCallback:NT,useEffect:AT,useMemo:RT,useRef:DT,useState:PT}=s,{setByAddingToSet:OT}=LS,{isSSR:LT}=zE;function MT(e,t,n){if("hasValue"===e.state)return e.contents;if("loading"===e.state){throw new Promise((t=>{const r=n.current.getState().suspendedComponentResolvers;r.add(t),LT&&c_(e.contents)&&e.contents.finally((()=>{r.delete(t)}))}))}throw"hasError"===e.state?e.contents:l_('Invalid value of loadable atom "'.concat(t.key,'"'))}function FT(e){const t=ST(),n=pT(),r=NT((()=>{var n;const r=t.current,i=r.getState(),s=yT().early&&null!==(n=i.nextTree)&&void 0!==n?n:i.currentTree;return{loadable:TT(r,e,s),key:e.key}}),[t,e]),i=NT((e=>{let t;return()=>{var n,r;const i=e();return null!==(n=t)&&void 0!==n&&n.loadable.is(i.loadable)&&(null===(r=t)||void 0===r?void 0:r.key)===i.key?t:(t=i,i)}}),[]),s=RT((()=>i(r)),[r,i]),o=NT((r=>{const i=t.current;return CT(i,e,r,n).release}),[t,e,n]);return bT(o,s,s).loadable}function jT(e){const t=ST(),n=NT((()=>{var n;const r=t.current,i=r.getState(),s=yT().early&&null!==(n=i.nextTree)&&void 0!==n?n:i.currentTree;return TT(r,e,s)}),[t,e]),r=NT((()=>n()),[n]),i=pT(),s=NT(((r,s)=>{const o=t.current;return CT(o,e,(()=>{if(!L_("recoil_suppress_rerender_in_callback"))return s();const e=n();l.current.is(e)||s(),l.current=e}),i).release}),[t,e,i,n]),o=_T();if(null==o)throw l_("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const a=wT(o,r,s),l=DT(a);return AT((()=>{l.current=a})),a}function UT(e){const t=ST(),n=pT(),r=NT((()=>{var n;const r=t.current,i=r.getState(),s=yT().early&&null!==(n=i.nextTree)&&void 0!==n?n:i.currentTree;return TT(r,e,s)}),[t,e]),i=NT((()=>({loadable:r(),key:e.key})),[r,e.key]),s=NT((e=>{const t=i();return e.loadable.is(t.loadable)&&e.key===t.key?e:t}),[i]);AT((()=>{const r=CT(t.current,e,(e=>{a(s)}),n);return a(s),r.release}),[n,e,t,s]);const[o,a]=PT(i);return o.key!==e.key?i().loadable:o.loadable}function VT(e){const t=ST(),[,n]=PT([]),r=pT(),i=NT((()=>{var n;const r=t.current,i=r.getState(),s=yT().early&&null!==(n=i.nextTree)&&void 0!==n?n:i.currentTree;return TT(r,e,s)}),[t,e]),s=i(),o=DT(s);return AT((()=>{o.current=s})),AT((()=>{const s=t.current,a=s.getState(),l=CT(s,e,(e=>{var t;if(!L_("recoil_suppress_rerender_in_callback"))return n([]);const r=i();null!==(t=o.current)&&void 0!==t&&t.is(r)||n(r),o.current=r}),r);if(a.nextTree)s.getState().queuedComponentCallbacks_DEPRECATED.push((()=>{o.current=null,n([])}));else{var c;if(!L_("recoil_suppress_rerender_in_callback"))return n([]);const e=i();null!==(c=o.current)&&void 0!==c&&c.is(e)||n(e),o.current=e}return l.release}),[r,i,e,t]),s}function BT(e){return L_("recoil_memory_managament_2020")&&fT(e),{TRANSITION_SUPPORT:UT,SYNC_EXTERNAL_STORE:vT()?FT:UT,MUTABLE_SOURCE:jT,LEGACY:VT}[yT().mode](e)}function zT(e){const t=ST();return MT(BT(e),e,t)}function qT(e){const t=ST();return NT((n=>{kT(t.current,e,n)}),[t,e])}function GT(e){return L_("recoil_memory_managament_2020")&&fT(e),UT(e)}function KT(e){const t=ST();return MT(GT(e),e,t)}var HT={recoilComponentGetRecoilValueCount_FOR_TESTING:{current:0},useRecoilInterface:function(){const e=pT(),t=ST(),[,n]=PT([]),r=DT(new Set);r.current=new Set;const i=DT(new Set),s=DT(new Map),o=NT((e=>{const t=s.current.get(e);t&&(t.release(),s.current.delete(e))}),[s]),a=NT(((e,t)=>{s.current.has(t)&&n([])}),[]);return AT((()=>{const n=t.current;bS(r.current,i.current).forEach((t=>{if(s.current.has(t))return void eS('Double subscription to RecoilValue "'.concat(t,'"'));const r=CT(n,new IT(t),(e=>a(e,t)),e);s.current.set(t,r);n.getState().nextTree?n.getState().queuedComponentCallbacks_DEPRECATED.push((()=>{a(n.getState(),t)})):a(n.getState(),t)})),bS(i.current,r.current).forEach((e=>{o(e)})),i.current=r.current})),AT((()=>{const n=s.current;return bS(r.current,new Set(n.keys())).forEach((r=>{const i=CT(t.current,new IT(r),(e=>a(e,r)),e);n.set(r,i)})),()=>n.forEach(((e,t)=>o(t)))}),[e,t,o,a]),RT((()=>{function e(e){return n=>{kT(t.current,e,n)}}function n(e){var n;r.current.has(e.key)||(r.current=OT(r.current,e.key));const i=t.current.getState();return TT(t.current,e,yT().early&&null!==(n=i.nextTree)&&void 0!==n?n:i.currentTree)}function i(e){return MT(n(e),e,t)}return{getRecoilValue:i,getRecoilValueLoadable:n,getRecoilState:function(t){return[i(t),e(t)]},getRecoilStateLoadable:function(t){return[n(t),e(t)]},getSetRecoilState:e,getResetRecoilState:function(e){return()=>kT(t.current,e,gT)}}}),[r,t])},useRecoilState:function(e){return[zT(e),qT(e)]},useRecoilStateLoadable:function(e){return[BT(e),qT(e)]},useRecoilValue:zT,useRecoilValueLoadable:BT,useResetRecoilState:function(e){const t=ST();return NT((()=>{kT(t.current,e,gT)}),[t,e])},useSetRecoilState:qT,useSetUnvalidatedAtomValues:function(){const e=ST();return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};mT((()=>{e.current.addTransactionMetadata(n),t.forEach(((t,n)=>xT(e.current,new IT(n),t)))}))}},useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:GT,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:KT,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:function(e){return[KT(e),qT(e)]}};var WT=function(e,t){const n=new Map;for(const[r,i]of e)t(i,r)&&n.set(r,i);return n};var QT=function(e,t){const n=new Set;for(const r of e)t(r)&&n.add(r);return n};var JT=function(){const e=new Map;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(let i=0;i<n.length;i++){const t=n[i].keys();let r;for(;!(r=t.next()).done;)e.set(r.value,n[i].get(r.value))}return e};const{batchUpdates:YT}=jE,{DEFAULT_VALUE:$T,getNode:XT,nodes:ZT}=uS,{useStoreRef:ek}=tT,{AbstractRecoilValue:tk,setRecoilValueLoadable:nk}=yE,{SUSPENSE_TIMEOUT_MS:rk}=AE,{cloneSnapshot:ik}=yI,{useCallback:sk,useEffect:ok,useRef:ak,useState:lk}=s,{isSSR:ck}=zE;function uk(e){const t=ek();ok((()=>t.current.subscribeToTransactions(e).release),[e,t])}function hk(e){const t=e.atomValues.toMap(),n=_S(WT(t,((e,t)=>{const n=XT(t).persistence_UNSTABLE;return null!=n&&"none"!==n.type&&"hasValue"===e.state})),(e=>e.contents));return JT(e.nonvalidatedAtoms.toMap(),n)}function dk(e,t){var n;const r=e.getState(),i=null!==(n=r.nextTree)&&void 0!==n?n:r.currentTree,s=t.getStore_INTERNAL().getState().currentTree;YT((()=>{const n=new Set;for(const e of[i.atomValues.keys(),s.atomValues.keys()])for(const t of e){var r,o;(null===(r=i.atomValues.get(t))||void 0===r?void 0:r.contents)!==(null===(o=s.atomValues.get(t))||void 0===o?void 0:o.contents)&&XT(t).shouldRestoreFromSnapshots&&n.add(t)}n.forEach((t=>{nk(e,new tk(t),s.atomValues.has(t)?u_(s.atomValues.get(t)):$T)})),e.replaceState((e=>({...e,stateID:t.getID()})))}))}var fk={useRecoilSnapshot:function(){const e=ek(),[t,n]=lk((()=>ik(e.current))),r=sT(t),i=ak(),s=ak();if(uk(sk((e=>n(ik(e))),[])),ok((()=>{const e=t.retain();var n;i.current&&!ck&&(window.clearTimeout(i.current),i.current=null,null===(n=s.current)||void 0===n||n.call(s),s.current=null);return()=>{window.setTimeout(e,10)}}),[t]),r!==t&&!ck){var o;if(i.current)window.clearTimeout(i.current),i.current=null,null===(o=s.current)||void 0===o||o.call(s),s.current=null;s.current=t.retain(),i.current=window.setTimeout((()=>{var e;i.current=null,null===(e=s.current)||void 0===e||e.call(s),s.current=null}),rk)}return t},gotoSnapshot:dk,useGotoRecoilSnapshot:function(){const e=ek();return sk((t=>dk(e.current,t)),[e])},useRecoilTransactionObserver:function(e){uk(sk((t=>{const n=ik(t,"latest"),r=ik(t,"previous");e({snapshot:n,previousSnapshot:r})}),[e]))},useTransactionObservation_DEPRECATED:function(e){uk(sk((t=>{let n=t.getState().previousTree;const r=t.getState().currentTree;n||(U_("Transaction subscribers notified without a previous tree being present -- this is a bug in Recoil"),n=t.getState().currentTree);const i=hk(r),s=hk(n),o=_S(ZT,(e=>{var t,n,r,i;return{persistence_UNSTABLE:{type:null!==(t=null===(n=e.persistence_UNSTABLE)||void 0===n?void 0:n.type)&&void 0!==t?t:"none",backButton:null!==(r=null===(i=e.persistence_UNSTABLE)||void 0===i?void 0:i.backButton)&&void 0!==r&&r}}})),a=QT(r.dirtyAtoms,(e=>i.has(e)||s.has(e)));e({atomValues:i,previousAtomValues:s,atomInfo:o,modifiedAtoms:a,transactionMetadata:{...r.transactionMetadata}})}),[e]))},useTransactionSubscription_DEPRECATED:uk};const{peekNodeInfo:pk}=QS,{useStoreRef:mk}=tT;var gk=function(){const e=mk();return t=>{let{key:n}=t;return pk(e.current,e.current.getState().currentTree,n)}};const{reactMode:vk}=G_,{RecoilRoot:yk,useStoreRef:wk}=tT,{useMemo:bk}=s;var _k=function(){"MUTABLE_SOURCE"===vk().mode&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const e=wk().current;return bk((()=>function(t){let{children:n}=t;return s.createElement(yk,{store_INTERNAL:e},n)}),[e])};const{loadableWithValue:Sk}=R_,{initializeNode:Ek}=QS,{DEFAULT_VALUE:Ik,getNode:Tk}=uS,{copyTreeState:kk,getRecoilValueAsLoadable:xk,invalidateDownstreams:Ck,writeLoadableToTreeState:Nk}=yE;function Ak(e){return"atom"===Tk(e.key).nodeType}class Rk{constructor(e,t){h_(this,"_store",void 0),h_(this,"_treeState",void 0),h_(this,"_changes",void 0),h_(this,"get",(e=>{if(this._changes.has(e.key))return this._changes.get(e.key);if(!Ak(e))throw l_("Reading selectors within atomicUpdate is not supported");const t=xk(this._store,e,this._treeState);if("hasValue"===t.state)return t.contents;throw"hasError"===t.state?t.contents:l_("Expected Recoil atom ".concat(e.key," to have a value, but it is in a loading state."))})),h_(this,"set",((e,t)=>{if(!Ak(e))throw l_("Setting selectors within atomicUpdate is not supported");if("function"===typeof t){const n=this.get(e);this._changes.set(e.key,t(n))}else Ek(this._store,e.key,"set"),this._changes.set(e.key,t)})),h_(this,"reset",(e=>{this.set(e,Ik)})),this._store=e,this._treeState=t,this._changes=new Map}newTreeState_INTERNAL(){if(0===this._changes.size)return this._treeState;const e=kk(this._treeState);for(const[t,n]of this._changes)Nk(e,t,Sk(n));return Ck(this._store,e),e}}var Dk=function(e){return t=>{e.replaceState((n=>{const r=new Rk(e,n);return t(r),r.newTreeState_INTERNAL()}))}},Pk=Dk,Ok=Object.freeze({__proto__:null,atomicUpdater:Pk});var Lk=function(e,t){if(!e)throw new Error(t)};const{atomicUpdater:Mk}=Ok,{batchUpdates:Fk}=jE,{DEFAULT_VALUE:jk}=uS,{useStoreRef:Uk}=tT,{refreshRecoilValue:Vk,setRecoilValue:Bk}=yE,{cloneSnapshot:zk}=yI,{gotoSnapshot:qk}=fk,{useCallback:Gk}=s;class Kk{}const Hk=new Kk;function Wk(e,t,n,r){let i,s=Hk;var o;(Fk((()=>{const o="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if("function"!==typeof t)throw l_(o);const a=FS({...null!==r&&void 0!==r?r:{},set:(t,n)=>Bk(e,t,n),reset:t=>Bk(e,t,jk),refresh:t=>Vk(e,t),gotoSnapshot:t=>qk(e,t),transact_UNSTABLE:t=>Mk(e)(t)},{snapshot:()=>{const t=zk(e);return i=t.retain(),t}}),l=t(a);if("function"!==typeof l)throw l_(o);s=l(...n)})),s instanceof Kk&&Lk(!1),c_(s))?s=s.finally((()=>{var e;null===(e=i)||void 0===e||e()})):null===(o=i)||void 0===o||o();return s}var Qk={recoilCallback:Wk,useRecoilCallback:function(e,t){const n=Uk();return Gk((function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return Wk(n.current,e,r)}),null!=t?[...t,n]:void 0)}};const{useStoreRef:Jk}=tT,{refreshRecoilValue:Yk}=yE,{useCallback:$k}=s;var Xk=function(e){const t=Jk();return $k((()=>{const n=t.current;Yk(n,e)}),[e,t])};const{atomicUpdater:Zk}=Ok,{useStoreRef:ex}=tT,{useMemo:tx}=s;var nx=function(e,t){const n=ex();return tx((()=>function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];Zk(n.current)((t=>{e(t)(...r)}))}),null!=t?[...t,n]:void 0)};var rx=class{constructor(e){h_(this,"value",void 0),this.value=e}},ix=Object.freeze({__proto__:null,WrappedValue:rx});const{isFastRefreshEnabled:sx}=G_;class ox extends Error{}var ax=class{constructor(e){var t,n,r;h_(this,"_name",void 0),h_(this,"_numLeafs",void 0),h_(this,"_root",void 0),h_(this,"_onHit",void 0),h_(this,"_onSet",void 0),h_(this,"_mapNodeValue",void 0),this._name=null===e||void 0===e?void 0:e.name,this._numLeafs=0,this._root=null,this._onHit=null!==(t=null===e||void 0===e?void 0:e.onHit)&&void 0!==t?t:()=>{},this._onSet=null!==(n=null===e||void 0===e?void 0:e.onSet)&&void 0!==n?n:()=>{},this._mapNodeValue=null!==(r=null===e||void 0===e?void 0:e.mapNodeValue)&&void 0!==r?r:e=>e}size(){return this._numLeafs}root(){return this._root}get(e,t){var n;return null===(n=this.getLeafNode(e,t))||void 0===n?void 0:n.value}getLeafNode(e,t){if(null==this._root)return;let n=this._root;for(;n;){if(null===t||void 0===t||t.onNodeVisit(n),"leaf"===n.type)return this._onHit(n),n;const r=this._mapNodeValue(e(n.nodeKey));n=n.branches.get(r)}}set(e,t,n){const r=()=>{var r,i,s,o;let a,l;for(const[t,p]of e){var c,u,h;const e=this._root;if("leaf"===(null===e||void 0===e?void 0:e.type))throw this.invalidCacheError();const r=a;if(a=r?r.branches.get(l):e,a=null!==(c=a)&&void 0!==c?c:{type:"branch",nodeKey:t,parent:r,branches:new Map,branchKey:l},"branch"!==a.type||a.nodeKey!==t)throw this.invalidCacheError();null===r||void 0===r||r.branches.set(l,a),null===n||void 0===n||null===(u=n.onNodeVisit)||void 0===u||u.call(n,a),l=this._mapNodeValue(p),this._root=null!==(h=this._root)&&void 0!==h?h:a}const d=a?null===(r=a)||void 0===r?void 0:r.branches.get(l):this._root;if(null!=d&&("leaf"!==d.type||d.branchKey!==l))throw this.invalidCacheError();const f={type:"leaf",value:t,parent:a,branchKey:l};null===(i=a)||void 0===i||i.branches.set(l,f),this._root=null!==(s=this._root)&&void 0!==s?s:f,this._numLeafs++,this._onSet(f),null===n||void 0===n||null===(o=n.onNodeVisit)||void 0===o||o.call(n,f)};try{r()}catch(i){if(!(i instanceof ox))throw i;this.clear(),r()}}delete(e){const t=this.root();if(!t)return!1;if(e===t)return this._root=null,this._numLeafs=0,!0;let n=e.parent,r=e.branchKey;for(;n;){var i;if(n.branches.delete(r),n===t)return 0===n.branches.size?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(n.branches.size>0)break;r=null===(i=n)||void 0===i?void 0:i.branchKey,n=n.parent}for(;n!==t;n=n.parent)if(null==n)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const e=sx()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw U_(e+(null!=this._name?" - ".concat(this._name):"")),new ox}},lx=ax,cx=Object.freeze({__proto__:null,TreeCache:lx});var ux=class{constructor(e){var t;h_(this,"_maxSize",void 0),h_(this,"_size",void 0),h_(this,"_head",void 0),h_(this,"_tail",void 0),h_(this,"_map",void 0),h_(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=null!==(t=e.mapKey)&&void 0!==t?t:e=>e}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){const t=this._keyMapper(e),n=this._map.get(t);if(n)return this.set(e,n.value),n.value}set(e,t){const n=this._keyMapper(e);this._map.get(n)&&this.delete(e);const r=this.head(),i={key:e,right:r,left:null,value:t};r?r.left=i:this._tail=i,this._map.set(n,i),this._head=i,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const e=this.tail();e&&this.delete(e.key)}delete(e){const t=this._keyMapper(e);if(!this._size||!this._map.has(t))return;const n=u_(this._map.get(t)),r=n.right,i=n.left;r&&(r.left=n.left),i&&(i.right=n.right),n===this.head()&&(this._head=r),n===this.tail()&&(this._tail=i),this._map.delete(t),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}},hx=ux,dx=Object.freeze({__proto__:null,LRUCache:hx});const{LRUCache:fx}=dx,{TreeCache:px}=cx;var mx=function(e){let{name:t,maxSize:n,mapNodeValue:r=e=>e}=e;const i=new fx({maxSize:n}),s=new px({name:t,mapNodeValue:r,onHit:e=>{i.set(e,!0)},onSet:e=>{const t=i.tail();i.set(e,!0),t&&s.size()>n&&s.delete(t.key)}});return s};function gx(e,t,n){if("string"===typeof e&&!e.includes('"')&&!e.includes("\\"))return'"'.concat(e,'"');switch(typeof e){case"undefined":return"";case"boolean":return e?"true":"false";case"number":case"symbol":return String(e);case"string":return JSON.stringify(e);case"function":if(!0!==(null===t||void 0===t?void 0:t.allowFunctions))throw l_("Attempt to serialize function in a Recoil cache key");return"__FUNCTION(".concat(e.name,")__")}if(null===e)return"null";var r;if("object"!==typeof e)return null!==(r=JSON.stringify(e))&&void 0!==r?r:"";if(c_(e))return"__PROMISE__";if(Array.isArray(e))return"[".concat(e.map(((e,n)=>gx(e,t,n.toString()))),"]");if("function"===typeof e.toJSON)return gx(e.toJSON(n),t,n);if(e instanceof Map){const r={};for(const[n,i]of e)r["string"===typeof n?n:gx(n,t)]=i;return gx(r,t,n)}return e instanceof Set?gx(Array.from(e).sort(((e,n)=>gx(e,t).localeCompare(gx(n,t)))),t,n):void 0!==Symbol&&null!=e[Symbol.iterator]&&"function"===typeof e[Symbol.iterator]?gx(Array.from(e),t,n):"{".concat(Object.keys(e).filter((t=>void 0!==e[t])).sort().map((n=>"".concat(gx(n,t),":").concat(gx(e[n],t,n)))).join(","),"}")}var vx=function(e){return gx(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{allowFunctions:!1})};const{TreeCache:yx}=cx,wx={equality:"reference",eviction:"keep-all",maxSize:1/0};var bx=function(){let{equality:e=wx.equality,eviction:t=wx.eviction,maxSize:n=wx.maxSize}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wx,r=arguments.length>1?arguments[1]:void 0;const i=function(e){switch(e){case"reference":return e=>e;case"value":return e=>vx(e)}throw l_("Unrecognized equality policy ".concat(e))}(e);return function(e,t,n,r){switch(e){case"keep-all":return new yx({name:r,mapNodeValue:n});case"lru":return mx({name:r,maxSize:u_(t),mapNodeValue:n});case"most-recent":return mx({name:r,maxSize:1,mapNodeValue:n})}throw l_("Unrecognized eviction policy ".concat(e))}(t,n,i,r)};const{isReactNative:_x,isWindow:Sx}=zE;var Ex={startPerfBlock:function(e){return()=>null}};const{isLoadable:Ix,loadableWithError:Tx,loadableWithPromise:kx,loadableWithValue:xx}=R_,{WrappedValue:Cx}=ix,{getNodeLoadable:Nx,peekNodeLoadable:Ax,setNodeValue:Rx}=QS,{saveDepsToStore:Dx}=ES,{DEFAULT_VALUE:Px,getConfigDeletionHandler:Ox,getNode:Lx,registerNode:Mx}=uS,{isRecoilValue:Fx}=Z_,{markRecoilValueModified:jx}=yE,{retainedByOptionWithDefault:Ux}=AE,{recoilCallback:Vx}=Qk,{startPerfBlock:Bx}=Ex;class zx{}const qx=new zx,Gx=[],Kx=new Map,Hx=(()=>{let e=0;return()=>e++})();function Wx(e){let t=null;const{key:n,get:r,cachePolicy_UNSTABLE:i}=e,s=null!=e.set?e.set:void 0;const o=new Set,a=bx(null!==i&&void 0!==i?i:{equality:"reference",eviction:"keep-all"},n),l=Ux(e.retainedBy_UNSTABLE),c=new Map;let u=0;function h(){return!L_("recoil_memory_managament_2020")||u>0}function d(e){return e.getState().knownSelectors.add(n),u++,()=>{u--}}function f(){return void 0!==Ox(n)&&!h()}function p(e,t,n,r,i){x(t,r,i),m(e,n)}function m(e,t){k(e,t)&&T(e),g(t,!0)}function g(e,n){const r=Kx.get(e);if(null!=r){for(const e of r)jx(e,u_(t));n&&Kx.delete(e)}}function v(e,t){let n=Kx.get(t);null==n&&Kx.set(t,n=new Set),n.add(e)}function y(e,t,n,r,i,s){return t.then((r=>{if(!h())throw T(e),qx;null!=s.loadingDepKey&&s.loadingDepPromise===t?n.atomValues.set(s.loadingDepKey,xx(r)):e.getState().knownSelectors.forEach((e=>{n.atomValues.delete(e)}));const o=_(e,n);if(o&&"loading"!==o.state){if((k(e,i)||null==I(e))&&m(e,i),"hasValue"===o.state)return o.contents;throw o.contents}if(!k(e,i)){const t=E(e,n);if(null!=t)return t.loadingLoadable.contents}const[a,l]=b(e,n,i);if("loading"!==a.state&&p(e,n,i,a,l),"hasError"===a.state)throw a.contents;return a.contents})).catch((t=>{if(t instanceof zx)throw qx;if(!h())throw T(e),qx;const s=Tx(t);throw p(e,n,i,s,r),t}))}function w(e,t,r,i){var s,a,l,c,u,h,d;(k(e,i)||t.version===(null===(s=e.getState())||void 0===s||null===(a=s.currentTree)||void 0===a?void 0:a.version)||t.version===(null===(l=e.getState())||void 0===l||null===(c=l.nextTree)||void 0===c?void 0:c.version))&&Dx(n,r,e,null!==(u=null===(h=e.getState())||void 0===h||null===(d=h.nextTree)||void 0===d?void 0:d.version)&&void 0!==u?u:e.getState().currentTree.version);for(const n of r)o.add(n)}function b(e,i,s){const o=Bx(n);let a=!0,l=!0;const c=()=>{o(),l=!1};let u,d,f=!1;const m={loadingDepKey:null,loadingDepPromise:null},v=new Map;function b(t){let{key:n}=t;const r=Nx(e,i,n);switch(v.set(n,r),a||(w(e,i,new Set(v.keys()),s),function(e,t){k(e,t)&&(u_(I(e)).stateVersions.clear(),g(t,!1))}(e,s)),r.state){case"hasValue":return r.contents;case"hasError":throw r.contents;case"loading":throw m.loadingDepKey=n,m.loadingDepPromise=r.contents,r.contents}throw l_("Invalid Loadable state")}const _=n=>function(){if(l)throw l_("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");null==t&&Lk(!1);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return Vx(e,n,i,{node:t})};try{u=r({get:b,getCallback:_}),u=Fx(u)?b(u):u,Ix(u)&&("hasError"===u.state&&(f=!0),u=u.contents),c_(u)?u=function(e,t,n,r,i,s){return t.then((t=>{if(!h())throw T(e),qx;const s=xx(t);return p(e,n,i,s,r),t})).catch((t=>{if(!h())throw T(e),qx;if(c_(t))return y(e,t,n,r,i,s);const o=Tx(t);throw p(e,n,i,o,r),t}))}(e,u,i,v,s,m).finally(c):c(),u=u instanceof Cx?u.value:u}catch(S){u=S,c_(u)?u=y(e,u,i,v,s,m).finally(c):(f=!0,c())}return d=f?Tx(u):c_(u)?kx(u):xx(u),a=!1,function(e,t,n){if(k(e,t)){const t=I(e);null!=t&&(t.depValuesDiscoveredSoFarDuringAsyncWork=n)}}(e,s,v),w(e,i,new Set(v.keys()),s),[d,v]}function _(e,t){let r=t.atomValues.get(n);if(null!=r)return r;const i=new Set;try{r=a.get((n=>("string"!==typeof n&&Lk(!1),Nx(e,t,n).contents)),{onNodeVisit:e=>{"branch"===e.type&&e.nodeKey!==n&&i.add(e.nodeKey)}})}catch(o){throw l_('Problem with cache lookup for selector "'.concat(n,'": ').concat(o.message))}var s;r&&(t.atomValues.set(n,r),w(e,t,i,null===(s=I(e))||void 0===s?void 0:s.executionID));return r}function S(e,t){const n=_(e,t);if(null!=n)return T(e),n;const r=E(e,t);var i;if(null!=r)return"loading"===(null===(i=r.loadingLoadable)||void 0===i?void 0:i.state)&&v(e,r.executionID),r.loadingLoadable;const s=Hx(),[o,a]=b(e,t,s);return"loading"===o.state?(!function(e,t,n,r,i){c.set(e,{depValuesDiscoveredSoFarDuringAsyncWork:r,executionID:t,loadingLoadable:n,stateVersions:new Map([[i.version,!0]])})}(e,s,o,a,t),v(e,s)):(T(e),x(t,o,a)),o}function E(e,t){const n=UE([c.has(e)?[u_(c.get(e))]:[],tS(MS(c,(t=>{let[n]=t;return n!==e})),(e=>{let[,t]=e;return t}))]);function r(n){for(const[r,i]of n)if(!Nx(e,t,r).is(i))return!0;return!1}for(const i of n){if(i.stateVersions.get(t.version)||!r(i.depValuesDiscoveredSoFarDuringAsyncWork))return i.stateVersions.set(t.version,!0),i;i.stateVersions.set(t.version,!1)}}function I(e){return c.get(e)}function T(e){c.delete(e)}function k(e,t){var n;return t===(null===(n=I(e))||void 0===n?void 0:n.executionID)}function x(e,t,r){e.atomValues.set(n,t);try{a.set(function(e){return Array.from(e.entries()).map((e=>{let[t,n]=e;return[t,n.contents]}))}(r),t)}catch(i){throw l_('Problem with setting cache for selector "'.concat(n,'": ').concat(i.message))}}function C(e,t){const r=t.atomValues.get(n);return null!=r?r:a.get((n=>{var r;return"string"!==typeof n&&Lk(!1),null===(r=Ax(e,t,n))||void 0===r?void 0:r.contents}))}function N(e,t){return function(e){if(Gx.includes(n)){const e="Recoil selector has circular dependencies: ".concat(Gx.slice(Gx.indexOf(n)).join(" \u2192 "));return Tx(l_(e))}Gx.push(n);try{return e()}finally{Gx.pop()}}((()=>S(e,t)))}function A(e){e.atomValues.delete(n)}function R(e,n){null==t&&Lk(!1);for(const t of o){var r;const i=Lx(t);null===(r=i.clearCache)||void 0===r||r.call(i,e,n)}o.clear(),A(n),a.clear(),jx(e,t)}if(null!=s){const r=(e,t,r)=>{let i=!1;const o=new Map;function a(r){let{key:s}=r;if(i)throw l_("Recoil: Async selector sets are not currently supported.");const o=Nx(e,t,s);if("hasValue"===o.state)return o.contents;if("loading"===o.state){const e='Getting value of asynchronous atom or selector "'.concat(s,'" in a pending state while setting selector "').concat(n,'" is not yet supported.');throw U_(e),l_(e)}throw o.contents}function l(n,r){if(i){const e="Recoil: Async selector sets are not currently supported.";throw U_(e),l_(e)}const s="function"===typeof r?r(a(n)):r;Rx(e,t,n.key,s).forEach(((e,t)=>o.set(t,e)))}const c=s({set:l,get:a,reset:function(e){l(e,Px)}},r);if(void 0!==c)throw c_(c)?l_("Recoil: Async selector sets are not currently supported."):l_("Recoil: selector set should be a void function.");return i=!0,o};return t=Mx({key:n,nodeType:"selector",peek:C,get:N,set:r,init:d,invalidate:A,clearCache:R,shouldDeleteConfigOnRelease:f,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l})}return t=Mx({key:n,nodeType:"selector",peek:C,get:N,init:d,invalidate:A,clearCache:R,shouldDeleteConfigOnRelease:f,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:l})}Wx.value=e=>new Cx(e);var Qx=Wx;const{isLoadable:Jx,loadableWithError:Yx,loadableWithPromise:$x,loadableWithValue:Xx}=R_,{WrappedValue:Zx}=ix,{peekNodeInfo:eC}=QS,{DEFAULT_VALUE:tC,DefaultValue:nC,getConfigDeletionHandler:rC,registerNode:iC,setConfigDeletionHandler:sC}=uS,{isRecoilValue:oC}=Z_,{getRecoilValueAsLoadable:aC,markRecoilValueModified:lC,setRecoilValue:cC,setRecoilValueLoadable:uC}=yE,{retainedByOptionWithDefault:hC}=AE,dC=e=>e instanceof Zx?e.value:e;function fC(e){const{key:t,persistence_UNSTABLE:n}=e,r=hC(e.retainedBy_UNSTABLE);let i=0;function s(e){return $x(e.then((e=>(a=Xx(e),e))).catch((e=>{throw a=Yx(e),e})))}let o,a=c_(e.default)?s(e.default):Jx(e.default)?"loading"===e.default.state?s(e.default.contents):e.default:Xx(dC(e.default));c(a.contents);const l=new Map;function c(e){return e}function u(e,n){var r,i;return null!==(r=null!==(i=n.atomValues.get(t))&&void 0!==i?i:o)&&void 0!==r?r:a}const h=iC({key:t,nodeType:"atom",peek:u,get:function(e,r){if(r.atomValues.has(t))return u_(r.atomValues.get(t));if(r.nonvalidatedAtoms.has(t)){if(null!=o)return o;if(null==n)return eS("Tried to restore a persisted value for atom ".concat(t," but it has no persistence settings.")),a;const e=r.nonvalidatedAtoms.get(t),i=n.validator(e,tC),s=i instanceof nC?a:Xx(i);return o=s,o}return a},set:function(e,n,r){if(n.atomValues.has(t)){const e=u_(n.atomValues.get(t));if("hasValue"===e.state&&r===e.contents)return new Map}else if(!n.nonvalidatedAtoms.has(t)&&r instanceof nC)return new Map;return o=void 0,(new Map).set(t,Xx(r))},init:function(n,r,s){var o;if(i++,n.getState().knownAtoms.add(t),"loading"===a.state){const m=()=>{var e;(null!==(e=n.getState().nextTree)&&void 0!==e?e:n.getState().currentTree).atomValues.has(t)||lC(n,h)};a.contents.finally(m)}const c=null!==(o=e.effects)&&void 0!==o?o:e.effects_UNSTABLE;if(null!=c){let g=tC,v=!0,y=!1,w=null;function b(e){if(v&&e.key===t){const e=g;return e instanceof nC?u(n,r):c_(e)?$x(e.then((e=>e instanceof nC?a.toPromise():e))):Xx(e)}return aC(n,e)}function _(e){return b(e).toPromise()}function S(e){var r;const i=eC(n,null!==(r=n.getState().nextTree)&&void 0!==r?r:n.getState().currentTree,e.key);return!v||e.key!==t||g instanceof nC?i:{...i,isSet:!0,loadable:b(e)}}const E=e=>t=>{if(v){const n=b(h),r="hasValue"===n.state?n.contents:tC;g="function"===typeof t?t(r):t,c_(g)&&(g=g.then((t=>(w={effect:e,value:t},t))))}else{if(c_(t))throw l_("Setting atoms to async values is not implemented.");"function"!==typeof t&&(w={effect:e,value:dC(t)}),cC(n,h,"function"===typeof t?n=>{const r=dC(t(n));return w={effect:e,value:r},r}:dC(t))}},I=e=>()=>E(e)(tC),T=e=>r=>{var i;const{release:s}=n.subscribeToTransactions((n=>{var i;let{currentTree:s,previousTree:o}=n.getState();o||(U_("Transaction subscribers notified without a next tree being present -- this is a bug in Recoil"),o=s);const l=null!==(i=s.atomValues.get(t))&&void 0!==i?i:a;if("hasValue"===l.state){var c,u,h,d;const n=l.contents,i=null!==(c=o.atomValues.get(t))&&void 0!==c?c:a,f="hasValue"===i.state?i.contents:tC;(null===(u=w)||void 0===u?void 0:u.effect)!==e||(null===(h=w)||void 0===h?void 0:h.value)!==n?r(n,f,!s.atomValues.has(t)):(null===(d=w)||void 0===d?void 0:d.effect)===e&&(w=null)}}),t);l.set(n,[...null!==(i=l.get(n))&&void 0!==i?i:[],s])};for(const k of c)try{const x=k({node:h,storeID:n.storeID,parentStoreID_UNSTABLE:n.parentStoreID,trigger:s,setSelf:E(k),resetSelf:I(k),onSet:T(k),getPromise:_,getLoadable:b,getInfo_UNSTABLE:S});var d;if(null!=x)l.set(n,[...null!==(d=l.get(n))&&void 0!==d?d:[],x])}catch(p){g=p,y=!0}if(v=!1,!(g instanceof nC)){var f;const C=y?Yx(g):c_(g)?$x(function(e,n){const r=n.then((n=>{var i,s;return(null===(s=(null!==(i=e.getState().nextTree)&&void 0!==i?i:e.getState().currentTree).atomValues.get(t))||void 0===s?void 0:s.contents)===r&&cC(e,h,n),n})).catch((n=>{var i,s;throw(null===(s=(null!==(i=e.getState().nextTree)&&void 0!==i?i:e.getState().currentTree).atomValues.get(t))||void 0===s?void 0:s.contents)===r&&uC(e,h,Yx(n)),n}));return r}(n,g)):Xx(dC(g));C.contents,r.atomValues.set(t,C),null===(f=n.getState().nextTree)||void 0===f||f.atomValues.set(t,C)}}return()=>{var e;i--,null===(e=l.get(n))||void 0===e||e.forEach((e=>e())),l.delete(n)}},invalidate:function(){o=void 0},shouldDeleteConfigOnRelease:function(){return void 0!==rC(t)&&i<=0},dangerouslyAllowMutability:e.dangerouslyAllowMutability,persistence_UNSTABLE:e.persistence_UNSTABLE?{type:e.persistence_UNSTABLE.type,backButton:e.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:r});return h}function pC(e){const{...t}=e,n="default"in e?e.default:new Promise((()=>{}));return oC(n)?function(e){const t=pC({...e,default:tC,persistence_UNSTABLE:void 0===e.persistence_UNSTABLE?void 0:{...e.persistence_UNSTABLE,validator:t=>t instanceof nC?t:u_(e.persistence_UNSTABLE).validator(t,tC)},effects:e.effects,effects_UNSTABLE:e.effects_UNSTABLE}),n=Qx({key:"".concat(e.key,"__withFallback"),get:n=>{let{get:r}=n;const i=r(t);return i instanceof nC?e.default:i},set:(e,n)=>{let{set:r}=e;return r(t,n)},cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:e.dangerouslyAllowMutability});return sC(n.key,rC(e.key)),n}({...t,default:n}):fC({...t,default:n})}pC.value=e=>new Zx(e);var mC=pC;var gC=class{constructor(e){var t;h_(this,"_map",void 0),h_(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=null!==(t=null===e||void 0===e?void 0:e.mapKey)&&void 0!==t?t:e=>e}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,t){this._map.set(this._keyMapper(e),t)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}},vC=gC,yC=Object.freeze({__proto__:null,MapCache:vC});const{LRUCache:wC}=dx,{MapCache:bC}=yC,_C={equality:"reference",eviction:"none",maxSize:1/0};var SC=function(){let{equality:e=_C.equality,eviction:t=_C.eviction,maxSize:n=_C.maxSize}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_C;const r=function(e){switch(e){case"reference":return e=>e;case"value":return e=>vx(e)}throw l_("Unrecognized equality policy ".concat(e))}(e);return function(e,t,n){switch(e){case"keep-all":return new bC({mapKey:n});case"lru":return new wC({mapKey:n,maxSize:u_(t)});case"most-recent":return new wC({mapKey:n,maxSize:1})}throw l_("Unrecognized eviction policy ".concat(e))}(t,n,r)};const{setConfigDeletionHandler:EC}=uS;var IC=function(e){var t,n;const r=SC({equality:null!==(t=null===(n=e.cachePolicyForParams_UNSTABLE)||void 0===n?void 0:n.equality)&&void 0!==t?t:"value",eviction:"keep-all"});return t=>{var n,i;const s=r.get(t);if(null!=s)return s;const{cachePolicyForParams_UNSTABLE:o,...a}=e,l="default"in e?e.default:new Promise((()=>{})),c=mC({...a,key:"".concat(e.key,"__").concat(null!==(n=vx(t))&&void 0!==n?n:"void"),default:"function"===typeof l?l(t):l,retainedBy_UNSTABLE:"function"===typeof e.retainedBy_UNSTABLE?e.retainedBy_UNSTABLE(t):e.retainedBy_UNSTABLE,effects:"function"===typeof e.effects?e.effects(t):"function"===typeof e.effects_UNSTABLE?e.effects_UNSTABLE(t):null!==(i=e.effects)&&void 0!==i?i:e.effects_UNSTABLE});return r.set(t,c),EC(c.key,(()=>{r.delete(t)})),c}};const{setConfigDeletionHandler:TC}=uS;let kC=0;var xC=function(e){var t,n;const r=SC({equality:null!==(t=null===(n=e.cachePolicyForParams_UNSTABLE)||void 0===n?void 0:n.equality)&&void 0!==t?t:"value",eviction:"keep-all"});return t=>{var n;let i;try{i=r.get(t)}catch(u){throw l_("Problem with cache lookup for selector ".concat(e.key,": ").concat(u.message))}if(null!=i)return i;const s="".concat(e.key,"__selectorFamily/").concat(null!==(n=vx(t,{allowFunctions:!0}))&&void 0!==n?n:"void","/").concat(kC++),o=n=>e.get(t)(n),a=e.cachePolicy_UNSTABLE,l="function"===typeof e.retainedBy_UNSTABLE?e.retainedBy_UNSTABLE(t):e.retainedBy_UNSTABLE;let c;if(null!=e.set){const n=e.set;c=Qx({key:s,get:o,set:(e,r)=>n(t)(e,r),cachePolicy_UNSTABLE:a,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:l})}else c=Qx({key:s,get:o,cachePolicy_UNSTABLE:a,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:l});return r.set(t,c),TC(c.key,(()=>{r.delete(t)})),c}};const CC=xC({key:"__constant",get:e=>()=>e,cachePolicyForParams_UNSTABLE:{equality:"reference"}});var NC=function(e){return CC(e)};const AC=xC({key:"__error",get:e=>()=>{throw l_(e)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});var RC=function(e){return AC(e)};var DC=function(e){return e};const{loadableWithError:PC,loadableWithPromise:OC,loadableWithValue:LC}=R_;function MC(e,t){const n=Array(t.length).fill(void 0),r=Array(t.length).fill(void 0);for(const[i,s]of t.entries())try{n[i]=e(s)}catch(jA){r[i]=jA}return[n,r]}function FC(e){return null!=e&&!c_(e)}function jC(e){return Array.isArray(e)?e:Object.getOwnPropertyNames(e).map((t=>e[t]))}function UC(e,t){return Array.isArray(e)?t:Object.getOwnPropertyNames(e).reduce(((e,n,r)=>({...e,[n]:t[r]})),{})}function VC(e,t,n){return UC(e,n.map(((e,n)=>null==e?LC(t[n]):c_(e)?OC(e):PC(e))))}var BC={waitForNone:xC({key:"__waitForNone",get:e=>t=>{let{get:n}=t;const r=jC(e),[i,s]=MC(n,r);return VC(e,i,s)},dangerouslyAllowMutability:!0}),waitForAny:xC({key:"__waitForAny",get:e=>t=>{let{get:n}=t;const r=jC(e),[i,s]=MC(n,r);return s.some((e=>!c_(e)))?VC(e,i,s):new Promise((t=>{for(const[n,r]of s.entries())c_(r)&&r.then((r=>{i[n]=r,s[n]=void 0,t(VC(e,i,s))})).catch((r=>{s[n]=r,t(VC(e,i,s))}))}))},dangerouslyAllowMutability:!0}),waitForAll:xC({key:"__waitForAll",get:e=>t=>{let{get:n}=t;const r=jC(e),[i,s]=MC(n,r);if(s.every((e=>null==e)))return UC(e,i);const o=s.find(FC);if(null!=o)throw o;return Promise.all(s).then((t=>{return UC(e,(n=i,t.map(((e,t)=>void 0===e?n[t]:e))));var n}))},dangerouslyAllowMutability:!0}),waitForAllSettled:xC({key:"__waitForAllSettled",get:e=>t=>{let{get:n}=t;const r=jC(e),[i,s]=MC(n,r);return s.every((e=>!c_(e)))?VC(e,i,s):Promise.all(s.map(((e,t)=>c_(e)?e.then((e=>{i[t]=e,s[t]=void 0})).catch((e=>{i[t]=void 0,s[t]=e})):null))).then((()=>VC(e,i,s)))},dangerouslyAllowMutability:!0}),noWait:xC({key:"__noWait",get:e=>t=>{let{get:n}=t;try{return Qx.value(LC(n(e)))}catch(r){return Qx.value(c_(r)?OC(r):PC(r))}},dangerouslyAllowMutability:!0})};const{RecoilLoadable:zC}=R_,{DefaultValue:qC}=uS,{RecoilRoot:GC,useRecoilStoreID:KC}=tT,{isRecoilValue:HC}=Z_,{retentionZone:WC}=OS,{freshSnapshot:QC}=yI,{useRecoilState:JC,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:YC,useRecoilStateLoadable:$C,useRecoilValue:XC,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:ZC,useRecoilValueLoadable:eN,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:tN,useResetRecoilState:nN,useSetRecoilState:rN}=HT,{useGotoRecoilSnapshot:iN,useRecoilSnapshot:sN,useRecoilTransactionObserver:oN}=fk,{useRecoilCallback:aN}=Qk,{noWait:lN,waitForAll:cN,waitForAllSettled:uN,waitForAny:hN,waitForNone:dN}=BC;var fN={DefaultValue:qC,isRecoilValue:HC,RecoilLoadable:zC,RecoilEnv:P_,RecoilRoot:GC,useRecoilStoreID:KC,useRecoilBridgeAcrossReactRoots_UNSTABLE:_k,atom:mC,selector:Qx,atomFamily:IC,selectorFamily:xC,constSelector:NC,errorSelector:RC,readOnlySelector:DC,noWait:lN,waitForNone:dN,waitForAny:hN,waitForAll:cN,waitForAllSettled:uN,useRecoilValue:XC,useRecoilValueLoadable:eN,useRecoilState:JC,useRecoilStateLoadable:$C,useSetRecoilState:rN,useResetRecoilState:nN,useGetRecoilValueInfo_UNSTABLE:gk,useRecoilRefresher_UNSTABLE:Xk,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:tN,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:ZC,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:YC,useRecoilCallback:aN,useRecoilTransaction_UNSTABLE:nx,useGotoRecoilSnapshot:iN,useRecoilSnapshot:sN,useRecoilTransactionObserver_UNSTABLE:oN,snapshot_UNSTABLE:QC,useRetain:fT,retentionZone:WC},pN=fN.RecoilRoot,mN=fN.atom,gN=fN.useRecoilState;const vN=mN({key:"pathState",default:""});const yN=function(e){const[t,n]=(0,s.useState)(""),[r,i]=(0,s.useState)(""),[o,a]=gN(vN),l=re(),c=e=>{l("/busStop"),"departure"===e?a("departure"):"destination"===e&&a("destination")};return(0,s.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("selectedDeparture")),t=JSON.parse(localStorage.getItem("selectedDestination"));if(e){const{localX:t,localY:r,stationNm:i}=e;n({localX:t["#text"],localY:r["#text"],stationNm:i["#text"]})}if(t){const{localX:e,localY:n,stationNm:r}=t;i({localX:e["#text"],localY:n["#text"],stationNm:r["#text"]})}}),[o]),(0,Yb.jsxs)("div",{className:"notice-container",children:[(0,Yb.jsx)($b,{}),(0,Yb.jsxs)("div",{children:[(0,Yb.jsx)("p",{children:"\uacbd\ub85c \uac80\uc0c9"}),(0,Yb.jsx)("p",{children:"\ube60\ub978 \uae38\ucc3e\uae30\ub97c \uc774\uc6a9\ud574\ubcf4\uc138\uc694."})]}),(0,Yb.jsxs)("div",{className:"inputContainer",children:[(0,Yb.jsx)("div",{className:"input",children:(0,Yb.jsx)("input",{name:"departure",type:"text",placeholder:"\ucd9c\ubc1c\uc9c0",defaultValue:t.stationNm,onClick:()=>c("departure")})}),(0,Yb.jsx)("div",{className:"input",children:(0,Yb.jsx)("input",{name:"destination",type:"text",placeholder:"\ub3c4\ucc29\uc9c0",defaultValue:r.stationNm,onClick:()=>c("destination")})}),(0,Yb.jsx)("div",{children:(0,Yb.jsx)("button",{className:"rectBtn",type:"button",onClick:()=>{window.open("http://m.map.naver.com/route.nhn?menu=route&sname=".concat(t.stationNm,"&sx=").concat(t.localX,"&sy=").concat(t.localY,"&ename=").concat(r.stationNm,"&ex=").concat(r.localX,"&ey=").concat(r.localY,"&pathType=0&showMap=true")),localStorage.removeItem("selectedDeparture"),localStorage.removeItem("selectedDestination")},children:"\uac80\uc0c9"})})]})]})},wN=e=>{let t={};if(1===e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var n=0;n<e.attributes.length;n++){var r=e.attributes.item(n);console.log(t["@attributes"]),t["@attributes"][r.nodeName]=r.nodeValue}}}else 3===e.nodeType&&(t=e.nodeValue);if(e.hasChildNodes())for(var i=0;i<e.childNodes.length;i++){var s=e.childNodes.item(i),o=s.nodeName;if("undefined"===typeof t[o])t[o]=wN(s);else{if("undefined"===typeof t[o].push){var a=t[o];t[o]=[],t[o].push(a)}t[o].push(wN(s))}}return t},bN=wN,_N=e=>{switch(e){case"E":return"\ub3d9";case"W":return"\uc11c";case"S":return"\ub0a8";case"N":return"\ubd81";default:return e}},SN=mN({key:"stationInfoState",default:{}});const EN=function(e){const[t,n]=(0,s.useState)([]),[r,i]=(0,s.useState)([]),[o,a]=(0,s.useState)([]),[l,c]=(0,s.useState)(!1),[u,h]=gN(SN),[d,f]=gN(vN),p=(0,s.useCallback)((e=>{const n=e?t.filter((t=>t.stationNm["#text"].includes(e))):[];i(n)}),[t]),m=e=>{console.log(e);const t={stationId:e.stationId["#text"],stationNm:e.stationNm["#text"],dirTp:"null"!==e.dirTp["#text"]?"[".concat(_N(e.dirTp["#text"]),"]"):""};localStorage.setItem("stationInfo",JSON.stringify(t)),h(t);const n=JSON.parse(localStorage.getItem("busStopSearchHistory"))||[];if(!n.some((t=>t.stationId["#text"]===e.stationId["#text"]))){const t=[...n,e];localStorage.setItem("busStopSearchHistory",JSON.stringify(t)),a(t)}d&&("departure"===d?localStorage.setItem("selectedDeparture",JSON.stringify(e)):"destination"===d&&localStorage.setItem("selectedDestination",JSON.stringify(e)),window.location.href="/pathSearch",f())};return(0,s.useEffect)((()=>{!async function(){try{const e=await fetch("/api1/OpenAPI/service/bis/Station"),t=await e.text(),r=(new DOMParser).parseFromString(t,"application/xml"),i=bN(r).response.body.items.item.filter((e=>"N"!==e.useYn["#text"]));n(i)}catch(e){console.error(e)}}()}),[]),(0,s.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("busStopSearchHistory"));a(e)}),[]),(0,Yb.jsxs)("div",{className:"notice-container",children:[(0,Yb.jsx)($b,{}),(0,Yb.jsxs)("div",{className:"mb-10",children:[(0,Yb.jsx)("p",{children:"\uc815\ub958\uc18c \uac80\uc0c9"}),(0,Yb.jsx)("p",{children:"\uc815\ub958\uc18c \uac80\uc0c9 \uc11c\ube44\uc2a4\ub97c \uc774\uc6a9\ud574\ubcf4\uc138\uc694."})]}),(0,Yb.jsx)(o_,{onSearch:p,children:"\uc815\ub958\uc18c\uba85\uc744 \uac80\uc0c9\ud574\uc8fc\uc138\uc694"}),(0,Yb.jsxs)("div",{className:"busStopItems",children:[r&&r.length>0?r.map(((e,t)=>(0,Yb.jsx)(Ce,{to:"/busStopDetail",className:"busStopItem",onClick:()=>m(e),children:(0,Yb.jsxs)("div",{children:["".concat(e.stationNm["#text"]," ").concat("null"!==e.dirTp["#text"]?"[".concat(_N(e.dirTp["#text"]),"]"):""),"(".concat(e.stationId["#text"],")")]})},t))):o&&o.length>0?o.map(((e,t)=>l?(0,Yb.jsxs)("div",{className:"busStopItem ".concat(l?"removeHistory":""),children:[(0,Yb.jsxs)("div",{className:"flex items-center",children:["".concat(e.stationNm["#text"]," ").concat("null"!==e.dirTp["#text"]?"[".concat(_N(e.dirTp["#text"]),"]"):""),(0,Yb.jsx)("span",{className:"busNum",children:"(".concat(e.stationId["#text"],")")})]}),(0,Yb.jsx)("div",{className:"removeBtn",onClick:n=>l?((e,t)=>{if(window.confirm("\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){const t=[...JSON.parse(localStorage.getItem("busStopSearchHistory"))||[]];t.splice(e,1),localStorage.setItem("busStopSearchHistory",JSON.stringify(t)),a(t)}t.preventDefault()})(t,n):m(e),children:"X"})]},t):(0,Yb.jsx)(Ce,{to:"/busStopDetail",className:"busStopItem ".concat(l?"removeHistory":""),onClick:()=>m(e),children:(0,Yb.jsxs)("div",{className:"flex items-center",children:["".concat(e.stationNm["#text"]," ").concat("null"!==e.dirTp["#text"]?"[".concat(_N(e.dirTp["#text"]),"]"):""),(0,Yb.jsx)("span",{className:"busNum",children:"(".concat(e.stationId["#text"],")")})]})},t))):null,(0,Yb.jsx)("div",{className:"historyeditorBtn",children:(0,Yb.jsx)("button",{className:"rectBtn",onClick:()=>{c((e=>!e))},children:l?"\ud3b8\uc9d1 \uc644\ub8cc":"\uac80\uc0c9\uae30\ub85d \ud3b8\uc9d1"})})]})]})};var IN=n(122);function TN(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function kN(){return kN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kN.apply(this,arguments)}function xN(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}const CN={NOT_LOADED:"NOT_LOADED",LOADING:"LOADING",LOADED:"LOADED",FAILED:"FAILED",AUTH_FAILURE:"AUTH_FAILURE"};class NN{static async load(e,t){var n;const r=e.libraries?e.libraries.split(","):[],i=this.serializeParams(e);this.listeners.push(t),null!=(n=window.google)&&null!=(n=n.maps)&&n.importLibrary?(this.serializedApiParams||(this.loadingStatus=CN.LOADED),this.notifyLoadingStatusListeners()):(this.serializedApiParams=i,this.initImportLibrary(e)),this.serializedApiParams&&this.serializedApiParams!==i&&console.warn("[google-maps-api-loader] The maps API has already been loaded with different parameters and will not be loaded again. Refresh the page for new values to have effect.");const s=["maps",...r];await Promise.all(s.map((e=>google.maps.importLibrary(e))))}static serializeParams(e){return[e.v,e.key,e.language,e.region,e.authReferrerPolicy,e.solutionChannel].join("/")}static initImportLibrary(e){if(window.google||(window.google={}),window.google.maps||(window.google.maps={}),window.google.maps.importLibrary)return void console.error("[google-maps-api-loader-internal]: initImportLibrary must only be called once");let t=null;const n=()=>t||(t=new Promise(((t,n)=>{var r;const i=document.createElement("script"),s=new URLSearchParams;for(const[o,a]of Object.entries(e)){const e=o.replace(/[A-Z]/g,(e=>"_"+e[0].toLowerCase()));s.set(e,a)}s.set("loading","async"),s.set("callback","__googleMapsCallback__"),i.async=!0,i.src="https://maps.googleapis.com/maps/api/js?"+s.toString(),i.nonce=(null==(r=document.querySelector("script[nonce]"))?void 0:r.nonce)||"",i.onerror=()=>{this.loadingStatus=CN.FAILED,this.notifyLoadingStatusListeners(),n(new Error("The Google Maps JavaScript API could not load."))},window.__googleMapsCallback__=()=>{this.loadingStatus=CN.LOADED,this.notifyLoadingStatusListeners(),t()},window.gm_authFailure=()=>{this.loadingStatus=CN.AUTH_FAILURE,this.notifyLoadingStatusListeners()},this.loadingStatus=CN.LOADING,this.notifyLoadingStatusListeners(),document.head.append(i)})),t);google.maps.importLibrary=e=>n().then((()=>google.maps.importLibrary(e)))}static notifyLoadingStatusListeners(){for(const e of this.listeners)e(this.loadingStatus)}}NN.loadingStatus=CN.NOT_LOADED,NN.serializedApiParams=void 0,NN.listeners=[];const AN=["onLoad","apiKey","version","libraries"],RN=["children"],DN=s.createContext(null);const PN=e=>{const{children:t}=e,n=xN(e,RN),{mapInstances:r,addMapInstance:i,removeMapInstance:o,clearMapInstances:a}=function(){const[e,t]=(0,s.useState)({});return{mapInstances:e,addMapInstance:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";t((t=>kN({},t,{[n]:e})))},removeMapInstance:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";t((t=>xN(t,[e].map(TN))))},clearMapInstances:()=>{t({})}}}(),{status:l,loadedLibraries:c,importLibrary:u}=function(e){const{onLoad:t,apiKey:n,version:r,libraries:i=[]}=e,o=xN(e,AN),[a,l]=(0,s.useState)(NN.loadingStatus),[c,u]=(0,s.useReducer)(((e,t)=>kN({},e,{[t.name]:t.value})),{}),h=(0,s.useMemo)((()=>null==i?void 0:i.join(",")),[i]),d=(0,s.useMemo)((()=>JSON.stringify(kN({apiKey:n,version:r},o))),[n,r,o]),f=(0,s.useCallback)((async e=>{var t;if(c[e])return c[e];if(null==(t=google)||null==(t=t.maps)||!t.importLibrary)throw new Error("[api-provider-internal] importLibrary was called before google.maps.importLibrary was defined.");const n=await window.google.maps.importLibrary(e);return u({name:e,value:n}),n}),[c]);return(0,s.useEffect)((()=>{(async()=>{try{const e=kN({key:n},o);r&&(e.v=r),(null==h?void 0:h.length)>0&&(e.libraries=h),void 0===e.solutionChannel?e.solutionChannel="GMP_visgl_rgmlibrary_v1_default":""===e.solutionChannel&&delete e.solutionChannel,await NN.load(e,(e=>l(e)));for(const t of["core","maps",...i])await f(t);t&&t()}catch(e){console.error("<ApiProvider> failed to load the Google Maps JavaScript API",e)}})()}),[n,h,d]),{status:a,loadedLibraries:c,importLibrary:f}}(n),h=(0,s.useMemo)((()=>({mapInstances:r,addMapInstance:i,removeMapInstance:o,clearMapInstances:a,status:l,loadedLibraries:c,importLibrary:u})),[r,i,o,a,l,c,u]);return s.createElement(DN.Provider,{value:h},t)};function ON(e,t,n){const r={type:e,map:t,detail:{},stoppable:!1,stop:()=>{}};if(MN.includes(e)){const e=r,n=t.getCenter(),i=t.getZoom(),s=t.getHeading()||0,o=t.getTilt()||0,a=t.getBounds();return n&&a&&Number.isFinite(i)||console.warn("[createEvent] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),e.detail={center:(null==n?void 0:n.toJSON())||{lat:0,lng:0},zoom:i||0,heading:s,tilt:o,bounds:(null==a?void 0:a.toJSON())||{north:90,east:180,south:-90,west:-180}},e}if(FN.includes(e)){var i;if(!n)throw new Error("[createEvent] mouse events must provide a srcEvent");const e=r;return e.domEvent=n.domEvent,e.stoppable=!0,e.stop=()=>n.stop(),e.detail={latLng:(null==(i=n.latLng)?void 0:i.toJSON())||null,placeId:n.placeId},e}return r}const LN={onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onContextmenu:"contextmenu",onDblclick:"dblclick",onDrag:"drag",onDragend:"dragend",onDragstart:"dragstart",onHeadingChanged:"heading_changed",onIdle:"idle",onIsFractionalZoomEnabledChanged:"isfractionalzoomenabled_changed",onMapCapabilitiesChanged:"mapcapabilities_changed",onMapTypeIdChanged:"maptypeid_changed",onMousemove:"mousemove",onMouseout:"mouseout",onMouseover:"mouseover",onProjectionChanged:"projection_changed",onRenderingTypeChanged:"renderingtype_changed",onTilesLoaded:"tilesloaded",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed",onCameraChanged:"bounds_changed"},MN=["bounds_changed","center_changed","heading_changed","tilt_changed","zoom_changed"],FN=["click","contextmenu","dblclick","mousemove","mouseout","mouseover"],jN=Object.keys(LN);function UN(e,t){const n=(0,s.useRef)(void 0);n.current&&IN(t,n.current)||(n.current=t),(0,s.useEffect)(e,n.current)}const VN=new Set(["backgroundColor","clickableIcons","controlSize","disableDefaultUI","disableDoubleClickZoom","draggable","draggableCursor","draggingCursor","fullscreenControl","fullscreenControlOptions","gestureHandling","isFractionalZoomEnabled","keyboardShortcuts","mapTypeControl","mapTypeControlOptions","mapTypeId","maxZoom","minZoom","noClear","panControl","panControlOptions","restriction","rotateControl","rotateControlOptions","scaleControl","scaleControlOptions","scrollwheel","streetView","streetViewControl","streetViewControlOptions","styles","zoomControl","zoomControlOptions"]);function BN(){var e;return(null==(e=(0,s.useContext)(DN))?void 0:e.status)||CN.NOT_LOADED}function zN(e){return function(e){return!(!e||"object"!==typeof e)&&"lat"in e&&"lng"in e&&Number.isFinite(e.lat)&&Number.isFinite(e.lng)}(e)?e:e.toJSON()}const qN=()=>s.createElement("div",{style:{position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:999,display:"flex",flexFlow:"column nowrap",textAlign:"center",justifyContent:"center",fontSize:".8rem",color:"rgba(0,0,0,0.6)",background:"#dddddd",padding:"1rem 1.5rem"}},s.createElement("h2",null,"Error: AuthFailure"),s.createElement("p",null,"A problem with your API key prevents the map from rendering correctly. Please make sure the value of the ",s.createElement("code",null,"APIProvider.apiKey")," prop is correct. Check the error-message in the console for further details."));function GN(){return BN()===CN.LOADED}function KN(e){const t=function(){const[,e]=(0,s.useReducer)((e=>e+1),0);return e}(),n=(0,s.useRef)({center:{lat:0,lng:0},heading:0,tilt:0,zoom:0});return(0,s.useEffect)((()=>{if(!e)return;const r=google.maps.event.addListener(e,"bounds_changed",(()=>{!function(e,t){const n=e.getCenter(),r=e.getZoom(),i=e.getHeading()||0,s=e.getTilt()||0,o=e.getBounds();n&&o&&Number.isFinite(r)||console.warn("[useTrackedCameraState] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),Object.assign(t.current,{center:(null==n?void 0:n.toJSON())||{lat:0,lng:0},zoom:r||0,heading:i,tilt:s})}(e,n),t()}));return()=>r.remove()}),[e,t]),n}const HN=["id","defaultBounds","defaultCenter","defaultZoom","defaultHeading","defaultTilt","reuseMaps"],WN=["padding"];class QN{static has(e){return this.entries[e]&&this.entries[e].length>0}static pop(e){return this.entries[e]&&this.entries[e].pop()||null}static push(e,t){this.entries[e]||(this.entries[e]=[]),this.entries[e].push(t)}}function JN(e,t){const n=GN(),[r,i]=(0,s.useState)(null),[o,a]=function(){const[e,t]=(0,s.useState)(null);return[e,(0,s.useCallback)((e=>t(e)),[t])]}(),l=KN(r),{id:c,defaultBounds:u,defaultCenter:h,defaultZoom:d,defaultHeading:f,defaultTilt:p,reuseMaps:m}=e,g=xN(e,HN),v=void 0!==e.zoom||void 0!==e.defaultZoom,y=void 0!==e.center||void 0!==e.defaultCenter;u||v&&y||console.warn("<Map> component is missing configuration. You have to provide zoom and center (via the `zoom`/`defaultZoom` and `center`/`defaultCenter` props) or specify the region to show using `defaultBounds`. See https://visgl.github.io/react-google-maps/docs/api-reference/components/map#required"),!g.center&&h&&(g.center=h),!g.zoom&&Number.isFinite(d)&&(g.zoom=d),!g.heading&&Number.isFinite(f)&&(g.heading=f),!g.tilt&&Number.isFinite(p)&&(g.tilt=p);for(const s of Object.keys(g))void 0===g[s]&&delete g[s];const w=(0,s.useRef)();return(0,s.useEffect)((()=>{if(!o||!n)return;const{addMapInstance:r,removeMapInstance:s}=t,a=e.mapId,h=a||"default";let d,f;if(m&&QN.has(h)?(f=QN.pop(h),d=f.getDiv(),o.appendChild(d),f.setOptions(g),setTimeout((()=>f.setCenter(f.getCenter())),0)):(d=document.createElement("div"),d.style.height="100%",o.appendChild(d),f=new google.maps.Map(d,g)),i(f),r(f,c),u){const{padding:e}=u,t=xN(u,WN);f.fitBounds(t,e)}else v&&y||f.fitBounds({east:180,west:-180,south:-90,north:90});if(w.current){const{mapId:e,cameraState:t}=w.current;e!==a&&f.setOptions(t)}return()=>{w.current={mapId:a,cameraState:l.current},d.remove(),m?QN.push(h,f):google.maps.event.clearInstanceListeners(f),i(null),s(c)}}),[o,n,c,e.mapId]),[r,a,l]}QN.entries={};const YN=s.createContext(null),$N=e=>{const{children:t,id:n,className:r,style:i}=e,o=(0,s.useContext)(DN),a=BN();if(!o)throw new Error("<Map> can only be used inside an <ApiProvider> component.");const[l,c,u]=JN(e,o);!function(e,t,n){const r=n.center?zN(n.center):null;let i=null,o=null;r&&Number.isFinite(r.lat)&&Number.isFinite(r.lng)&&(i=r.lat,o=r.lng);const a=Number.isFinite(n.zoom)?n.zoom:null,l=Number.isFinite(n.heading)?n.heading:null,c=Number.isFinite(n.tilt)?n.tilt:null;(0,s.useLayoutEffect)((()=>{if(!e)return;const n={};let r=!1;null===i||null===o||t.current.center.lat===i&&t.current.center.lng===o||(n.center={lat:i,lng:o},r=!0),null!==a&&t.current.zoom!==a&&(n.zoom=a,r=!0),null!==l&&t.current.heading!==l&&(n.heading=l,r=!0),null!==c&&t.current.tilt!==c&&(n.tilt=c,r=!0),r&&e.moveCamera(n)}))}(l,u,e),function(e,t){for(const n of jN){const r=t[n],i=LN[n];(0,s.useEffect)((()=>{if(!e)return;if(!r)return;const t=google.maps.event.addListener(e,i,(t=>{r(ON(i,e,t))}));return()=>t.remove()}),[e,i,r])}}(l,e),function(e,t){const n={},r=Object.keys(t);for(const i of r)VN.has(i)&&(n[i]=t[i]);UN((()=>{e&&e.setOptions(n)}),[n])}(l,e);const h=function(e,t){const{viewport:n,viewState:r}=t,i=!!n;return(0,s.useLayoutEffect)((()=>{if(!e||!r)return;const{latitude:t,longitude:n,bearing:i,pitch:s,zoom:o}=r;e.moveCamera({center:{lat:t,lng:n},heading:i,tilt:s,zoom:o+1})}),[e,r]),i}(l,e),d=!!e.controlled;(0,s.useEffect)((()=>{if(l)return h&&l.setOptions({disableDefaultUI:!0}),(h||d)&&l.setOptions({gestureHandling:"none",keyboardShortcuts:!1}),()=>{l.setOptions({gestureHandling:e.gestureHandling,keyboardShortcuts:e.keyboardShortcuts})}}),[l,h,d,e.gestureHandling,e.keyboardShortcuts]);const f=e.center?zN(e.center):null;let p=null,m=null;f&&Number.isFinite(f.lat)&&Number.isFinite(f.lng)&&(p=f.lat,m=f.lng);const g=(0,s.useMemo)((()=>{var t,n,r,i,s;return{center:{lat:null!=(t=p)?t:0,lng:null!=(n=m)?n:0},zoom:null!=(r=e.zoom)?r:0,heading:null!=(i=e.heading)?i:0,tilt:null!=(s=e.tilt)?s:0}}),[p,m,e.zoom,e.heading,e.tilt]);(0,s.useLayoutEffect)((()=>{if(!l||!d)return;l.moveCamera(g);const e=l.addListener("bounds_changed",(()=>{l.moveCamera(g)}));return()=>e.remove()}),[l,d,g]);const v=(0,s.useMemo)((()=>kN({width:"100%",height:"100%",position:"relative",zIndex:h?-1:0},i)),[i,h]),y=(0,s.useMemo)((()=>({map:l})),[l]);return a===CN.AUTH_FAILURE?s.createElement("div",{style:kN({position:"relative"},r?{}:v),className:r},s.createElement(qN,null)):s.createElement("div",kN({ref:c,"data-testid":"map",style:r?void 0:v,className:r},n?{id:n}:{}),l?s.createElement(YN.Provider,{value:y},t):null)};$N.deckGLViewProps=!0;const XN=new Set;function ZN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=JSON.stringify(t);XN.has(r)||(XN.add(r),console.error(...t))}const eA=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=(0,s.useContext)(DN),{map:n}=(0,s.useContext)(YN)||{};if(null===t)return ZN("useMap(): failed to retrieve APIProviderContext. Make sure that the <APIProvider> component exists and that the component you are calling `useMap()` from is a sibling of the <APIProvider>."),null;const{mapInstances:r}=t;return null!==e?r[e]||null:n||(r.default||null)};function tA(e){const t=GN(),n=(0,s.useContext)(DN);return(0,s.useEffect)((()=>{t&&n&&n.importLibrary(e)}),[t,n,e]),(null==n?void 0:n.loadedLibraries[e])||null}function nA(e,t,n){if(null!=t&&"object"!==typeof t)throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.");const r=e.style;if(null!=n){for(const e in n)if(n.hasOwnProperty(e)&&(null==t||!t.hasOwnProperty(e))){0===e.indexOf("--")?r.setProperty(e,""):"float"===e?r.cssFloat="":r[e]=""}if(null!=t)for(const e in t){const i=t[e];t.hasOwnProperty(e)&&n[e]!==i&&rA(r,e,i)}}else{if(null==t)return;for(const e in t)t.hasOwnProperty(e)&&rA(r,e,t[e])}}function rA(e,t,n){const r=0===t.indexOf("--");var i;null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||(i=t,iA.has(i))?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}const iA=new Set(["animationIterationCount","aspectRatio","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","scale","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth"]);function sA(e,t,n){(0,s.useEffect)((()=>{if(!e||!t||!n)return;const r=google.maps.event.addListener(e,t,n);return()=>r.remove()}),[e,t,n])}function oA(e,t,n){(0,s.useEffect)((()=>{e&&(e[t]=n)}),[e,t,n])}const aA=s.createContext(null);const lA=(0,s.forwardRef)(((e,t)=>{const{children:n}=e,[r,i]=function(e){const[t,n]=(0,s.useState)(null),[r,i]=(0,s.useState)(null),o=(0,s.useRef)(null),a=eA(),l=tA("marker"),{children:c,className:u,style:h,onClick:d,onDrag:f,onDragStart:p,onDragEnd:m,collisionBehavior:g,clickable:v,draggable:y,position:w,title:b,zIndex:_}=e,S=s.Children.count(c);return(0,s.useEffect)((()=>{if(!a||!l)return;const e=new l.AdvancedMarkerElement;e.map=a,n(e);let t=null;return S>0&&(t=document.createElement("div"),e.content=t,i(t)),()=>{var r;e.map=null,null==(r=t)||r.remove(),n(null),i(null)}}),[a,l,S]),(0,s.useEffect)((()=>{t&&t.content&&(t.content.className=u||"")}),[t,u]),oA(r,"className",null!=u?u:""),(0,s.useEffect)((()=>{r&&(nA(r,h||null,o.current),o.current=h||null)}),[r,u,h]),oA(t,"position",w),oA(t,"title",null!=b?b:""),oA(t,"zIndex",_),oA(t,"collisionBehavior",g),(0,s.useEffect)((()=>{t&&(t.gmpDraggable=void 0!==y?y:!!(f||p||m))}),[t,y,f,m,p]),(0,s.useEffect)((()=>{t&&(t.gmpClickable=void 0!==v?v:!!d)}),[t,v,d]),sA(t,"click",d),sA(t,"drag",f),sA(t,"dragstart",p),sA(t,"dragend",m),[t,r]}(e),o=(0,s.useMemo)((()=>r?{marker:r}:null),[r]);return(0,s.useImperativeHandle)(t,(()=>r),[r]),i?s.createElement(aA.Provider,{value:o},(0,l.createPortal)(n,i)):null}));const cA=["onClick","onDrag","onDragStart","onDragEnd","onMouseOver","onMouseOut"];(0,s.forwardRef)(((e,t)=>{const n=function(e){const[t,n]=(0,s.useState)(null),r=eA(),{onClick:i,onDrag:o,onDragStart:a,onDragEnd:l,onMouseOver:c,onMouseOut:u}=e,h=xN(e,cA),{position:d,draggable:f}=h;return(0,s.useEffect)((()=>{if(!r)return void(void 0===r&&console.error("<Marker> has to be inside a Map component."));const e=new google.maps.Marker(h);return e.setMap(r),n(e),()=>{e.setMap(null),n(null)}}),[r]),(0,s.useEffect)((()=>{if(!t)return;const e=t,n=google.maps.event;return i&&n.addListener(e,"click",i),o&&n.addListener(e,"drag",o),a&&n.addListener(e,"dragstart",a),l&&n.addListener(e,"dragend",l),c&&n.addListener(e,"mouseover",c),u&&n.addListener(e,"mouseout",u),t.setDraggable(Boolean(f)),()=>{n.clearInstanceListeners(e)}}),[t,f,i,o,a,l,c,u]),(0,s.useEffect)((()=>{t&&h&&t.setOptions(h)}),[t,h]),(0,s.useEffect)((()=>{!f&&d&&t&&t.setPosition(d)}),[f,d,t]),t}(e);return(0,s.useImperativeHandle)(t,(()=>n),[n]),s.createElement(s.Fragment,null)}));const uA=e=>{var t;const n=null==(t=(0,s.useContext)(aA))?void 0:t.marker,r=(0,s.useMemo)((()=>document.createElement("div")),[]);return(0,s.useEffect)((()=>{if(!n)return void(void 0===n&&console.error("The <Pin> component can only be used inside <AdvancedMarker>."));e.glyph&&e.children&&ZN("The <Pin> component only uses children to render the glyph if both the glyph property and children are present."),s.Children.count(e.children)>1&&ZN("Passing multiple children to the <Pin> component might lead to unexpected results.");const t=kN({},e),i=new google.maps.marker.PinElement(t);e.children&&(i.glyph=r),n.content=i.element}),[n,r,e]),(0,l.createPortal)(e.children,r)};var hA={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function dA(e){var t=function(e){if("number"===typeof e)return{value:e,unit:"px"};var t,n=(e.match(/^[0-9.]*/)||"").toString();t=n.includes(".")?parseFloat(n):parseInt(n,10);var r=(e.match(/[^0-9]*$/)||"").toString();return hA[r]?{value:t,unit:r}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}(e);return"".concat(t.value).concat(t.unit)}var fA=function(){return fA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},fA.apply(this,arguments)},pA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},mA=function(e,t,n){var r="react-spinners-".concat(e,"-").concat(n);if("undefined"==typeof window||!window.document)return r;var i=document.createElement("style");document.head.appendChild(i);var s=i.sheet,o="\n    @keyframes ".concat(r," {\n      ").concat(t,"\n    }\n  ");return s&&s.insertRule(o,0),r}("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");const gA=function(e){var t=e.loading,n=void 0===t||t,r=e.color,i=void 0===r?"#000000":r,o=e.speedMultiplier,a=void 0===o?1:o,l=e.cssOverride,c=void 0===l?{}:l,u=e.size,h=void 0===u?35:u,d=pA(e,["loading","color","speedMultiplier","cssOverride","size"]),f=fA({background:"transparent !important",width:dA(h),height:dA(h),borderRadius:"100%",border:"2px solid",borderTopColor:i,borderBottomColor:"transparent",borderLeftColor:i,borderRightColor:i,display:"inline-block",animation:"".concat(mA," ").concat(.75/a,"s 0s infinite linear"),animationFillMode:"both"},c);return n?s.createElement("span",fA({style:f},d)):null};function vA(){return(0,Yb.jsxs)("div",{className:"container flex flex-col gap-10 items-center justify-center mt-[80px]",children:[(0,Yb.jsx)(gA,{color:"#1e4066",cssOverride:{"border-width":"10px"},loading:!0,size:190,speedMultiplier:1}),(0,Yb.jsx)("div",{className:"text-[#1e4066]",children:"\ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4..."})]})}const yA=function(){const[e,t]=(0,s.useState)({lat:37.7937,lng:-122.3965}),[n,r]=(0,s.useState)([]),[i,o]=(0,s.useState)(!0),a=e=>{let{coords:n}=e;const i={lat:n.latitude,lng:n.longitude};t(i),(async e=>{try{const t=await fetch("/googleMap/maps/api/place/nearbysearch/json?location=".concat(e.lat,",").concat(e.lng,"&radius=2000&type=bus_station&key=").concat("AIzaSyD2O5f3i3-FGjddQaPrS_vNQiUdrpzUnbc"));if(!t.ok)throw new Error("HTTP error! status: ".concat(t.status));const n=await t.json();r(n.results)}catch(t){console.error("Error fetching bus stops:",t)}finally{o(!1)}})(i)},l=e=>{console.error("Error getting geolocation:",e),o(!1)};return(0,s.useEffect)((()=>{navigator.geolocation.getCurrentPosition(a,l)}),[]),i?(0,Yb.jsx)(vA,{}):(0,Yb.jsxs)($N,{defaultZoom:15,center:e,mapId:"AIzaSyD2O5f3i3-FGjddQaPrS_vNQiUdrpzUnbc",style:{width:"100%",height:"100%"},children:[n.map(((e,t)=>(0,Yb.jsx)(lA,{position:{lat:e.geometry.location.lat,lng:e.geometry.location.lng},children:(0,Yb.jsx)(uA,{background:"#1e4066",glyphColor:"#fff",borderColor:"#000"})},t))),(0,Yb.jsxs)("div",{className:"pb-20",children:[(0,Yb.jsxs)("div",{className:"flex gap-2 md:gap-20 lg:gap-40 text-left px-4 py-2 mt-10 bg-[#1e4066] text-white",children:[(0,Yb.jsx)("div",{className:"w-16 lg:w-10",children:"\ubc88\ud638"}),(0,Yb.jsx)("div",{className:"w-96 lg:w-96",children:"\uc815\ub958\uc18c \uba85"}),(0,Yb.jsx)("div",{className:"w-20 lg:w-60",children:"\ud3c9\uc810"})]}),(0,Yb.jsx)("ul",{className:"h-80 overflow-scroll",children:n.map(((e,t)=>{var n;return(0,Yb.jsxs)("li",{className:"flex gap-2 md:gap-20 lg:gap-40 text-left border-b-[1px] border-[#e6e6e6] px-4 py-2",children:[(0,Yb.jsx)("div",{className:"w-16 lg:w-10",children:t+1}),(0,Yb.jsxs)("div",{className:"w-96 lg:w-96",children:[e.name," \uc815\ub958\uc7a5"]}),(0,Yb.jsx)("div",{className:"w-20 lg:w-60",children:null!==(n=e.rating)&&void 0!==n?n:"X"})]},t)}))})]})]})};const wA=function(e){return(0,Yb.jsxs)("div",{className:"notice-container",children:[(0,Yb.jsx)($b,{}),(0,Yb.jsxs)("div",{children:[(0,Yb.jsx)("p",{children:"\uc8fc\ubcc0 \uc815\ub958\uc18c"}),(0,Yb.jsx)("p",{children:"\ud604\uc7ac \uc704\uce58\uc758 2000m(2km)\ub0b4\uc758 \ubc84\uc2a4\uc815\ub958\uc7a5\uc774 \ud45c\uc2dc\ub429\ub2c8\ub2e4."})]}),(0,Yb.jsx)("div",{className:"w-full h-96 mt-10",children:(0,Yb.jsx)(yA,{})})]})},bA=JSON.parse('{"b":{"\uae09\ud589":[{"id":405001,"number":"101"},{"id":405002,"number":"102"},{"id":405003,"number":"111, 112"},{"id":405004,"number":"121, 122"},{"id":405005,"number":"131, 132"},{"id":405006,"number":"151, 152"},{"id":405007,"number":"181"},{"id":405008,"number":"182"}],"\uc77c\ubc18\uac04\uc120":[{"id":405009,"number":"201"},{"id":405010,"number":"202"},{"id":405011,"number":"202-1"},{"id":405012,"number":"202-2"},{"id":405013,"number":"211, 212"},{"id":405014,"number":"221, 222"},{"id":405015,"number":"231, 232"},{"id":405016,"number":"240"},{"id":405017,"number":"251, 252, 253, 254"},{"id":405018,"number":"255"},{"id":405019,"number":"260"},{"id":405020,"number":"270"},{"id":405021,"number":"281"},{"id":405022,"number":"282"},{"id":405023,"number":"291, 292"},{"id":406001,"number":"295"}],"\uc81c\uc8fc/\uc11c\uadc0\ud3ec \uac04\uc120":[{"id":405024,"number":"300, 301"},{"id":405025,"number":"311"},{"id":405026,"number":"312"},{"id":405027,"number":"315"},{"id":405028,"number":"316"},{"id":405029,"number":"320"},{"id":405030,"number":"320-1"},{"id":405031,"number":"325, 326"},{"id":405032,"number":"331"},{"id":405033,"number":"332"},{"id":405034,"number":"335, 336"},{"id":405035,"number":"341, 342, 348, 349"},{"id":405036,"number":"43-1, 43-2"},{"id":405037,"number":"345"},{"id":405038,"number":"346"},{"id":405039,"number":"347"},{"id":405040,"number":"351, 352"},{"id":405041,"number":"355, 356, 357, 358"},{"id":405042,"number":"356-1"},{"id":405043,"number":"360"},{"id":405044,"number":"365"},{"id":405045,"number":"366"},{"id":405046,"number":"367"},{"id":405047,"number":"368"},{"id":405048,"number":"369"},{"id":405049,"number":"370"},{"id":405050,"number":"380"},{"id":406002,"number":"510"},{"id":406003,"number":"520"},{"id":406004,"number":"521"},{"id":406005,"number":"531"},{"id":406006,"number":"532"},{"id":405143,"number":"302"}],"\uc81c\uc8fc/\uc11c\uadc0\ud3ec \uc9c0\uc120":[{"id":405051,"number":"411"},{"id":405052,"number":"412"},{"id":405053,"number":"415"},{"id":405054,"number":"421"},{"id":405055,"number":"422"},{"id":405056,"number":"423"},{"id":405057,"number":"424"},{"id":405058,"number":"425"},{"id":405059,"number":"426"},{"id":405060,"number":"431"},{"id":405061,"number":"432"},{"id":405062,"number":"434"},{"id":405063,"number":"435"},{"id":405064,"number":"436"},{"id":405065,"number":"437"},{"id":405066,"number":"440"},{"id":405067,"number":"441"},{"id":405068,"number":"442"},{"id":405069,"number":"444"},{"id":405070,"number":"445"},{"id":405071,"number":"446"},{"id":405072,"number":"447"},{"id":405073,"number":"451"},{"id":405074,"number":"452"},{"id":405075,"number":"453"},{"id":405076,"number":"454"},{"id":405077,"number":"455"},{"id":405078,"number":"461"},{"id":405079,"number":"462"},{"id":405080,"number":"465"},{"id":405081,"number":"466"},{"id":405082,"number":"471"},{"id":405083,"number":"472"},{"id":405084,"number":"473"},{"id":405085,"number":"475"},{"id":405086,"number":"477"},{"id":405087,"number":"490"},{"id":405141,"number":"491"},{"id":406007,"number":"611, 612"},{"id":406008,"number":"615"},{"id":406009,"number":"621"},{"id":406010,"number":"622"},{"id":406011,"number":"623"},{"id":406012,"number":"624"},{"id":406013,"number":"625"},{"id":406014,"number":"627"},{"id":406015,"number":"630"},{"id":406016,"number":"633"},{"id":406017,"number":"635"},{"id":406018,"number":"641"},{"id":406019,"number":"642"},{"id":406020,"number":"643"},{"id":406021,"number":"644"},{"id":406022,"number":"645"},{"id":406023,"number":"651, 652"},{"id":406024,"number":"655"},{"id":406025,"number":"690"},{"id":406026,"number":"691"},{"id":406027,"number":"692"}],"\uc74d\uba74\uc9c0\uc120":[{"id":405089,"number":"701-1"},{"id":405090,"number":"701-2"},{"id":405091,"number":"702-1"},{"id":405092,"number":"702-2"},{"id":405093,"number":"703-1"},{"id":405094,"number":"703-2"},{"id":405095,"number":"704-1, 704-3"},{"id":405096,"number":"704-2, 704-3"},{"id":405097,"number":"704-4"},{"id":405098,"number":"711-1"},{"id":405099,"number":"711-2"},{"id":406028,"number":"721-2"},{"id":406029,"number":"721-3"},{"id":406030,"number":"722-1"},{"id":406031,"number":"722-2"},{"id":406032,"number":"731-1"},{"id":406033,"number":"731-2"},{"id":406034,"number":"732-1"},{"id":406035,"number":"732-2"},{"id":406036,"number":"732-3"},{"id":406037,"number":"741-1"},{"id":406038,"number":"741-2"},{"id":406039,"number":"742-1"},{"id":406040,"number":"742-2"},{"id":406041,"number":"743"},{"id":406042,"number":"744"},{"id":406043,"number":"751-1"},{"id":406044,"number":"751-2"},{"id":406045,"number":"752-1"},{"id":406046,"number":"752-2"},{"id":406047,"number":"761-1"},{"id":406048,"number":"761-2"},{"id":406049,"number":"761-3"},{"id":405100,"number":"771-1"},{"id":405101,"number":"771-2"},{"id":405102,"number":"772-1"},{"id":405103,"number":"772-2"},{"id":405104,"number":"781-1"},{"id":405105,"number":"781-2"},{"id":405106,"number":"782-1"},{"id":405107,"number":"782-2"},{"id":405108,"number":"783-1"},{"id":405109,"number":"783-2"},{"id":405110,"number":"784-1"},{"id":405111,"number":"784-2"},{"id":405112,"number":"785"},{"id":405113,"number":"791"},{"id":405114,"number":"792-1"},{"id":405115,"number":"792-2"},{"id":405116,"number":"793-1"},{"id":405117,"number":"793-2"},{"id":405118,"number":"794-1"},{"id":405119,"number":"794-2"},{"id":405120,"number":"795"}]},"C":{"\ub9c8\uc744\ubc84\uc2a4":[{"id":405127,"number":"900"},{"id":405128,"number":"910"},{"id":405129,"number":"921"},{"id":405130,"number":"922"},{"id":405131,"number":"924"}],"\ub9ac\ubb34\uc9c4":[{"id":405088,"number":"600"},{"id":405121,"number":"800, 800-1"}],"\uc2dc\ud2f0\ud22c\uc5b4":[{"id":406050,"number":"880"},{"id":405132,"number":"1111"},{"id":405142,"number":"1112"},{"id":405144,"number":"1113"}],"\uad00\uad11\uc9c0\uc21c\ud658":[{"id":405122,"number":"810-1"},{"id":405123,"number":"810-2"},{"id":405124,"number":"820-1"},{"id":405125,"number":"820-2"},{"id":405126,"number":"820-3"}],"\uc2ec\uc57c\ubc84\uc2a4":[{"id":405133,"number":"3001"},{"id":405134,"number":"3002"},{"id":405135,"number":"3003"},{"id":405136,"number":"3004"},{"id":405137,"number":"3005"},{"id":405138,"number":"3006"},{"id":405139,"number":"3007"},{"id":405140,"number":"3008"},{"id":406051,"number":"5001"},{"id":406052,"number":"5002"},{"id":406053,"number":"5003"},{"id":406054,"number":"5004"},{"id":406055,"number":"5005"},{"id":406056,"number":"5006"}]}}');function _A(e){let{scheduleId:t,children:n}=e;const r="https://bus.jeju.go.kr/data/schedule/downScheduleExcel?gscheduleId=".concat(t);return(0,Yb.jsx)("a",{className:"busScheduleItem",href:r,download:!0,children:n})}function SA(e){const[t,n]=(0,s.useState)("\uae09\ud589"),[r,i]=(0,s.useState)(null),o=e=>{n(e),i(e)},a=e=>{const n="1st"===e?bA.b[t]:bA.C[t];return n?n.map((e=>(0,Yb.jsx)(_A,{scheduleId:e.id,children:e.number},e.id))):null};return(0,Yb.jsxs)("div",{className:"notice-container",children:[(0,Yb.jsx)($b,{}),(0,Yb.jsxs)("div",{children:[(0,Yb.jsx)("p",{children:"\ubc84\uc2a4 \uc2dc\uac04\ud45c"}),(0,Yb.jsxs)("p",{children:["\uc81c\uc8fc\ubc84\uc2a4 \uc2dc\uac04\ud45c\ub97c \ubbf8\ub9ac\ubbf8\ub9ac \ud655\uc778\ud558\uc138\uc694.",(0,Yb.jsx)("br",{}),(0,Yb.jsx)("span",{className:"text-sm",children:"( \ubc84\uc2a4 \ub178\uc120\uc744 \ud074\ub9ad\ud558\uc2dc\uba74 \uc2dc\uac04\ud45c\uac00 \ub2e4\uc6b4\ub85c\ub4dc\ub429\ub2c8\ub2e4. )"})]})]}),(0,Yb.jsxs)("div",{className:"busScheduleContainer",children:[(0,Yb.jsx)("div",{className:"busScheduleTitle",children:Object.keys(bA.b).map((e=>(0,Yb.jsx)("button",{className:"titleBtn ".concat(r===e?"selectedBtn":""),type:"button",onClick:()=>o(e),children:e},e)))}),(0,Yb.jsx)("div",{className:"busScheduleItems",children:a("1st")}),(0,Yb.jsx)("div",{className:"busScheduleTitle",children:Object.keys(bA.C).map((e=>(0,Yb.jsx)("button",{className:"titleBtn ".concat(r===e?"selectedBtn":""),type:"button",onClick:()=>o(e),children:e},e)))}),(0,Yb.jsx)("div",{className:"busScheduleItems",children:a("2st")})]})]})}function EA(e){let{totalItems:t,itemCountPerPage:n,pageCount:r,currentPage:i,handlePageClick:o}=e;const a=Math.ceil(t/n),[l,c]=(0,s.useState)(1),u=1===l,h=l+r-1>=a;return(0,s.useEffect)((()=>{i===l+r&&c((e=>e+r)),i<l&&c((e=>e-r))}),[i,r,l]),(0,Yb.jsx)("div",{className:"wrapper",children:(0,Yb.jsxs)("ul",{children:[(0,Yb.jsx)("li",{className:"move ".concat(u&&"visible"),children:(0,Yb.jsx)(Ce,{to:"?page=".concat(l-1),onClick:()=>o(l-1),children:"\uc774\uc804"})}),[...Array(r)].map(((e,t)=>l+t<=a&&(0,Yb.jsx)("li",{children:(0,Yb.jsx)(Ce,{className:"page ".concat(i===l+t&&"active"),onClick:()=>o(l+t),to:"?page=".concat(l+t),children:l+t})},t))),(0,Yb.jsx)("li",{className:"move ".concat(h&&"visible"),children:(0,Yb.jsx)(Ce,{to:"?page=".concat(l+r),onClick:()=>o(l+r),children:"\ub2e4\uc74c"})})]})})}const IA=function(e){const[t,n]=(0,s.useState)([]),[r,i]=(0,s.useState)(0),[o,a]=(0,s.useState)(1),[l,c]=(0,s.useState)(!0),u=re(),h=te();return(0,s.useEffect)((()=>{!async function(){try{if(1===o){const e=await async function(){try{const e=await fetch("/api1/OpenAPI/service/bis/Notice"),t=await e.text(),n=(new DOMParser).parseFromString(t,"application/xml");return parseInt(n.querySelector("totalCount").textContent,10)}catch(e){throw new Error(e)}}();i(e)}const e=await i_(10*(o-1),10*o);n(e),c(!1)}catch(e){console.error("\ub370\uc774\ud130\ub97c \uac00\uc838\uc624\ub294 \uc911 \uc5d0\ub7ec \ubc1c\uc0dd:",e)}}()}),[o,h.search]),l?(0,Yb.jsx)(vA,{}):(0,Yb.jsxs)("div",{className:"notice-container",children:[(0,Yb.jsx)($b,{}),(0,Yb.jsxs)("div",{children:[(0,Yb.jsx)("p",{children:"\uacf5 \uc9c0 \uc0ac \ud56d"}),(0,Yb.jsx)("p",{children:"\uc81c\uc8fc\ubc84\uc2a4 \uacf5\uc9c0\uc0ac\ud56d\uc744 \ud655\uc778\ud558\uc2e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,Yb.jsxs)("div",{className:"noticeItem-container",children:[(0,Yb.jsxs)("div",{className:"notice-title",children:[(0,Yb.jsx)("div",{children:"\uc81c\ubaa9"}),(0,Yb.jsx)("div",{children:"\ub4f1\ub85d\uc77c"})]}),t.map((e=>(0,Yb.jsxs)(Ce,{to:"/notice/".concat(e.noticeId),state:{item:e},className:"noticeItem",children:[(0,Yb.jsx)("div",{children:e.noticeTitle}),(0,Yb.jsx)("div",{children:e.dateOnlyStr})]},e.noticeId))),(0,Yb.jsx)(EA,{totalItems:r,itemCountPerPage:10,pageCount:5,currentPage:o,handlePageClick:async e=>{try{u("?page=".concat(e))}catch(t){console.error("\ub370\uc774\ud130\ub97c \uac00\uc838\uc624\ub294 \uc911 \uc5d0\ub7ec \ubc1c\uc0dd:",t)}finally{a(e)}}})]})]})};n.p;const TA=function(){const e=Xa(),t=new wo,n=re(),[r,i]=(0,s.useState)(""),[o,a]=(0,s.useState)({email:"",password:""});(0,s.useEffect)((()=>{const t=Po(e,(e=>{e&&n("/")}));return()=>t()}),[e,n]);const l=e=>{const{name:t,value:n}=e.target;a((e=>({...e,[t]:n})))};return(0,Yb.jsxs)("div",{className:"bg-[#f8f8fc]",children:[(0,Yb.jsx)($b,{}),(0,Yb.jsxs)("div",{className:"notice-container h-screen",children:[(0,Yb.jsx)("div",{className:"my-0 mx-auto",children:(0,Yb.jsx)("p",{children:"\ub85c\uadf8\uc778"})}),(0,Yb.jsxs)("div",{className:"login-userContainer",children:[(0,Yb.jsx)("div",{children:(0,Yb.jsx)("button",{className:"rectBtn googleBtn",onClick:async()=>{try{const n=await async function(e,t,n){if(An(e.app))return Promise.reject(Ui(e,"operation-not-supported-in-this-environment"));const r=Hs(e);zi(e,t,go);const i=ia(r,n);return new ha(r,"signInViaPopup",t,i).executeNotNull()}(e,t),r=n.user;console.log(r);const i=jy(Jb,"users");(await sb(Mw(i,jw("uid","==",r.uid)))).empty&&await ub(i,{uid:r.uid,email:r.email,nickname:r.displayName})}catch(n){console.error("Google \ub85c\uadf8\uc778 \uc624\ub958:",n.message)}},children:"\uad6c\uae00 \ub85c\uadf8\uc778"})}),(0,Yb.jsx)("div",{className:"border-[1px] ml-[30px] md:ml-0"}),(0,Yb.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{await function(e,t,n){return An(e.app)?Promise.reject(Bi(e)):Ao(ft(e),mo.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Do(e),t}))}(e,o.email,o.password),alert("\ub85c\uadf8\uc778 \uc131\uacf5"),n("/")}catch(r){i("\ub85c\uadf8\uc778\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4.")}},children:[(0,Yb.jsxs)("div",{children:[(0,Yb.jsxs)("div",{className:"flex items-center justify-center gap-5",children:[(0,Yb.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,Yb.jsxs)("div",{className:"inputBox",children:[(0,Yb.jsx)("label",{htmlFor:"email",children:"\uc774\uba54\uc77c"}),(0,Yb.jsx)("input",{id:"email",name:"email",type:"text",autoComplete:"username",value:o.email,onChange:l})]}),(0,Yb.jsxs)("div",{className:"inputBox ",children:[(0,Yb.jsx)("label",{htmlFor:"password",children:"\ube44\ubc00\ubc88\ud638"}),(0,Yb.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",value:o.password,onChange:l})]})]}),(0,Yb.jsx)("button",{type:"submit",className:"rectBtn",children:"\ub85c\uadf8\uc778"})]}),r&&(0,Yb.jsx)("div",{className:"fail-message",children:r}),(0,Yb.jsxs)("div",{className:"flex items-center justify-around gap-4",children:[(0,Yb.jsxs)("div",{className:"flex items-center gap-2",children:["\uc774\uba54\uc77c / \ube44\ubc00\ubc88\ud638 \uaddc\uce59",(0,Yb.jsxs)("span",{className:"tooltip",tabIndex:"0",children:[(0,Yb.jsx)("img",{src:"https://www.nhcapital.co.kr/resource/pc/image/icon/icon_tooltip.png",alt:"id, password rule"}),(0,Yb.jsx)("div",{children:(0,Yb.jsxs)("ul",{className:"text-left",children:[(0,Yb.jsx)("li",{children:"- \uc774\uba54\uc77c\uc740 \uc720\ud6a8\ud55c \ud615\uc2dd\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4."}),(0,Yb.jsx)("li",{children:"- \ube44\ubc00\ubc88\ud638\ub294 \ucd5c\uc18c 6\uc790 \uc774\uc0c1 \uc791\uc131\ud574\uc8fc\uc138\uc694."})]})})]})]}),(0,Yb.jsx)(Ce,{to:"/findPassword",type:"button",className:"btn",children:"\ube44\ubc00\ubc88\ud638 \ucc3e\uae30"})]})]}),(0,Yb.jsxs)(Ce,{to:"/signup",className:"signupLink-container",children:[(0,Yb.jsx)("div",{className:"border-t-[1px] pt-[30px] mt-8",children:"\uc81c\uc8fc\ubc84\uc2a4 \ud68c\uc6d0\uac00\uc785"}),(0,Yb.jsx)("div",{children:"[\ud68c\uc6d0\uac00\uc785]\uc744 \ud1b5\ud574 \uc544\uc774\ub514\uc640 \ube44\ubc00\ubc88\ud638\ub97c \ub4f1\ub85d\ud574\uc8fc\uc138\uc694."})]})]})]})]})]})};const kA=function(e){const[t,n]=(0,s.useState)({email:"",password:"",passwordCheck:"",nickName:""}),[r,i]=(0,s.useState)(null),o=re();(0,s.useEffect)((()=>{Po(Qb,(e=>{e&&o("/")}))}));const a=e=>{const{name:t,value:r}=e.target;n((e=>({...e,[t]:r})))},l=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);return(0,Yb.jsxs)("div",{className:"notice-container",children:[(0,Yb.jsx)($b,{}),(0,Yb.jsxs)("div",{children:[(0,Yb.jsx)("p",{children:"\uc81c\uc8fc\ubc84\uc2a4 \ud68c\uc6d0\uac00\uc785"}),(0,Yb.jsx)("p",{children:"\ud68c\uc6d0\uac00\uc785\uc744 \uc2dc\uc791\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4."})]}),(0,Yb.jsx)("div",{className:"signup-container n",children:(0,Yb.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),l(t.email))if(t.password===t.passwordCheck)if(t.password.length<6)i("\ube44\ubc00\ubc88\ud638\ub294 \ucd5c\uc18c 6\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4.");else try{const e=await async function(e,t,n){if(An(e.app))return Promise.reject(Bi(e));const r=Hs(e),i=Zs(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",So),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Do(e),t})),o=await Eo._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(Qb,t.email,t.password),n=e.user;await ub(jy(Jb,"users"),{uid:n.uid,email:t.email,nickname:t.nickName}),o("/login"),alert("\ud68c\uc6d0\uac00\uc785 \uc131\uacf5:",n)}catch(r){"auth/email-already-in-use"===r.code?i("\uc774\ubbf8 \uc0ac\uc6a9 \uc911\uc778 \uc774\uba54\uc77c \uc8fc\uc18c\uc785\ub2c8\ub2e4."):i("\ud68c\uc6d0\uac00\uc785 \uc2e4\ud328: ".concat(r.code," ").concat(r.message))}else i("\ube44\ubc00\ubc88\ud638\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");else i("\uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \uc774\uba54\uc77c \uc8fc\uc18c\uc785\ub2c8\ub2e4.")},children:[(0,Yb.jsx)("div",{className:"signup-inputBox",children:(0,Yb.jsxs)("label",{htmlFor:"email",children:["\uc774\uba54\uc77c",(0,Yb.jsx)("div",{children:(0,Yb.jsx)("input",{id:"email",name:"email",type:"text",placeholder:"\uc774\uba54\uc77c\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694",autoComplete:"username",value:t.email,onChange:a})})]})}),(0,Yb.jsx)("div",{className:"signup-inputBox",children:(0,Yb.jsxs)("label",{htmlFor:"password",children:["\ube44\ubc00\ubc88\ud638",(0,Yb.jsx)("div",{children:(0,Yb.jsx)("input",{id:"password",name:"password",type:"password",placeholder:"\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694",autoComplete:"current-password",value:t.password,onChange:a})})]})}),(0,Yb.jsx)("div",{className:"signup-inputBox",children:(0,Yb.jsxs)("label",{htmlFor:"passwordCheck",children:["\ube44\ubc00\ubc88\ud638 \ud655\uc778",(0,Yb.jsx)("div",{children:(0,Yb.jsx)("input",{id:"passwordCheck",name:"passwordCheck",type:"password",placeholder:"\ube44\ubc00\ubc88\ud638 \ud655\uc778",autoComplete:"current-password",value:t.passwordCheck,onChange:a})})]})}),(0,Yb.jsx)("div",{className:"signup-inputBox",children:(0,Yb.jsxs)("label",{htmlFor:"nickName",children:["\ub2c9\ub124\uc784",(0,Yb.jsx)("div",{children:(0,Yb.jsx)("input",{id:"nickName",name:"nickName",type:"text",placeholder:"\ub2c9\ub124\uc784\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694",value:t.nickName,onChange:a})})]})}),(0,Yb.jsx)("div",{className:"flex justify-end",children:(0,Yb.jsx)("button",{type:"submit",className:"rectBtn",children:"\uac00\uc785\ud558\uae30"})}),r&&(0,Yb.jsx)("p",{className:"error",children:r})]})})]})};const xA=n.p+"static/media/person.48bc155ce8bd5f7554844dd384145375.svg";const CA=function(e){let{isEditing:t,setIsEditing:n,initialText:r}=e;const[i,o]=(0,s.useState)(""),[a,l]=(0,s.useState)("");return(0,s.useEffect)((()=>{let e;return(async()=>{const t=await new Promise((t=>{e=Po(Qb,(e=>{t(e)}))}));if(t){const e=Mw(jy(Jb,"users"),jw("uid","==",t.uid)),n=await sb(e);if(n.empty)console.log("User document not found for UID:",t.uid),l("\uc774\ub984\uc5c6\uc74c");else{const e=n.docs[0];l(e.data().nickname)}}else l("");o((null===r||void 0===r?void 0:r.text)||"")})(),()=>{e&&e()}}),[r]),(0,Yb.jsxs)("div",{className:"reviewForm-container",children:[(0,Yb.jsxs)("div",{className:"userContainer",children:[(0,Yb.jsx)("img",{src:xA,alt:"personImg",width:80}),(0,Yb.jsx)("div",{className:"nickname",children:a})]}),(0,Yb.jsxs)("div",{className:"reviewContainer",children:[(0,Yb.jsx)("textarea",{className:"reviewInput",value:i,placeholder:"\ubc84\uc2a4 \ub178\uc120\uacfc \uc815\ub958\uc7a5\uc5d0 \ub300\ud55c \ub9ac\ubdf0\uc640 \ud3c9\uac00\ub97c \ub0a8\uaca8\uc8fc\uc138\uc694!!",onChange:e=>{o(e.target.value)}}),(0,Yb.jsx)("div",{className:"btnContainer",children:(0,Yb.jsx)("button",{className:"rectBtn",type:"submit",onClick:async()=>{const e=Qb.currentUser;try{if(e){const s=jy(Jb,"reviews");t?(await lb(Uy(Jb,"reviews",r.id),{text:i,timestamp:wb()}),n(!1),alert("Review\uac00 \uc131\uacf5\uc801\uc73c\ub85c \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")):(await ub(s,{userId:e.uid,text:i,nickname:a,timestamp:wb()}),alert("Review\uac00 \uc131\uacf5\uc801\uc73c\ub85c \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),o("")}else alert("\ub85c\uadf8\uc778\uc2dc\uc5d0\ub9cc \ub9ac\ubdf0\uc791\uc131\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4\u3160\u3160"),o("")}catch(jA){console.log(jA),alert("\ub9ac\ubdf0 \uc800\uc7a5 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},children:"\ud655\uc778"})})]})]})};function NA(e){let{review:t}=e;const[n,r]=(0,s.useState)(""),[i,o]=(0,s.useState)(!1),a=Qb.currentUser;return(0,Yb.jsx)(Yb.Fragment,{children:i?(0,Yb.jsx)(CA,{isEditing:i,setIsEditing:o,initialText:n}):(0,Yb.jsxs)("div",{className:"review-item",children:[(0,Yb.jsxs)("div",{className:"userContainer",children:[(0,Yb.jsx)("img",{src:xA,alt:"personImg",width:80}),(0,Yb.jsx)("div",{className:"nickname",children:t.nickname})]}),(0,Yb.jsxs)("div",{className:"reviewContainer",children:[(0,Yb.jsxs)("div",{className:"content",children:[(0,Yb.jsxs)("p",{children:[t.date," "]}),(0,Yb.jsx)("p",{children:t.text})]}),(0,Yb.jsxs)("div",{className:"btnContainer",children:[(0,Yb.jsx)("button",{type:"button",className:"correctionBtn rectBtn",onClick:()=>{a&&t.userId===a.uid?(r(t),o(!0)):alert("\ud574\ub2f9 \ub9ac\ubdf0\ub97c \uc218\uc815\ud560 \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.")},children:"\uc218\uc815"}),(0,Yb.jsx)("button",{type:"button",className:"rectBtn deleteBtn",onClick:()=>(async e=>{if(a&&t.userId===a.uid){const t=Uy(Jb,"reviews",e);try{await cb(t),alert("\ub9ac\ubdf0\uac00 \uc131\uacf5\uc801\uc73c\ub85c \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(jA){console.error("\ub9ac\ubdf0 \uc0ad\uc81c \uc911 \uc624\ub958 : ",jA),alert("\ub9ac\ubdf0 \uc0ad\uc81c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}}else alert("\ud574\ub2f9 \ub9ac\ubdf0\ub97c \uc0ad\uc81c\ud560 \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.")})(t.id),children:"\uc0ad\uc81c"})]})]})]},t.id)})}const AA=function(){const[e,t]=(0,s.useState)([]);return(0,s.useEffect)((()=>{const e=hb(jy(Jb,"reviews"),(e=>{const n=[];e.forEach((e=>{const t=e.data(),r=t.timestamp?new Date(1e3*t.timestamp.seconds+t.timestamp.nanoseconds/1e6):new Date,i="".concat(r.getFullYear(),"-").concat((r.getMonth()+1).toString().padStart(2,"0"),"-").concat(r.getDate().toString().padStart(2,"0")," ").concat(r.getHours().toString().padStart(2,"0"),":").concat(r.getMinutes().toString().padStart(2,"0"),":").concat(r.getSeconds().toString().padStart(2,"0")),s={id:e.id,text:t.text,nickname:t.nickname,date:i,userId:t.userId};n.push(s)})),n.sort(((e,t)=>new Date(t.date)-new Date(e.date))),t(n)}));return()=>e()}),[]),(0,Yb.jsx)("div",{className:"reviewList-container",children:e.map((e=>(0,Yb.jsx)(NA,{review:e},e.id)))})};const RA=function(e){return(0,Yb.jsxs)("div",{children:[(0,Yb.jsx)($b,{}),(0,Yb.jsxs)("div",{className:"container",children:[(0,Yb.jsx)("div",{children:(0,Yb.jsx)(CA,{})}),(0,Yb.jsx)("div",{children:(0,Yb.jsx)(AA,{})})]})]})};const DA=n.p+"static/media/noBus.619d2870f46a93a9357c2fa0a01d7dcf.svg";const PA=function(e){const[t,n]=gN(SN),[r,i]=(0,s.useState)([]),[o,a]=(0,s.useState)(!0);return(0,s.useEffect)((()=>{const e=localStorage.getItem("stationInfo");if(e){const t=JSON.parse(e);n(t)}}),[n]),(0,s.useEffect)((()=>{const e=setInterval((async()=>{try{const e=await fetch("/api2/api/searchArrivalInfoList.do?station_id=".concat(t.stationId)),n=await e.json();i(n),a(!1)}catch(e){throw new Error(e)}}),1e3);return()=>clearInterval(e)}),[t]),o?(0,Yb.jsx)(vA,{}):(0,Yb.jsxs)("div",{children:[(0,Yb.jsx)($b,{}),(0,Yb.jsxs)("div",{className:"container",children:[(0,Yb.jsx)("div",{className:"CheckedBusStop",children:(0,Yb.jsx)("h2",{children:"".concat(t.stationNm).concat(t.dirTp,"(").concat(t.stationId,")")})}),(0,Yb.jsx)("div",{children:r.length>0?r.map((e=>(0,Yb.jsx)(Ce,{to:"/busRouteDetail",onClick:()=>(e=>{localStorage.setItem("routeInfo",JSON.stringify(e))})(e),children:(0,Yb.jsxs)("div",{className:"busDetailItem",children:[(0,Yb.jsxs)("div",{className:"busInformation",children:[(0,Yb.jsx)("p",{className:"routeNumber",children:"".concat(e.ROUTE_NUM,"(").concat(e.ROUTE_SUB_NM,")")}),(0,Yb.jsx)("p",{className:"dirTipText",children:"".concat(e.ROUTE_SUB_NM," \ubc29\uba74")})]}),(0,Yb.jsxs)("div",{className:"timeArrivalContainer",children:[(0,Yb.jsxs)("div",{className:"timeArrival",children:[(0,Yb.jsx)("p",{className:"time",children:"".concat(e.PREDICT_TRAV_TM,"\ubd84")}),(0,Yb.jsx)("p",{className:"prevStaion",children:"".concat(e.REMAIN_STATION,"\ubc88\uc9f8 \uc804")})]}),(0,Yb.jsx)("div",{children:(0,Yb.jsx)("p",{className:"arrivalDirTip",children:e.CURR_STATION_NM})})]})]})},e.ROUTE_ID))):(0,Yb.jsxs)("div",{className:"noArrivalInfo",children:[(0,Yb.jsx)("div",{className:"ml-10",children:(0,Yb.jsx)("img",{src:DA,alt:"noBusImg",width:300})}),(0,Yb.jsx)("h1",{children:"\ub3c4\ucc29\uc815\ubcf4\uc5c6\uc74c"})]})})]})]})};const OA=function(e){const[t,n]=(0,s.useState)([]),[r,i]=(0,s.useState)([]),[o,a]=(0,s.useState)([]),[l,c]=(0,s.useState)(!0);return(0,s.useEffect)((()=>{const e=async()=>{try{const e=await fetch("/api2/api/searchBusAllocList.do"),t=await e.json(),r=localStorage.getItem("routeInfo");if("undefined"!==r){const e=JSON.parse(r),i=t.filter((t=>t.PLATE_NO===e.PLATE_NO||t.ROUTE_ID===e.ROUTE_ID&&t.ROUTE_NUM===e.ROUTE_NUM&&t.ROUTE_SUB_NM===e.ROUTE_SUB_NM));n(e),i.length>0&&(n(i.length>0?i[0]:[]),a(i),c(!1))}}catch(e){console.error("Error fetching data:",e)}};e();const t=setInterval(e,1e3);return()=>clearInterval(t)}),[]),(0,s.useEffect)((()=>{(async()=>{try{const e=await fetch("/api2/api/searchBusRouteStationList.do?route_id=".concat(t.ROUTE_ID)),n=await e.json();i(n)}catch(e){console.error("Error fetching data:",e)}})()}),[t]),(0,Yb.jsxs)("div",{children:[(0,Yb.jsx)($b,{}),(0,Yb.jsxs)("div",{className:"container",children:[void 0!==t.ROUTE_NUM&&r.length>1?(0,Yb.jsxs)("div",{className:"CheckedBusRoute",children:[(0,Yb.jsx)("h2",{children:"".concat(t.ROUTE_NUM," (").concat(t.ROUTE_SUB_NM,")")}),(0,Yb.jsx)("p",{className:"dirTipText",children:"".concat(r[0].STATION_NM," ~ ").concat(r[r.length-1].STATION_NM)})]}):(0,Yb.jsx)("div",{className:"CheckedBusRoute",children:(0,Yb.jsx)("h2",{children:"\uc7a0\uc2dc\ub9cc \uae30\ub2e4\ub824\uc8fc\uc138\uc694 ..."})}),(0,Yb.jsxs)("div",{className:"RouteStationList",children:[(0,Yb.jsx)("div",{className:"operation",children:"\uc6b4\ud589\uc911 ".concat(o.length,"\ub300")}),r.length>1?r.map((e=>(0,Yb.jsx)("div",{children:(0,Yb.jsxs)("div",{className:"RouteStationItem",children:["".concat(e.STATION_ORD,". ").concat(e.STATION_NM," (").concat(e.STATION_ID,")"),o.map(((t,n)=>t.CURR_STATION_NM===e.STATION_NM&&t.CURR_STATION_ID===e.STATION_ID?(0,Yb.jsx)("div",{className:"realTiemBusContainer",children:(0,Yb.jsx)("p",{children:t.PLATE_NO})},n):null))]})},e.STATION_ORD))):(0,Yb.jsx)(vA,{})]})]})]})};const LA=function(e){const t=te().state.item,n=re();return(0,Yb.jsxs)("div",{className:"notice-container",children:[(0,Yb.jsx)($b,{}),(0,Yb.jsxs)("div",{children:[(0,Yb.jsx)("p",{children:"\uacf5 \uc9c0 \uc0ac \ud56d"}),(0,Yb.jsx)("p",{children:"\uc81c\uc8fc\ubc84\uc2a4 \uacf5\uc9c0\uc0ac\ud56d\uc744 \ud655\uc778\ud558\uc2e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,Yb.jsxs)("div",{className:"notice-detail-container",children:[(0,Yb.jsxs)("div",{className:"notice-head",children:[(0,Yb.jsx)("p",{className:"notice-title",children:t.noticeTitle}),(0,Yb.jsx)("p",{className:"notice-date",children:t.dateOnlyStr})]}),(0,Yb.jsx)("div",{className:"notice-body",children:(0,Yb.jsx)("p",{children:t.noticeText})})]}),(0,Yb.jsx)("div",{className:"flex justify-end",children:(0,Yb.jsx)("button",{className:"rectBtn",onClick:()=>{n("/notice")},children:"\ubaa9\ub85d\uc73c\ub85c"})})]})};const MA=function(e){const t=(0,s.useRef)();return(0,Yb.jsxs)("div",{className:"notice-container",children:[(0,Yb.jsx)($b,{}),(0,Yb.jsxs)("div",{children:[(0,Yb.jsx)("p",{children:"\ube44\ubc00\ubc88\ud638 \ucc3e\uae30"}),(0,Yb.jsxs)("div",{className:"check",children:[(0,Yb.jsx)("div",{children:(0,Yb.jsx)("img",{src:"https://www.nhcapital.co.kr/resource/pc/image/component/icon_notice.png",alt:"checkImg",width:20,className:"mt-1"})}),(0,Yb.jsxs)("div",{children:["\ube44\ubc00\ubc88\ud638 \ubd84\uc2e4 \uc2dc \ubcf8\uc778 \ud655\uc778 \uc808\ucc28\ub97c \uac70\uce5c \ud6c4 \ube44\ubc00\ubc88\ud638 \uc7ac\uc124\uc815 \uc774\uba54\uc77c\uc744 \ubcf4\ub0b4\ub4dc\ub9bd\ub2c8\ub2e4.",(0,Yb.jsx)("br",{}),"\ube44\ubc00\ubc88\ud638 \uc7ac\uc124\uc815 \uc774\uba54\uc77c\uc744 \ubc1b\uc73c\uc2e0 \uacbd\uc6b0, \uc774\uba54\uc77c\uc758 \uc9c0\uc2dc\uc5d0 \ub530\ub77c \uc0c8\ub85c\uc6b4 \ube44\ubc00\ubc88\ud638\ub97c \uc124\uc815\ud574\uc8fc\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4.",(0,Yb.jsx)("br",{}),(0,Yb.jsxs)("span",{className:"text-sm text-[#707070]",children:[" ","\ucc38\uace0 : \ube44\ubc00\ubc88\ud638 \uc7ac\uc124\uc815 \uc774\uba54\uc77c\uc774 \uc218\uc2e0\ub418\uc9c0 \uc54a\ub294 \uacbd\uc6b0, \uc774\uba54\uc77c\uc774 \uc2a4\ud338 \ud3f4\ub354\ub85c \uc774\ub3d9\ub418\uc5c8\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]})]})]})]}),(0,Yb.jsx)("div",{className:"signup-container",children:(0,Yb.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=Jb.collection("users");(await e.where("email","==",t.current.value).get()).empty?alert("\ub4f1\ub85d\ub418\uc9c0 \uc54a\uc740 \uc774\uba54\uc77c\uc785\ub2c8\ub2e4."):(await async function(e,t,n){const r=Hs(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Ro(r,i,n),await Zs(r,i,"getOobCode",ao)}(Qb,t.current.value),alert("\uc774\uba54\uc77c\uc744 \ud655\uc778\ud574 \uc8fc\uc138\uc694!"))}catch(n){console.error("Error finding password: ",n),alert("\uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574 \uc8fc\uc138\uc694.")}},children:[(0,Yb.jsx)("div",{className:"signup-inputBox",children:(0,Yb.jsxs)("label",{htmlFor:"email",children:["\uc774\uba54\uc77c",(0,Yb.jsx)("div",{children:(0,Yb.jsx)("input",{id:"email",name:"email",type:"text",placeholder:"\uc774\uba54\uc77c\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694",autoComplete:"username",ref:t})})]})}),(0,Yb.jsx)("div",{className:"flex justify-end",children:(0,Yb.jsx)("button",{type:"submit",className:"rectBtn",children:"\uba54\uc77c \ubcf4\ub0b4\uae30"})})]})})]})};const FA=function(){return(0,Yb.jsx)(Te,{children:(0,Yb.jsxs)(we,{children:[(0,Yb.jsx)(ve,{path:"/",element:(0,Yb.jsx)(s_,{})}),(0,Yb.jsx)(ve,{path:"/routeSearch",element:(0,Yb.jsx)(a_,{})}),(0,Yb.jsx)(ve,{path:"/pathSearch",element:(0,Yb.jsx)(yN,{})}),(0,Yb.jsx)(ve,{path:"/busStop",element:(0,Yb.jsx)(EN,{})}),(0,Yb.jsx)(ve,{path:"/busStopDetail",element:(0,Yb.jsx)(PA,{})}),(0,Yb.jsx)(ve,{path:"/busRouteDetail",element:(0,Yb.jsx)(OA,{})}),(0,Yb.jsx)(ve,{path:"/nearByStation",element:(0,Yb.jsx)(wA,{})}),(0,Yb.jsx)(ve,{path:"/busSchedule",element:(0,Yb.jsx)(SA,{})}),(0,Yb.jsx)(ve,{path:"/notice",element:(0,Yb.jsx)(IA,{})}),(0,Yb.jsx)(ve,{path:"/notice/:noticeId",element:(0,Yb.jsx)(LA,{})}),(0,Yb.jsx)(ve,{path:"/review",element:(0,Yb.jsx)(RA,{})}),(0,Yb.jsx)(ve,{path:"/login",element:(0,Yb.jsx)(TA,{})}),(0,Yb.jsx)(ve,{path:"/signup",element:(0,Yb.jsx)(kA,{})}),(0,Yb.jsx)(ve,{path:"/findPassword",element:(0,Yb.jsx)(MA,{})})]})})};a.createRoot(document.getElementById("root")).render((0,Yb.jsx)(pN,{children:(0,Yb.jsx)(PN,{apiKey:"AIzaSyD2O5f3i3-FGjddQaPrS_vNQiUdrpzUnbc",onLoad:()=>console.log("Maps API has loaded."),children:(0,Yb.jsx)(FA,{})})}))})();
//# sourceMappingURL=main.52c0fc4b.js.map